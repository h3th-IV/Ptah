(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[202],{6202:(ai,vt,Ce)=>{"use strict";Ce.r(vt),Ce.d(vt,{FaucetModule:()=>It});var J=Ce(6895),Ke=Ce(4006),G=Ce(6630),he=Ce(4550),ne=Ce(3546),Y=Ce(4144),B=Ce(4859),Ae=Ce(7009),de=Ce(5861),ze=Ce(5376),Se=Ce(6003),ge=Ce(4323),ke=Ce(5159),Ze=Ce(2064),ft=Ce(4304),at=Ce(9978),pe=Ce(6233);let qt=0;const Kt=function(){var Z=(0,de.Z)(function*({version:ee,contractBody:T,options:I}){const se=new Worker(URL.createObjectURL(new Blob([`(${pe.q})()`],{type:"module"}))),Te=((Z,ee)=>{const T={language:"Solidity",sources:{Compiled_Contracts:{content:Z}},settings:{...ee,outputSelection:{"*":{"*":["*"]}}}};return JSON.stringify(T)})(T,I),Ve=qt++;return new Promise((Gt,Pt)=>{const Bt=({data:He})=>{const{id:st,result:Ct}=He;st===Ve&&(se.removeEventListener("message",Bt),se.removeEventListener("error",Lt),se.terminate(),Gt(Ct))},Lt=He=>{se.removeEventListener("message",Bt),se.removeEventListener("error",Lt),se.terminate(),Pt(He)};se.addEventListener("message",Bt),se.addEventListener("error",Lt),se.postMessage({id:Ve,input:Te,version:ee})})});return function(T){return Z.apply(this,arguments)}}();var C=Ce(4650),gt=Ce(5004);const Pe=["ref"];function kt(Z){return Z&&Z.replace(/\r\n|\r/g,"\n")}let fe=(()=>{class Z{constructor(T,I){this._differs=T,this._ngZone=I,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new C.vpe,this.focusChange=new C.vpe,this.scroll=new C.vpe,this.drop=new C.vpe,this.codeMirrorLoaded=new C.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=se=>{},this.onTouched=()=>{}}set options(T){this._options=T,!this._differ&&T&&(this._differ=this._differs.find(T).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror=typeof CodeMirror<"u"?CodeMirror:Promise.resolve().then(Ce.t.bind(Ce,8266,19))),this._codeMirror}ngAfterViewInit(){var T=this;this._ngZone.runOutsideAngular((0,de.Z)(function*(){const I=yield T.codeMirrorGlobal;T.codeMirror=(I?.default?I.default:I).fromTextArea(T.ref.nativeElement,T._options),T.codeMirror.on("cursorActivity",Te=>T._ngZone.run(()=>T.cursorActive(Te))),T.codeMirror.on("scroll",T.scrollChanged.bind(T)),T.codeMirror.on("blur",()=>T._ngZone.run(()=>T.focusChanged(!1))),T.codeMirror.on("focus",()=>T._ngZone.run(()=>T.focusChanged(!0))),T.codeMirror.on("change",(Te,Ve)=>T._ngZone.run(()=>T.codemirrorValueChanged(Te,Ve))),T.codeMirror.on("drop",(Te,Ve)=>{T._ngZone.run(()=>T.dropFiles(Te,Ve))}),T.codeMirror.setValue(T.value),T.codeMirrorLoaded.emit(T)}))}ngDoCheck(){if(!this._differ)return;const T=this._differ.diff(this._options);T&&(T.forEachChangedItem(I=>this.setOptionIfChanged(I.key,I.currentValue)),T.forEachAddedItem(I=>this.setOptionIfChanged(I.key,I.currentValue)),T.forEachRemovedItem(I=>this.setOptionIfChanged(I.key,I.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(T,I){const se=T.getValue();this.value!==se&&(this.value=se,this.onChange(this.value))}setOptionIfChanged(T,I){this.codeMirror&&this.codeMirror.setOption(T,I)}focusChanged(T){this.onTouched(),this.isFocused=T,this.focusChange.emit(T)}scrollChanged(T){this.scroll.emit(T.getScrollInfo())}cursorActive(T){this.cursorActivity.emit(T)}dropFiles(T,I){this.drop.emit([T,I])}writeValue(T){if(null==T)return;if(!this.codeMirror)return void(this.value=T);const I=this.codeMirror.getValue();if(T!==I&&kt(I)!==kt(T))if(this.value=T,this.preserveScrollPosition){const se=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(se.left,se.top)}else this.codeMirror.setValue(this.value)}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.disabled=T,this.setOptionIfChanged("readOnly",this.disabled)}}return Z.\u0275fac=function(T){return new(T||Z)(C.Y36(C.aQg),C.Y36(C.R0b))},Z.\u0275cmp=C.Xpm({type:Z,selectors:[["ngx-codemirror"]],viewQuery:function(T,I){if(1&T&&C.Gf(Pe,5),2&T){let se;C.iGM(se=C.CRH())&&(I.ref=se.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop",codeMirrorLoaded:"codeMirrorLoaded"},features:[C._Bn([{provide:Ke.JU,useExisting:(0,C.Gpc)(()=>Z),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(T,I){1&T&&(C.TgZ(0,"textarea",0,1),C._uU(2,"    "),C.qZA()),2&T&&(C.Gre("ngx-codemirror ",I.className,""),C.ekj("ngx-codemirror--focused",I.isFocused),C.Q6J("name",I.name)("autofocus",I.autoFocus))},encapsulation:2,changeDetection:0}),Z})(),Xe=(()=>{class Z{}return Z.\u0275fac=function(T){return new(T||Z)},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({}),Z})();var M=Ce(9549);function oe(Z,ee){1&Z&&(C.TgZ(0,"span"),C._uU(1,"Connect your MetaMask"),C.qZA())}function y(Z,ee){if(1&Z&&(C.TgZ(0,"span"),C._uU(1),C.qZA()),2&Z){const T=C.oxw();C.xp6(1),C.AsE("",T.userData.address.substring(0,6),"...",T.userData.address.slice(-6),"")}}function K(Z,ee){if(1&Z&&(C.TgZ(0,"option",18),C._uU(1),C.qZA()),2&Z){const T=ee.$implicit;C.Q6J("value",T),C.xp6(1),C.hij(" ",T," ")}}function P(Z,ee){if(1&Z&&(C.TgZ(0,"li",21),C._uU(1),C.qZA()),2&Z){const T=ee.$implicit;C.xp6(1),C.hij(" ",T.formattedMessage," ")}}function le(Z,ee){if(1&Z&&(C.TgZ(0,"div",19)(1,"h4"),C._uU(2,"Compiler Errors:"),C.qZA(),C.TgZ(3,"ul"),C.YNc(4,P,2,1,"li",20),C.qZA()()),2&Z){const T=C.oxw();C.xp6(4),C.Q6J("ngForOf",T.compilerErrors)}}function V(Z,ee){if(1&Z&&(C.TgZ(0,"option",18),C._uU(1),C.qZA()),2&Z){const T=ee.$implicit;C.Q6J("value",T),C.xp6(1),C.hij(" ",T," ")}}function tt(Z,ee){if(1&Z){const T=C.EpF();C.TgZ(0,"div")(1,"h3",22),C._uU(2,"Contract to Deploy:"),C.qZA(),C.TgZ(3,"mat-form-field",23)(4,"mat-label"),C._uU(5,"Compiled Contracts"),C.qZA(),C.TgZ(6,"select",11),C.NdJ("ngModelChange",function(se){C.CHM(T);const Te=C.oxw();return C.KtG(Te.selectedContractName=se)}),C.YNc(7,V,2,2,"option",12),C.qZA()(),C.TgZ(8,"mat-form-field")(9,"input",24),C.NdJ("ngModelChange",function(se){C.CHM(T);const Te=C.oxw();return C.KtG(Te.commonGweiValue=se)}),C.qZA()(),C.TgZ(10,"button",25),C.NdJ("click",function(){C.CHM(T);const se=C.oxw();return C.KtG(se.deploySelectedContract())}),C._uU(11," Deploy Selected Contract "),C.qZA()()}if(2&Z){const T=C.oxw();C.xp6(6),C.Q6J("ngModel",T.selectedContractName),C.xp6(1),C.Q6J("ngForOf",T.contractNames),C.xp6(2),C.Q6J("ngModel",T.commonGweiValue)}}function Qe(Z,ee){if(1&Z&&(C.TgZ(0,"div",26),C._uU(1),C.qZA()),2&Z){const T=C.oxw();C.xp6(1),C.hij(" Contract Address: ",T.deployedContractAddress," ")}}function S(Z,ee){if(1&Z&&(C.TgZ(0,"div",36),C._uU(1),C.qZA()),2&Z){const T=C.oxw(2).$implicit;C.xp6(1),C.AsE(" Output for ",T.name,": ",T.outputValue," ")}}function m(Z,ee){if(1&Z){const T=C.EpF();C.ynx(0),C.TgZ(1,"div",33)(2,"button",25),C.NdJ("click",function(){C.CHM(T);const se=C.oxw().$implicit,Te=C.oxw(2);return C.KtG(Te.invokeFunction(se))}),C._uU(3),C.qZA(),C.TgZ(4,"mat-form-field",10)(5,"textarea",34),C.NdJ("ngModelChange",function(se){C.CHM(T);const Te=C.oxw().$implicit;return C.KtG(Te.inputValues=se)}),C.qZA()()(),C.YNc(6,S,2,2,"div",35),C.BQk()}if(2&Z){const T=C.oxw().$implicit;C.xp6(3),C.hij(" Invoke ",T.name," "),C.xp6(2),C.MGl("placeholder","(",T.inputHints,")"),C.Q6J("ngModel",T.inputValues),C.xp6(1),C.Q6J("ngIf",""!==T.outputValue)}}function $(Z,ee){if(1&Z&&(C.TgZ(0,"div",36),C._uU(1),C.qZA()),2&Z){const T=C.oxw(2).$implicit;C.xp6(1),C.AsE(" Output for ",T.name,": ",T.outputValue," ")}}function me(Z,ee){if(1&Z){const T=C.EpF();C.TgZ(0,"div")(1,"button",25),C.NdJ("click",function(){C.CHM(T);const se=C.oxw().$implicit,Te=C.oxw(2);return C.KtG(Te.invokeFunction(se))}),C._uU(2),C.qZA(),C.YNc(3,$,2,2,"div",35),C.qZA()}if(2&Z){const T=C.oxw().$implicit;C.xp6(2),C.hij(" Invoke ",T.name," "),C.xp6(1),C.Q6J("ngIf",""!==T.outputValue)}}function U(Z,ee){if(1&Z&&(C.TgZ(0,"div")(1,"div",30),C.YNc(2,m,7,4,"ng-container",31),C.YNc(3,me,4,2,"ng-template",null,32,C.W1O),C.qZA()()),2&Z){const T=ee.$implicit,I=C.MAs(4);C.xp6(2),C.Q6J("ngIf",T.inputs.length>0)("ngIfElse",I)}}function Q(Z,ee){if(1&Z&&(C.TgZ(0,"div"),C._uU(1),C.qZA()),2&Z){const T=C.oxw(2);C.xp6(1),C.hij("Output: ",T.invokeOutput,"")}}function F(Z,ee){if(1&Z&&(C.TgZ(0,"div",27)(1,"h3"),C._uU(2,"Interact with Contract"),C.qZA(),C.YNc(3,U,5,2,"div",28),C.TgZ(4,"div",29),C.YNc(5,Q,2,1,"div",9),C.qZA()()),2&Z){const T=C.oxw();C.xp6(3),C.Q6J("ngForOf",T.contractFunctions),C.xp6(2),C.Q6J("ngIf",""!==T.invokeOutput)}}(0,ft.j)({autoConnect:!0,provider:(0,Se.yl)()});const{ethereum:ie}=window,z={"0.8.21":"soljson-v0.8.21+commit.d9974bed.js","0.8.9":"soljson-v0.8.9+commit.e5eed63a.js","0.7.6":"soljson-v0.7.6+commit.7338295f.js","0.6.12":"soljson-v0.6.12+commit.27d51765.js","0.5.17":"soljson-v0.5.17+commit.d19bba13.js","0.4.26":"soljson-v0.4.26+commit.4563c3fc.js","0.3.6":"soljson-v0.3.6+commit.3fc68da5.js","0.2.2":"soljson-v0.2.2+commit.ef92f566.js","0.1.7":"soljson-v0.1.7+commit.b4e666cc.js"};let ve=(()=>{class Z{constructor(T,I,se){this.keysService=T,this.snackBarHelperService=I,this.changeDetectorRef=se,this.session=!1,this.metamaskAddress="",this.compiledContracts=[],this.deployedContractAddress="",this.contractNames=[],this.commonGweiValue=0,this.contractFunctions=[],this.invokeOutput="",this.selectedCompilerVersion="0.8.21",this.compilerVersions=Object.keys(z),this.compilerErrors=[],this.code="// SPDX-License-Identifier: MIT\npragma solidity ^0.8.14;\n\ncontract HelloWorld {\n    function get()public pure returns (string memory){\n        return 'Hello Contracts';\n    }\n}",this.editorOptions={mode:"text/x-solidity",theme:"dracula",lineNumbers:!0,lineWrapping:!0}}ngOnInit(){this.handleAuth(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}compileAndFetchContracts(T){var I=this;return(0,de.Z)(function*(){try{I.deployedContractAddress="";const se=z[I.selectedCompilerVersion];if(!se)return void console.error("Selected compiler version not found.");const Te={version:`https://binaries.soliditylang.org/bin/${se}`,contractBody:T},Ve=yield Kt(Te);Ve.errors&&Ve.errors.length>0&&!Ve.contracts?(I.compiledContracts=null,console.log(Ve.errors),I.compilerErrors.push(...Ve.errors)):(I.compilerErrors=[],console.log("output",Ve),I.compiledContracts=Ve.contracts.Compiled_Contracts,I.contractNames=Object.keys(I.compiledContracts),I.selectedContractName=I.contractNames[0])}catch(se){console.error("Error compiling contracts:",se)}})()}deploySelectedContract(){var T=this;return(0,de.Z)(function*(){if(T.session)try{const se=T.compiledContracts[T.selectedContractName];if(!se)return void console.error("Selected contract not found.");const Ve=new ge.Q(window.ethereum).getSigner(),Pt=se.abi,Bt=new ke.lV(Pt,se.evm.bytecode.object,Ve),Lt={};T.commonGweiValue>0&&(Lt.value=Ze.parseUnits(T.commonGweiValue.toString(),"gwei"));const He=yield Bt.deploy(Lt);yield He.deployed(),T.deployedContractAddress=He.address,T.contractFunctions=Pt.filter(st=>"function"===st.type).map(st=>{const Ct=st.inputs.length>0?T.getInputHints(st.inputs):"No inputs";return{...st,inputValues:"",outputValue:"",inputHints:Ct}}),console.log(T.contractFunctions)}catch(I){console.error("Error deploying contract:",I)}else T.snackBarHelperService.open("Please connect your web3 wallet first.","errorBar")})()}getInputHints(T){return T.map(I=>`${I.name}: ${I.type}`).join(", ")}parseInputValue(T,I){return"bool"===I?"true"===T.toLowerCase():T}invokeFunction(T){var I=this;return(0,de.Z)(function*(){if(I.session)try{const se=I.compiledContracts[I.selectedContractName],Ve=new ge.Q(window.ethereum).getSigner(),Gt=new ke.CH(I.deployedContractAddress,se.abi,Ve),Pt=""!==T.inputValues.trim()?T.inputValues.split(",").map((He,st)=>{const Ct=T.inputs[st].type;return I.parseInputValue(He.trim(),Ct)}):[],Bt={};I.commonGweiValue>0&&(Bt.value=Ze.parseUnits(I.commonGweiValue.toString(),"gwei"));const Lt=yield Gt.functions[T.name](...Pt,Bt);if(console.log(Lt),T.outputs.length>0&&("view"===T.stateMutability||"pure"===T.stateMutability)){console.log("hello");const He=Lt[0].toString(),st=I.contractFunctions.find(Ct=>Ct.name===T.name);if(st){st.outputValue=He;const Ct=I.contractFunctions.indexOf(T);-1!==Ct&&(I.contractFunctions[Ct]=st)}console.log(T.outputValue)}console.log("Invoked:",Lt)}catch(se){console.error("Error invoking function",se);const Te=I.contractFunctions.find(Ve=>Ve.name===T.name);if(Te){Te.outputValue=se.message;const Ve=I.contractFunctions.indexOf(T);-1!==Ve&&(I.contractFunctions[Ve]=Te)}}else I.snackBarHelperService.open("Please connect your web3 wallet first.","errorBar")})()}handleChainChanged(T){var I=this;return(0,de.Z)(function*(){yield I.handleAuth()})()}handleAuth(){var T=this;return(0,de.Z)(function*(){var I;try{const{isConnected:se}=(0,at.D0)();if(se&&(yield(0,at.zP)()),!window.ethereum)return void T.snackBarHelperService.open("Please install a Web3 Wallet like Metamask to proceed.","errorBar");const Te=yield(0,at.$j)({connector:new ft.I});T.metamaskAddress=Te.account,T.userData={address:Te.account,chain:Te.chain.id,network:"evm"},yield ie.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const Ve="11155111",Gt=String(null===(I=Te.chain)||void 0===I?void 0:I.id);Te&&Gt!==Ve?(T.session=!1,T.snackBarHelperService.open("Please connect to the Sepolia Network","errorBar")):(console.log("Should show ethereum chain now"),T.session=!0),console.log("session",T.session),T.changeDetectorRef.detectChanges()}catch{console.log("An error occured")}})()}}return Z.\u0275fac=function(T){return new(T||Z)(C.Y36(ze.t),C.Y36(gt.H),C.Y36(C.sBO))},Z.\u0275cmp=C.Xpm({type:Z,selectors:[["app-web3-sandbox"]],decls:31,vars:10,consts:[[1,"sandbox-container","mat-elevation-z6"],[1,"sandbox-container_body"],[1,"sandbox-container_body_left"],[1,"editor-title"],[3,"ngModel","options","ngModelChange"],[1,"sandbox-container_body_right"],[1,"playground-wallet"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["appearance","outline","color","accent"],["matNativeControl","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-raised-button","",3,"click"],["class","error-container mat-elevation-z6",4,"ngIf"],["class","deployedaddresstext",4,"ngIf"],["class","invokecontainer mat-elevation-z6",4,"ngIf"],["src","assets/public/images/padding/11px.png"],[3,"value"],[1,"error-container","mat-elevation-z6"],["class","error",4,"ngFor","ngForOf"],[1,"error"],[1,"contracts-title"],["appearance","outline","color","accent",2,"width","45%","margin-right","10%"],["matInput","","type","number","placeholder","GWEI value for sending ETH",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button",3,"click"],[1,"deployedaddresstext"],[1,"invokecontainer","mat-elevation-z6"],[4,"ngFor","ngForOf"],[1,"output-container","mat-elevation-z6"],[1,"function-container"],[4,"ngIf","ngIfElse"],["noInputs",""],[1,"functionwtext-container"],["matAutosizeMinRows","4","matAutosizeMaxRows","4","matTextareaAutosize","","matInput","",3,"placeholder","ngModel","ngModelChange"],["class","invoke-output",4,"ngIf"],[1,"invoke-output"]],template:function(T,I){1&T&&(C.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C._uU(4,"Contract Editor"),C.qZA(),C.TgZ(5,"ngx-codemirror",4),C.NdJ("ngModelChange",function(Te){return I.code=Te}),C.qZA()(),C.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"button",8),C.NdJ("click",function(){return I.handleAuth()}),C.YNc(10,oe,2,0,"span",9),C.YNc(11,y,2,2,"span",9),C.qZA()()(),C.TgZ(12,"h2"),C._uU(13,"Web3 Code Sandbox"),C.qZA(),C.TgZ(14,"ul")(15,"li"),C._uU(16,"Easily compile/deploy and invoke smart contracts from below."),C.qZA(),C.TgZ(17,"li"),C._uU(18," You can pass ETH to the contract both while invoking/deploying by entering the GWEI Value post compilation "),C.qZA()(),C.TgZ(19,"mat-form-field",10)(20,"mat-label"),C._uU(21,"Select Compiler Version"),C.qZA(),C.TgZ(22,"select",11),C.NdJ("ngModelChange",function(Te){return I.selectedCompilerVersion=Te}),C.YNc(23,K,2,2,"option",12),C.qZA()(),C.TgZ(24,"button",13),C.NdJ("click",function(){return I.compileAndFetchContracts(I.code)}),C._uU(25," Compile Contract "),C.qZA(),C.YNc(26,le,5,1,"div",14),C.YNc(27,tt,12,3,"div",9),C.YNc(28,Qe,2,1,"div",15),C.YNc(29,F,6,2,"div",16),C.qZA()(),C._UZ(30,"img",17),C.qZA()),2&T&&(C.xp6(5),C.Q6J("ngModel",I.code)("options",I.editorOptions),C.xp6(5),C.Q6J("ngIf",!I.session),C.xp6(1),C.Q6J("ngIf",I.session),C.xp6(11),C.Q6J("ngModel",I.selectedCompilerVersion),C.xp6(1),C.Q6J("ngForOf",I.compilerVersions),C.xp6(3),C.Q6J("ngIf",I.compilerErrors.length>0),C.xp6(1),C.Q6J("ngIf",I.compiledContracts),C.xp6(1),C.Q6J("ngIf",I.deployedContractAddress),C.xp6(1),C.Q6J("ngIf",I.deployedContractAddress))},dependencies:[fe,J.sg,J.O5,Ke.YN,Ke.Kr,Ke.Fj,Ke.wV,Ke.EJ,Ke.JJ,Ke.On,B.lW,M.KE,M.hX,Y.Nt],styles:[".playground-wallet[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:18px}.sandbox-container[_ngcontent-%COMP%]{margin:32px}.sandbox-container_body[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:32px;padding:40px}.sandbox-container_body_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}.sandbox-container_body_right[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-direction:column;width:30%}.deployedaddresstext[_ngcontent-%COMP%]{color:#2d972d;font-weight:600;margin:10px 0;word-break:break-all}.invokecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px;max-height:200px;overflow:scroll;padding:16px;width:100%}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:16px 0;max-height:300px;overflow:scroll;padding:16px}.error-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.editor-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:16px;padding:0 8px;width:100%}.function-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:8px}.functionwtext-container[_ngcontent-%COMP%]{align-items:flex-start;display:flex;justify-content:space-between;margin-top:8px}.output-container[_ngcontent-%COMP%]{display:flex;width:100%;word-break:break-all}.invoke-btncontainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoke-output[_ngcontent-%COMP%]{font-size:12px;padding:4px}h2[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{padding-left:16px}.contracts-title[_ngcontent-%COMP%]{font-weight:500;margin-top:16px}"]}),Z})();Ce(4166),Ce(521),Ce(5140);var be=Ce(8184);const wt=[{path:"",component:ve}];let It=(()=>{class Z{constructor(T,I){this.configurationService=T,this.overlayContainer=I,T.getApplicationConfiguration().subscribe(se=>{I.getContainerElement().classList.add(se.application.theme+"-theme")})}}return Z.\u0275fac=function(T){return new(T||Z)(C.LFG(he.e),C.LFG(be.Xj))},Z.\u0275mod=C.oAB({type:Z}),Z.\u0275inj=C.cJS({imports:[Xe,J.ez,G.Bz.forChild(wt),Ke.u5,Ke.UX,B.ot,ne.QW,Y.c,Ae.ZX]}),Z})()},5140:(ai,vt,Ce)=>{var J,Ke;!function G(he,ne,Y){function B(ze,Se){if(!ne[ze]){if(!he[ze]){if(Ae)return Ae(ze,!0);var ke=new Error("Cannot find module '"+ze+"'");throw ke.code="MODULE_NOT_FOUND",ke}var Ze=ne[ze]={exports:{}};he[ze][0].call(Ze.exports,function(ft){return B(he[ze][1][ft]||ft)},Ze,Ze.exports,G,he,ne,Y)}return ne[ze].exports}for(var Ae=void 0,de=0;de<Y.length;de++)B(Y[de]);return B}({1:[function(G,he,ne){window.CodeMirror=G("codemirror"),G("./index")},{"./index":2,codemirror:3}],2:[function(G,he,ne){"use strict";const Y=G("codemirror");Y.defineMode("solidity",function(B){let oe,Ae=B.indentUnit,de={pragma:!0,solidity:!0,import:!0,as:!0,from:!0,contract:!0,constructor:!0,is:!0,function:!0,modifier:!0,pure:!0,view:!0,payable:!0,constant:!0,anonymous:!0,indexed:!0,returns:!0,return:!0,event:!0,struct:!0,mapping:!0,interface:!0,using:!0,library:!0,storage:!0,memory:!0,calldata:!0,public:!0,private:!0,external:!0,internal:!0,emit:!0,assembly:!0,abstract:!0,after:!0,catch:!0,final:!0,in:!0,inline:!0,let:!0,match:!0,null:!0,of:!0,relocatable:!0,static:!0,try:!0,typeof:!0,var:!0},ze={pragma:!0,returns:!0,address:!0,contract:!0,function:!0,struct:!0},Se={wei:!0,szabo:!0,finney:!0,ether:!0},ge={seconds:!0,minutes:!0,hours:!0,days:!0,weeks:!0},ke={block:["coinbase","difficulty","gaslimit","number","timestamp"],msg:["data","sender","sig","value"],tx:["gasprice","origin"]},Ze={now:!0,gasleft:!0,blockhash:!0},ft={assert:!0,require:!0,revert:!0,throw:!0},at={addmod:!0,mulmod:!0,keccak256:!0,sha256:!0,ripemd160:!0,ecrecover:!0},pe={this:!0,selfdestruct:!0,super:!0},Ye={type:!0},qt={},Kt={if:!0,else:!0,while:!0,do:!0,for:!0,break:!0,continue:!0,switch:!0,case:!0,default:!0},et={bool:!0,byte:!0,string:!0,enum:!0,address:!0},C={alias:!0,apply:!0,auto:!0,copyof:!0,define:!0,immutable:!0,implements:!0,macro:!0,mutable:!0,override:!0,partial:!0,promise:!0,reference:!0,sealed:!0,sizeof:!0,supports:!0,typedef:!0,unchecked:!0},gt={abi:["decode","encodePacked","encodeWithSelector","encodeWithSignature","encode"]},Pe=["transfer","send","balance","call","delegatecall","staticcall"],kt=["title","author","notice","dev","param","return"],fe={delete:!0,new:!0,true:!0,false:!0},Xe=/[+\-*&^%:=<>!|\/~]/,M=/[-]/;function y(F,A){let ie=F.next();if('"'==ie||"'"==ie||"`"==ie)return A.tokenize=function K(F){return function(A,ie){let ve,z=!1,Le=!1;for(;null!=(ve=A.next());){if(ve==F&&!z){Le=!0;break}z=!z&&"`"!=F&&"\\"==ve}return(Le||!(z||"`"==F))&&(ie.tokenize=y),"string"}}(ie),A.tokenize(F,A);if(function le(F,A){if("pragma solidity"==A.lastToken)return A.lastToken=null,!A.startOfLine&&(F.match(/[\^{0}][0-9\.]+/)||F.match(/[\>\=]+?[\s]*[0-9\.]+[\s]*[\<]?[\s]*[0-9\.]+/))}(F,A))return"version";if("."==ie&&Pe.some(function(Le){return F.match(`${Le}`)}))return"addressFunction";if(V(ie,F))return"number";if(/[\[\]{}\(\),;\:\.]/.test(ie))return function $(F,A){return","==F&&"functionName(variable"==A.para&&(A.para="functionName("),null!=A.para&&A.para.startsWith("functionName")&&(")"==F?A.para.endsWith("(")&&(A.para=A.para.substr(0,A.para.length-1),"functionName"==A.para&&(A.grammar="")):"("==F&&(A.para+=F)),"("==F&&"functionName"==A.lastToken?A.lastToken+=F:")"==F&&"functionName("==A.lastToken?A.lastToken=null:"("==F&&"returns"==A.lastToken?A.lastToken+=F:")"==F&&("returns("==A.lastToken||"returns(variable"==A.lastToken)&&(A.lastToken=null),"("==F&&"address"==A.lastToken&&(A.lastToken+=F),oe=F,null}(ie,A);if("/"==ie){if(F.eat("*"))return A.tokenize=P,P(F,A);if(F.match(/\/{2}/)){for(;ie=F.next();)if("@"==ie){F.backUp(1),A.grammar="doc";break}return"doc"}if(F.eat("/"))return F.skipToEnd(),"comment"}if(M.test(ie))return V(F.peek(),F)?"number":"operator";if(Xe.test(ie))return F.eatWhile(Xe),"operator";F.eatWhile(/[\w\$_\xa1-\uffff]/);let z=F.current();if("doc"==A.grammar)return kt.some(function(Le){return z==`@${Le}`})?"docReserve":"doc";if("solidity"===z&&"pragma"==A.lastToken&&(A.lastToken=A.lastToken+" "+z),de.propertyIsEnumerable(z))return("case"==z||"default"==z)&&(oe="case"),ze.propertyIsEnumerable(z)&&(A.lastToken=z),"keyword";if(Se.propertyIsEnumerable(z))return"etherUnit";if(pe.propertyIsEnumerable(z))return"contractRelated";if(Kt.propertyIsEnumerable(z)||Ye.propertyIsEnumerable(z)||C.propertyIsEnumerable(z))return"keyword";if(et.propertyIsEnumerable(z)||ge.propertyIsEnumerable(z)||function tt(F){if(F.match(/^[u]?int/)){if(F.indexOf("t")+1==F.length)return!0;let A=F.substr(F.indexOf("t")+1,F.length);return A%8==0&&A<=256}}(z)||function Qe(F){if(F.match(/^bytes/))return F.indexOf("s")+1==F.length||F.substr(F.indexOf("s")+1,F.length)<=32}(z)||function S(F){if(F.match(/^[u]?fixed([0-9]+x[0-9]+)?/)){if(F.indexOf("d")+1==F.length)return!0;let A=F.substr(F.indexOf("d")+1,F.length).split("x");return A[0]%8==0&&A[0]<=256&&A[1]<=80}}(z))return A.lastToken=A.lastToken+"variable","keyword";if(fe.propertyIsEnumerable(z))return"atom";if(ft.propertyIsEnumerable(z))return"errorHandling";if(at.propertyIsEnumerable(z))return"mathematicalAndCryptographic";if(Ze.propertyIsEnumerable(z)||ke.hasOwnProperty(z)&&ke[z].some(function(Le){return F.match(`.${Le}`)}))return"variable-2";if(gt.hasOwnProperty(z)&&gt[z].some(function(Le){return F.match(`.${Le}`)}))return"abi";let ve=function m(F,A){if(F.match(/^hex/)&&'"'==A.peek()){let z,ie=!1,ve="",Le="";for(;z=A.next();){if(Le+=z,'"'==z&&ie){if(ve=Le.substring(1,Le.length-1),ve.match(/^[0-9a-fA-F]+$/))return"number";A.backUp(Le.length);break}ie=ie||'"'==z}}}(z,F);return ve??("functionName("!=A.lastToken&&"returns("!=A.lastToken||!qt.propertyIsEnumerable(z)?"function"==A.lastToken?(A.lastToken="functionName",null==A.para&&(A.grammar="function",A.para=""),A.para+="functionName","functionName"):"functionName(variable"==A.lastToken?(A.lastToken="functionName(","parameterValue"):"returns(variable"==A.lastToken?(A.lastToken="returns(","parameterValue"):("address"==A.lastToken&&"payable"==z&&(A.lastToken="address payable"),("contract"==A.lastToken||"struct"==A.lastToken)&&(qt[z]=!0,A.lastToken=null),"function"==A.grammar?"parameterValue":"variable"):(A.lastToken+="variable","variable"))}function P(F,A){let z,ie=!1;for(;z=F.next();){if("/"==z&&ie){A.tokenize=y;break}ie="*"==z}return"comment"}function V(F,A){if(/[\d\.]/.test(F))return"."==F?A.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==F?A.match(/^[xX][0-9a-fA-F]+/)||A.match(/^0[0-7]+/):A.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),!0}function me(F,A,ie,z,ve){this.indented=F,this.column=A,this.type=ie,this.align=z,this.prev=ve}function U(F,A,ie){return F.context=new me(F.indented,A,ie,null,F.context)}return{startState:function(F){return{tokenize:null,context:new me((F||0)-Ae,0,"top",!1),indented:0,startOfLine:!0}},token:function(F,A){let ie=A.context;if(F.sol()&&(null==ie.align&&(ie.align=!1),A.indented=F.indentation(),A.startOfLine=!0,"case"==ie.type&&(ie.type="}"),"doc"==A.grammar&&(A.grammar=null)),F.eatSpace())return null;oe=null;let z=(A.tokenize||y)(F,A);return"comment"==z||(null==ie.align&&(ie.align=!0),"{"==oe?U(A,F.column(),"}"):"["==oe?U(A,F.column(),"]"):"("==oe?U(A,F.column(),")"):"case"==oe?ie.type="case":("}"==oe&&"}"==ie.type||oe==ie.type)&&function Q(F){if(!F.context.prev)return;let A=F.context.type;(")"==A||"]"==A||"}"==A)&&(F.indented=F.context.indented),F.context=F.context.prev}(A),A.startOfLine=!1),z},indent:function(F,A){if(F.tokenize!=y&&null!=F.tokenize)return Y.Pass;let ie=F.context,z=A&&A.charAt(0);if("case"==ie.type&&/^(?:case|default)\b/.test(A))return F.context.type="}",ie.indented;let ve=z==ie.type;return ie.align?ie.column+(ve?0:1):ie.indented+(ve?0:Ae)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),Y.defineMIME("text/x-solidity","solidity")},{codemirror:3}],3:[function(G,he,ne){var B;B=function(){"use strict";var Y=navigator.userAgent,B=navigator.platform,Ae=/gecko\/\d/i.test(Y),de=/MSIE \d/.test(Y),ze=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Y),Se=/Edge\/(\d+)/.exec(Y),ge=de||ze||Se,ke=ge&&(de?document.documentMode||6:+(Se||ze)[1]),Ze=!Se&&/WebKit\//.test(Y),ft=Ze&&/Qt\/\d+\.\d+/.test(Y),at=!Se&&/Chrome\//.test(Y),pe=/Opera\//.test(Y),Ye=/Apple Computer/.test(navigator.vendor),qt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Y),Kt=/PhantomJS/.test(Y),et=Ye&&(/Mobile\/\w+/.test(Y)||navigator.maxTouchPoints>2),C=/Android/.test(Y),gt=et||C||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Y),Pe=et||/Mac/.test(B),kt=/\bCrOS\b/.test(Y),fe=/win/i.test(B),Xe=pe&&Y.match(/Version\/(\d*\.\d*)/);Xe&&(Xe=Number(Xe[1])),Xe&&Xe>=15&&(pe=!1,Ze=!0);var M=Pe&&(ft||pe&&(null==Xe||Xe<12.11)),oe=Ae||ge&&ke>=9;function y(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Qe,K=function(e,t){var i=e.className,o=y(t).exec(i);if(o){var l=i.slice(o.index+o[0].length);e.className=i.slice(0,o.index)+(l?o[1]+l:"")}};function P(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function le(e,t){return P(e).appendChild(t)}function V(e,t,i,o){var l=document.createElement(e);if(i&&(l.className=i),o&&(l.style.cssText=o),"string"==typeof t)l.appendChild(document.createTextNode(t));else if(t)for(var u=0;u<t.length;++u)l.appendChild(t[u]);return l}function tt(e,t,i,o){var l=V(e,t,i,o);return l.setAttribute("role","presentation"),l}function S(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function m(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function $(e,t){var i=e.className;y(t).test(i)||(e.className+=(i?" ":"")+t)}function me(e,t){for(var i=e.split(" "),o=0;o<i.length;o++)i[o]&&!y(i[o]).test(t)&&(t+=" "+i[o]);return t}Qe=document.createRange?function(e,t,i,o){var l=document.createRange();return l.setEnd(o||e,i),l.setStart(e,t),l}:function(e,t,i){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",i),o.moveStart("character",t),o};var U=function(e){e.select()};function Q(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,i){for(var o in t||(t={}),e)e.hasOwnProperty(o)&&(!1!==i||!t.hasOwnProperty(o))&&(t[o]=e[o]);return t}function A(e,t,i,o,l){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var u=o||0,f=l||0;;){var h=e.indexOf("\t",u);if(h<0||h>=t)return f+(t-u);f+=h-u,f+=i-f%i,u=h+1}}et?U=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ge&&(U=function(e){try{e.select()}catch{}});var ie=function(){this.id=null,this.f=null,this.time=0,this.handler=Q(this.onTimeout,this)};function z(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}ie.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},ie.prototype.set=function(e,t){this.f=t;var i=+new Date+e;(!this.id||i<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=i)};var ve=50,Le={toString:function(){return"CodeMirror.Pass"}},bt={scroll:!1},er={origin:"*mouse"},be={origin:"+move"};function wt(e,t,i){for(var o=0,l=0;;){var u=e.indexOf("\t",o);-1==u&&(u=e.length);var f=u-o;if(u==e.length||l+f>=t)return o+Math.min(f,t-l);if(l+=u-o,o=u+1,(l+=i-l%i)>=t)return o}}var It=[""];function Z(e){for(;It.length<=e;)It.push(ee(It)+" ");return It[e]}function ee(e){return e[e.length-1]}function T(e,t){for(var i=[],o=0;o<e.length;o++)i[o]=t(e[o],o);return i}function se(){}function Te(e,t){var i;return Object.create?i=Object.create(e):(se.prototype=e,i=new se),t&&F(t,i),i}var Ve=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Gt(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Ve.test(e))}function Pt(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Gt(e))||t.test(e):Gt(e)}function Bt(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Lt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function He(e){return e.charCodeAt(0)>=768&&Lt.test(e)}function st(e,t,i){for(;(i<0?t>0:t<e.length)&&He(e.charAt(t));)t+=i;return t}function Ct(e,t,i){for(var o=t>i?-1:1;;){if(t==i)return t;var l=(t+i)/2,u=o<0?Math.ceil(l):Math.floor(l);if(u==t)return e(u)?t:i;e(u)?i=u:t=u+o}}var kn=null;function ce(e,t,i){var o;kn=null;for(var l=0;l<e.length;++l){var u=e[l];if(u.from<t&&u.to>t)return l;u.to==t&&(u.from!=u.to&&"before"==i?o=l:kn=l),u.from==t&&(u.from!=u.to&&"before"!=i?o=l:kn=l)}return o??kn}var Ki=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function i(d){return d<=247?e.charAt(d):1424<=d&&d<=1524?"R":1536<=d&&d<=1785?t.charAt(d-1536):1774<=d&&d<=2220?"r":8192<=d&&d<=8203?"w":8204==d?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,u=/[LRr]/,f=/[Lb1n]/,h=/[1n]/;function c(d,v,g){this.level=d,this.from=v,this.to=g}return function(d,v){var g="ltr"==v?"L":"R";if(0==d.length||"ltr"==v&&!o.test(d))return!1;for(var w=d.length,b=[],k=0;k<w;++k)b.push(i(d.charCodeAt(k)));for(var L=0,D=g;L<w;++L){var O=b[L];"m"==O?b[L]=D:D=O}for(var E=0,H=g;E<w;++E){var _=b[E];"1"==_&&"r"==H?b[E]="n":u.test(_)&&(H=_,"r"==_&&(b[E]="R"))}for(var re=1,j=b[0];re<w-1;++re){var xe=b[re];"+"==xe&&"1"==j&&"1"==b[re+1]?b[re]="1":","==xe&&j==b[re+1]&&("1"==j||"n"==j)&&(b[re]=j),j=xe}for(var Me=0;Me<w;++Me){var Ne=b[Me];if(","==Ne)b[Me]="N";else if("%"==Ne){var Oe=void 0;for(Oe=Me+1;Oe<w&&"%"==b[Oe];++Oe);for(var Je=Me&&"!"==b[Me-1]||Oe<w&&"1"==b[Oe]?"1":"N",Be=Me;Be<Oe;++Be)b[Be]=Je;Me=Oe-1}}for(var De=0,We=g;De<w;++De){var qe=b[De];"L"==We&&"1"==qe?b[De]="L":u.test(qe)&&(We=qe)}for(var ct=0;ct<w;++ct)if(l.test(b[ct])){var ot=void 0;for(ot=ct+1;ot<w&&l.test(b[ot]);++ot);for(var Fe="L"==(ct?b[ct-1]:g),xt=Fe==("L"==(ot<w?b[ot]:g))?Fe?"L":"R":g,tn=ct;tn<ot;++tn)b[tn]=xt;ct=ot-1}for(var $t,dt=[],pt=0;pt<w;)if(f.test(b[pt])){var Ut=pt;for(++pt;pt<w&&f.test(b[pt]);++pt);dt.push(new c(0,Ut,pt))}else{var fr=pt,Sn=dt.length,Io="rtl"==v?1:0;for(++pt;pt<w&&"L"!=b[pt];++pt);for(var hr=fr;hr<pt;)if(h.test(b[hr])){fr<hr&&(dt.splice(Sn,0,new c(1,fr,hr)),Sn+=Io);var Tl=hr;for(++hr;hr<pt&&h.test(b[hr]);++hr);dt.splice(Sn,0,new c(2,Tl,hr)),Sn+=Io,fr=hr}else++hr;fr<pt&&dt.splice(Sn,0,new c(1,fr,pt))}return"ltr"==v&&(1==dt[0].level&&($t=d.match(/^\s+/))&&(dt[0].from=$t[0].length,dt.unshift(new c(0,0,$t[0].length))),1==ee(dt).level&&($t=d.match(/\s+$/))&&(ee(dt).to-=$t[0].length,dt.push(new c(0,w-$t[0].length,w)))),"rtl"==v?dt.reverse():dt}}();function we(e,t){var i=e.order;return null==i&&(i=e.order=Ki(e.text,t)),i}var mt=[],te=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var o=e._handlers||(e._handlers={});o[t]=(o[t]||mt).concat(i)}};function Hr(e,t){return e._handlers&&e._handlers[t]||mt}function rt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var o=e._handlers,l=o&&o[t];if(l){var u=z(l,i);u>-1&&(o[t]=l.slice(0,u).concat(l.slice(u+1)))}}}function nt(e,t){var i=Hr(e,t);if(i.length)for(var o=Array.prototype.slice.call(arguments,2),l=0;l<i.length;++l)i[l].apply(null,o)}function Ee(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),nt(e,i||t.type,e,t),rr(t)||t.codemirrorIgnore}function cr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),o=0;o<t.length;++o)-1==z(i,t[o])&&i.push(t[o])}function Yt(e,t){return Hr(e,t).length>0}function tr(e){e.prototype.on=function(t,i){te(this,t,i)},e.prototype.off=function(t,i){rt(this,t,i)}}function Mt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function _n(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function rr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ir(e){Mt(e),_n(e)}function Zi(e){return e.target||e.srcElement}function dr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Pe&&e.ctrlKey&&1==t&&(t=3),t}var Ln,Yi,Ml=function(){if(ge&&ke<9)return!1;var e=V("div");return"draggable"in e||"dragDrop"in e}();function Po(e){if(null==Ln){var t=V("span","\u200b");le(e,V("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ln=t.offsetWidth<=1&&t.offsetHeight>2&&!(ge&&ke<8))}var i=Ln?V("span","\u200b"):V("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Pr(e){if(null!=Yi)return Yi;var t=le(e,document.createTextNode("A\u062eA")),i=Qe(t,0,1).getBoundingClientRect(),o=Qe(t,1,2).getBoundingClientRect();return P(e),!(!i||i.left==i.right)&&(Yi=o.right-i.right<3)}var e,yr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],o=e.length;t<=o;){var l=e.indexOf("\n",t);-1==l&&(l=e.length);var u=e.slice(t,"\r"==e.charAt(l-1)?l-1:l),f=u.indexOf("\r");-1!=f?(i.push(u.slice(0,f)),t+=f+1):(i.push(u),t=l+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Br=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},rn="oncopy"in(e=V("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),Mr=null,nn={},pr={};function Xt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),nn[e]=t}function xr(e){if("string"==typeof e&&pr.hasOwnProperty(e))e=pr[e];else if(e&&"string"==typeof e.name&&pr.hasOwnProperty(e.name)){var t=pr[e.name];"string"==typeof t&&(t={name:t}),(e=Te(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return xr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return xr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Tn(e,t){t=xr(t);var i=nn[t.name];if(!i)return Tn(e,"text/plain");var o=i(e,t);if(on.hasOwnProperty(t.name)){var l=on[t.name];for(var u in l)l.hasOwnProperty(u)&&(o.hasOwnProperty(u)&&(o["_"+u]=o[u]),o[u]=l[u])}if(o.name=t.name,t.helperType&&(o.helperType=t.helperType),t.modeProps)for(var f in t.modeProps)o[f]=t.modeProps[f];return o}var on={};function ut(e,t){F(t,on.hasOwnProperty(e)?on[e]:on[e]={})}function ae(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var o in t){var l=t[o];l instanceof Array&&(l=l.concat([])),i[o]=l}return i}function Dr(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Mn(e,t,i){return!e.startState||e.startState(t,i)}var Ge=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};function q(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var o=0;;++o){var l=i.children[o],u=l.chunkSize();if(t<u){i=l;break}t-=u}return i.lines[t]}function nr(e,t,i){var o=[],l=t.line;return e.iter(t.line,i.line+1,function(u){var f=u.text;l==i.line&&(f=f.slice(0,i.ch)),l==t.line&&(f=f.slice(t.ch)),o.push(f),++l}),o}function ln(e,t,i){var o=[];return e.iter(t,i,function(l){o.push(l.text)}),o}function ir(e,t){var i=t-e.height;if(i)for(var o=e;o;o=o.parent)o.height+=i}function p(e){if(null==e.parent)return null;for(var t=e.parent,i=z(t.lines,e),o=t.parent;o;t=o,o=o.parent)for(var l=0;o.children[l]!=t;++l)i+=o.children[l].chunkSize();return i+t.first}function x(e,t){var i=e.first;e:do{for(var o=0;o<e.children.length;++o){var l=e.children[o],u=l.height;if(t<u){e=l;continue e}t-=u,i+=l.chunkSize()}return i}while(!e.lines);for(var f=0;f<e.lines.length;++f){var c=e.lines[f].height;if(t<c)break;t-=c}return i+f}function W(e,t){return t>=e.first&&t<e.first+e.size}function R(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function N(e,t,i){if(void 0===i&&(i=null),!(this instanceof N))return new N(e,t,i);this.line=e,this.ch=t,this.sticky=i}function X(e,t){return e.line-t.line||e.ch-t.ch}function Re(e,t){return e.sticky==t.sticky&&0==X(e,t)}function ue(e){return N(e.line,e.ch)}function or(e,t){return X(e,t)<0?t:e}function Gn(e,t){return X(e,t)<0?e:t}function Xi(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ye(e,t){if(t.line<e.first)return N(e.first,0);var i=e.first+e.size-1;return t.line>i?N(i,q(e,i).text.length):function Ta(e,t){var i=e.ch;return null==i||i>t?N(e.line,t):i<0?N(e.line,0):e}(t,q(e,t.line).text.length)}function Al(e,t){for(var i=[],o=0;o<t.length;o++)i[o]=ye(e,t[o]);return i}Ge.prototype.eol=function(){return this.pos>=this.string.length},Ge.prototype.sol=function(){return this.pos==this.lineStart},Ge.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ge.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ge.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ge.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ge.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ge.prototype.skipToEnd=function(){this.pos=this.string.length},Ge.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ge.prototype.backUp=function(e){this.pos-=e},Ge.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=A(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.indentation=function(){return A(this.string,null,this.tabSize)-(this.lineStart?A(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.match=function(e,t,i){if("string"!=typeof e){var u=this.string.slice(this.pos).match(e);return u&&u.index>0?null:(u&&!1!==t&&(this.pos+=u[0].length),u)}var o=function(f){return i?f.toLowerCase():f};if(o(this.string.substr(this.pos,e.length))==o(e))return!1!==t&&(this.pos+=e.length),!0},Ge.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ge.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ge.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ge.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Dn=function(e,t){this.state=e,this.lookAhead=t},br=function(e,t,i,o){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};function Nl(e,t,i,o){var l=[e.state.modeGen],u={};zr(e,t.text,e.doc.mode,i,function(d,v){return l.push(d,v)},u,o);for(var f=i.state,h=function(d){i.baseTokens=l;var v=e.state.overlays[d],g=1,w=0;i.state=!0,zr(e,t.text,v.mode,i,function(b,k){for(var L=g;w<b;){var D=l[g];D>b&&l.splice(g,1,b,l[g+1],D),g+=2,w=Math.min(b,D)}if(k)if(v.opaque)l.splice(L,g-L,b,"overlay "+k),g=L+2;else for(;L<g;L+=2){var O=l[L+1];l[L+1]=(O?O+" ":"")+"overlay "+k}},u),i.state=f,i.baseTokens=null,i.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)h(c);return{styles:l,classes:u.bgClass||u.textClass?u:null}}function Bo(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var o=si(e,p(t)),l=t.text.length>e.options.maxHighlightLength&&ae(e.doc.mode,o.state),u=Nl(e,t,o);l&&(o.state=l),t.stateAfter=o.save(!l),t.styles=u.styles,u.classes?t.styleClasses=u.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function si(e,t,i){var o=e.doc,l=e.display;if(!o.mode.startState)return new br(o,!0,t);var u=function Ms(e,t,i){for(var o,l,u=e.doc,f=i?-1:t-(e.doc.mode.innerMode?1e3:100),h=t;h>f;--h){if(h<=u.first)return u.first;var c=q(u,h-1),d=c.stateAfter;if(d&&(!i||h+(d instanceof Dn?d.lookAhead:0)<=u.modeFrontier))return h;var v=A(c.text,null,e.options.tabSize);(null==l||o>v)&&(l=h-1,o=v)}return l}(e,t,i),f=u>o.first&&q(o,u-1).stateAfter,h=f?br.fromSaved(o,f,u):new br(o,Mn(o.mode),u);return o.iter(u,t,function(c){zo(e,c.text,h);var d=h.line;c.stateAfter=d==t-1||d%5==0||d>=l.viewFrom&&d<l.viewTo?h.save():null,h.nextLine()}),i&&(o.modeFrontier=h.line),h}function zo(e,t,i,o){var l=e.doc.mode,u=new Ge(t,e.options.tabSize,i);for(u.start=u.pos=o||0,""==t&&Fl(l,i.state);!u.eol();)Ro(l,u,i.state),u.start=u.pos}function Fl(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=Dr(e,t);if(i.mode.blankLine)return i.mode.blankLine(i.state)}}function Ro(e,t,i,o){for(var l=0;l<10;l++){o&&(o[0]=Dr(e,i).mode);var u=e.token(t,i);if(t.pos>t.start)return u}throw new Error("Mode "+e.name+" failed to advance stream.")}br.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},br.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},br.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},br.fromSaved=function(e,t,i){return t instanceof Dn?new br(e,ae(e.mode,t.state),i,t.lookAhead):new br(e,ae(e.mode,t),i)},br.prototype.save=function(e){var t=!1!==e?ae(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Dn(t,this.maxLookAhead):t};var Ma=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Da(e,t,i,o){var f,v,l=e.doc,u=l.mode,h=q(l,(t=ye(l,t)).line),c=si(e,t.line,i),d=new Ge(h.text,e.options.tabSize,c);for(o&&(v=[]);(o||d.pos<t.ch)&&!d.eol();)d.start=d.pos,f=Ro(u,d,c.state),o&&v.push(new Ma(d,f,ae(l.mode,c.state)));return o?v:new Ma(d,f,c.state)}function Ol(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var o=i[1]?"bgClass":"textClass";null==t[o]?t[o]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[o])||(t[o]+=" "+i[2])}return e}function zr(e,t,i,o,l,u,f){var h=i.flattenSpans;null==h&&(h=e.options.flattenSpans);var g,c=0,d=null,v=new Ge(t,e.options.tabSize,o),w=e.options.addModeClass&&[null];for(""==t&&Ol(Fl(i,o.state),u);!v.eol();){if(v.pos>e.options.maxHighlightLength?(h=!1,f&&zo(e,t,o,v.pos),v.pos=t.length,g=null):g=Ol(Ro(i,v,o.state,w),u),w){var b=w[0].name;b&&(g="m-"+(g?b+" "+g:b))}if(!h||d!=g){for(;c<v.start;)l(c=Math.min(v.start,c+5e3),d);d=g}v.start=v.pos}for(;c<v.pos;){var k=Math.min(v.pos,c+5e3);l(k,d),c=k}}var ji=!1,vr=!1;function _o(e,t,i){this.marker=e,this.from=t,this.to=i}function Ji(e,t){if(e)for(var i=0;i<e.length;++i){var o=e[i];if(o.marker==t)return o}}function El(e,t){for(var i,o=0;o<e.length;++o)e[o]!=t&&(i||(i=[])).push(e[o]);return i}function Uo(e,t){if(t.full)return null;var i=W(e,t.from.line)&&q(e,t.from.line).markedSpans,o=W(e,t.to.line)&&q(e,t.to.line).markedSpans;if(!i&&!o)return null;var l=t.from.ch,u=t.to.ch,f=0==X(t.from,t.to),h=function Fs(e,t,i){var o;if(e)for(var l=0;l<e.length;++l){var u=e[l],f=u.marker;null!=u.from&&!(f.inclusiveLeft?u.from<=t:u.from<t)&&(u.from!=t||"bookmark"!=f.type||i&&u.marker.insertLeft)||(o||(o=[])).push(new _o(f,u.from,null==u.to||(f.inclusiveRight?u.to>=t:u.to>t)?null:u.to))}return o}(i,l,f),c=function Na(e,t,i){var o;if(e)for(var l=0;l<e.length;++l){var u=e[l],f=u.marker;(null==u.to||(f.inclusiveRight?u.to>=t:u.to>t)||u.from==t&&"bookmark"==f.type&&(!i||u.marker.insertLeft))&&(o||(o=[])).push(new _o(f,null==u.from||(f.inclusiveLeft?u.from<=t:u.from<t)?null:u.from-t,null==u.to?null:u.to-t))}return o}(o,u,f),d=1==t.text.length,v=ee(t.text).length+(d?l:0);if(h)for(var g=0;g<h.length;++g){var w=h[g];if(null==w.to){var b=Ji(c,w.marker);b?d&&(w.to=null==b.to?null:b.to+v):w.to=l}}if(c)for(var k=0;k<c.length;++k){var L=c[k];null!=L.to&&(L.to+=v),null==L.from?Ji(h,L.marker)||(L.from=v,d&&(h||(h=[])).push(L)):(L.from+=v,d&&(h||(h=[])).push(L))}h&&(h=Qi(h)),c&&c!=h&&(c=Qi(c));var O=[h];if(!d){var H,E=t.text.length-2;if(E>0&&h)for(var _=0;_<h.length;++_)null==h[_].to&&(H||(H=[])).push(new _o(h[_].marker,null,null));for(var re=0;re<E;++re)O.push(H);O.push(c)}return O}function Qi(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function qo(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Wl(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Vi(e){return e.inclusiveLeft?-1:0}function qn(e){return e.inclusiveRight?1:0}function Hl(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var o=e.find(),l=t.find(),u=X(o.from,l.from)||Vi(e)-Vi(t);return u?-u:X(o.to,l.to)||qn(e)-qn(t)||t.id-e.id}function Il(e,t){var o,i=vr&&e.markedSpans;if(i)for(var l=void 0,u=0;u<i.length;++u)(l=i[u]).marker.collapsed&&null==(t?l.from:l.to)&&(!o||Hl(o,l.marker)<0)&&(o=l.marker);return o}function wr(e){return Il(e,!0)}function Ko(e){return Il(e,!1)}function Os(e,t){var o,i=vr&&e.markedSpans;if(i)for(var l=0;l<i.length;++l){var u=i[l];u.marker.collapsed&&(null==u.from||u.from<t)&&(null==u.to||u.to>t)&&(!o||Hl(o,u.marker)<0)&&(o=u.marker)}return o}function Zo(e,t,i,o,l){var u=q(e,t),f=vr&&u.markedSpans;if(f)for(var h=0;h<f.length;++h){var c=f[h];if(c.marker.collapsed){var d=c.marker.find(0),v=X(d.from,i)||Vi(c.marker)-Vi(l),g=X(d.to,o)||qn(c.marker)-qn(l);if(!(v>=0&&g<=0||v<=0&&g>=0)&&(v<=0&&(c.marker.inclusiveRight&&l.inclusiveLeft?X(d.to,i)>=0:X(d.to,i)>0)||v>=0&&(c.marker.inclusiveRight&&l.inclusiveLeft?X(d.from,o)<=0:X(d.from,o)<0)))return!0}}}function Ar(e){for(var t;t=wr(e);)e=t.find(-1,!0).line;return e}function Nr(e,t){var i=q(e,t),o=Ar(i);return i==o?t:p(o)}function $i(e,t){if(t>e.lastLine())return t;var o,i=q(e,t);if(!Rr(e,i))return t;for(;o=Ko(i);)i=o.find(1,!0).line;return p(i)+1}function Rr(e,t){var i=vr&&t.markedSpans;if(i)for(var o=void 0,l=0;l<i.length;++l)if((o=i[l]).marker.collapsed){if(null==o.from)return!0;if(!o.marker.widgetNode&&0==o.from&&o.marker.inclusiveLeft&&Nn(e,t,o))return!0}}function Nn(e,t,i){if(null==i.to){var o=i.marker.find(1,!0);return Nn(e,o.line,Ji(o.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var l=void 0,u=0;u<t.markedSpans.length;++u)if((l=t.markedSpans[u]).marker.collapsed&&!l.marker.widgetNode&&l.from==i.to&&(null==l.to||l.to!=i.from)&&(l.marker.inclusiveLeft||i.marker.inclusiveRight)&&Nn(e,t,l))return!0}function an(e){for(var t=0,i=(e=Ar(e)).parent,o=0;o<i.lines.length;++o){var l=i.lines[o];if(l==e)break;t+=l.height}for(var u=i.parent;u;u=(i=u).parent)for(var f=0;f<u.children.length;++f){var h=u.children[f];if(h==i)break;t+=h.height}return t}function Yo(e){if(0==e.height)return 0;for(var i,t=e.text.length,o=e;i=wr(o);){var l=i.find(0,!0);o=l.from.line,t+=l.from.ch-l.to.ch}for(o=e;i=Ko(o);){var u=i.find(0,!0);t-=o.text.length-u.from.ch,t+=(o=u.to.line).text.length-u.to.ch}return t}function Bl(e){var t=e.display,i=e.doc;t.maxLine=q(i,i.first),t.maxLineLength=Yo(t.maxLine),t.maxLineChanged=!0,i.iter(function(o){var l=Yo(o);l>t.maxLineLength&&(t.maxLineLength=l,t.maxLine=o)})}var ui=function(e,t,i){this.text=e,Wl(this,t),this.height=i?i(this):1};function Oa(e){e.parent=null,qo(e)}ui.prototype.lineNo=function(){return p(this)},tr(ui);var Es={},Ws={};function Ea(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Ws:Es;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Wa(e,t){var i=tt("span",null,null,Ze?"padding-right: .1px":null),o={pre:tt("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var u=l?t.rest[l-1]:t.line,f=void 0;o.pos=0,o.addToken=Hs,Pr(e.display.measure)&&(f=we(u,e.doc.direction))&&(o.addToken=Xo(o.addToken,f)),o.map=[],Is(u,o,Bo(e,u,t!=e.display.externalMeasured&&p(u))),u.styleClasses&&(u.styleClasses.bgClass&&(o.bgClass=me(u.styleClasses.bgClass,o.bgClass||"")),u.styleClasses.textClass&&(o.textClass=me(u.styleClasses.textClass,o.textClass||""))),0==o.map.length&&o.map.push(0,0,o.content.appendChild(Po(e.display.measure))),0==l?(t.measure.map=o.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(o.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(Ze){var c=o.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return nt(e,"renderLine",e,t.line,o.pre),o.pre.className&&(o.textClass=me(o.pre.className,o.textClass||"")),o}function Ha(e){var t=V("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Hs(e,t,i,o,l,u,f){if(t){var v,h=e.splitSpaces?function Ia(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,o="",l=0;l<e.length;l++){var u=e.charAt(l);" "==u&&i&&(l==e.length-1||32==e.charCodeAt(l+1))&&(u="\xa0"),o+=u,i=" "==u}return o}(t,e.trailingSpace):t,c=e.cm.state.specialChars,d=!1;if(c.test(t)){v=document.createDocumentFragment();for(var g=0;;){c.lastIndex=g;var w=c.exec(t),b=w?w.index-g:t.length-g;if(b){var k=document.createTextNode(h.slice(g,g+b));v.appendChild(ge&&ke<9?V("span",[k]):k),e.map.push(e.pos,e.pos+b,k),e.col+=b,e.pos+=b}if(!w)break;g+=b+1;var L=void 0;if("\t"==w[0]){var D=e.cm.options.tabSize,O=D-e.col%D;(L=v.appendChild(V("span",Z(O),"cm-tab"))).setAttribute("role","presentation"),L.setAttribute("cm-text","\t"),e.col+=O}else"\r"==w[0]||"\n"==w[0]?((L=v.appendChild(V("span","\r"==w[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",w[0]),e.col+=1):((L=e.cm.options.specialCharPlaceholder(w[0])).setAttribute("cm-text",w[0]),v.appendChild(ge&&ke<9?V("span",[L]):L),e.col+=1);e.map.push(e.pos,e.pos+1,L),e.pos++}}else e.col+=t.length,v=document.createTextNode(h),e.map.push(e.pos,e.pos+t.length,v),ge&&ke<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==h.charCodeAt(t.length-1),i||o||l||d||u||f){var E=i||"";o&&(E+=o),l&&(E+=l);var H=V("span",[v],E,u);if(f)for(var _ in f)f.hasOwnProperty(_)&&"style"!=_&&"class"!=_&&H.setAttribute(_,f[_]);return e.content.appendChild(H)}e.content.appendChild(v)}}function Xo(e,t){return function(i,o,l,u,f,h,c){l=l?l+" cm-force-border":"cm-force-border";for(var d=i.pos,v=d+o.length;;){for(var g=void 0,w=0;w<t.length&&!((g=t[w]).to>d&&g.from<=d);w++);if(g.to>=v)return e(i,o,l,u,f,h,c);e(i,o.slice(0,g.to-d),l,u,null,h,c),u=null,o=o.slice(g.to-d),d=g.to}}}function Kn(e,t,i,o){var l=!o&&i.widgetNode;l&&e.map.push(e.pos,e.pos+t,l),!o&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",i.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=t,e.trailingSpace=!1}function Is(e,t,i){var o=e.markedSpans,l=e.text,u=0;if(o)for(var g,w,k,L,D,O,E,h=l.length,c=0,d=1,v="",b=0;;){if(b==c){k=L=D=w="",E=null,O=null,b=1/0;for(var H=[],_=void 0,re=0;re<o.length;++re){var j=o[re],xe=j.marker;if("bookmark"==xe.type&&j.from==c&&xe.widgetNode)H.push(xe);else if(j.from<=c&&(null==j.to||j.to>c||xe.collapsed&&j.to==c&&j.from==c)){if(null!=j.to&&j.to!=c&&b>j.to&&(b=j.to,L=""),xe.className&&(k+=" "+xe.className),xe.css&&(w=(w?w+";":"")+xe.css),xe.startStyle&&j.from==c&&(D+=" "+xe.startStyle),xe.endStyle&&j.to==b&&(_||(_=[])).push(xe.endStyle,j.to),xe.title&&((E||(E={})).title=xe.title),xe.attributes)for(var Me in xe.attributes)(E||(E={}))[Me]=xe.attributes[Me];xe.collapsed&&(!O||Hl(O.marker,xe)<0)&&(O=j)}else j.from>c&&b>j.from&&(b=j.from)}if(_)for(var Ne=0;Ne<_.length;Ne+=2)_[Ne+1]==b&&(L+=" "+_[Ne]);if(!O||O.from==c)for(var Oe=0;Oe<H.length;++Oe)Kn(t,0,H[Oe]);if(O&&(O.from||0)==c){if(Kn(t,(null==O.to?h+1:O.to)-c,O.marker,null==O.from),null==O.to)return;O.to==c&&(O=!1)}}if(c>=h)break;for(var Je=Math.min(h,b);;){if(v){var Be=c+v.length;if(!O){var De=Be>Je?v.slice(0,Je-c):v;t.addToken(t,De,g?g+k:k,D,c+De.length==b?L:"",w,E)}if(Be>=Je){v=v.slice(Je-c),c=Je;break}c=Be,D=""}v=l.slice(u,u=i[d++]),g=Ea(i[d++],t.cm.options)}}else for(var f=1;f<i.length;f+=2)t.addToken(t,l.slice(u,u=i[f]),Ea(i[f+1],t.cm.options))}function Pa(e,t,i){this.line=t,this.rest=function Pl(e){for(var t,i;t=Ko(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?p(ee(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Rr(e,t)}function jo(e,t,i){for(var l,o=[],u=t;u<i;u=l){var f=new Pa(e.doc,q(e.doc,u),u);l=u+f.size,o.push(f)}return o}var _r=null,sn=null;function At(e,t){var i=Hr(e,t);if(i.length){var l,o=Array.prototype.slice.call(arguments,2);_r?l=_r.delayedCallbacks:sn?l=sn:(l=sn=[],setTimeout(za,0));for(var u=function(h){l.push(function(){return i[h].apply(null,o)})},f=0;f<i.length;++f)u(f)}}function za(){var e=sn;sn=null;for(var t=0;t<e.length;++t)e[t]()}function Ra(e,t,i,o){for(var l=0;l<t.changes.length;l++){var u=t.changes[l];"text"==u?Bs(e,t):"gutter"==u?zl(e,t,i,o):"class"==u?Jo(e,t):"widget"==u&&zs(e,t,o)}t.changes=null}function Zn(e){return e.node==e.text&&(e.node=V("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ge&&ke<8&&(e.node.style.zIndex=2)),e.node}function Ua(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Wa(e,t)}function Bs(e,t){var i=t.text.className,o=Ua(e,t);t.text==t.node&&(t.node=o.pre),t.text.parentNode.replaceChild(o.pre,t.text),t.text=o.pre,o.bgClass!=t.bgClass||o.textClass!=t.textClass?(t.bgClass=o.bgClass,t.textClass=o.textClass,Jo(e,t)):i&&(t.text.className=i)}function Jo(e,t){(function _a(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var o=Zn(t);t.background=o.insertBefore(V("div",null,i),o.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?Zn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function zl(e,t,i,o){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var l=Zn(t);t.gutterBackground=V("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),l.insertBefore(t.gutterBackground,t.text)}var u=t.line.gutterMarkers;if(e.options.lineNumbers||u){var f=Zn(t),h=t.gutter=V("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),e.display.input.setUneditable(h),f.insertBefore(h,t.text),t.line.gutterClass&&(h.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!u||!u["CodeMirror-linenumbers"])&&(t.lineNumber=h.appendChild(V("div",R(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),u)for(var c=0;c<e.display.gutterSpecs.length;++c){var d=e.display.gutterSpecs[c].className,v=u.hasOwnProperty(d)&&u[d];v&&h.appendChild(V("div",[v],"CodeMirror-gutter-elt","left: "+o.gutterLeft[d]+"px; width: "+o.gutterWidth[d]+"px"))}}}function zs(e,t,i){t.alignable&&(t.alignable=null);for(var o=y("CodeMirror-linewidget"),l=t.node.firstChild,u=void 0;l;l=u)u=l.nextSibling,o.test(l.className)&&t.node.removeChild(l);Ur(e,t,i)}function eo(e,t,i,o){var l=Ua(e,t);return t.text=t.node=l.pre,l.bgClass&&(t.bgClass=l.bgClass),l.textClass&&(t.textClass=l.textClass),Jo(e,t),zl(e,t,i,o),Ur(e,t,o),t.node}function Ur(e,t,i){if(to(e,t.line,t,i,!0),t.rest)for(var o=0;o<t.rest.length;o++)to(e,t.rest[o],t,i,!1)}function to(e,t,i,o,l){if(t.widgets)for(var u=Zn(i),f=0,h=t.widgets;f<h.length;++f){var c=h[f],d=V("div",[c.node],"CodeMirror-linewidget"+(c.className?" "+c.className:""));c.handleMouseEvents||d.setAttribute("cm-ignore-events","true"),Rl(c,d,i,o),e.display.input.setUneditable(d),l&&c.above?u.insertBefore(d,i.gutter||i.text):u.appendChild(d),At(c,"redraw")}}function Rl(e,t,i,o){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var l=o.wrapperWidth;t.style.left=o.fixedPos+"px",e.coverGutter||(l-=o.gutterTotalWidth,t.style.paddingLeft=o.gutterTotalWidth+"px"),t.style.width=l+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-o.gutterTotalWidth+"px"))}function fi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!S(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),le(t.display.measure,V("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function zt(e,t){for(var i=Zi(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Gr(e){return e.lineSpace.offsetTop}function ro(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ga(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=le(e.measure,V("pre","x","CodeMirror-line-like")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(e.cachedPaddingH=o),o}function Fr(e){return ve-e.display.nativeBarWidth}function Yn(e){return e.display.scroller.clientWidth-Fr(e)-e.display.barWidth}function Qo(e){return e.display.scroller.clientHeight-Fr(e)-e.display.barHeight}function Xn(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var o=0;o<e.rest.length;o++)if(e.rest[o]==t)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(var l=0;l<e.rest.length;l++)if(p(e.rest[l])>i)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Ul(e,t,i,o){return Kr(e,hi(e,t),i,o)}function Vo(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Yr(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function hi(e,t){var i=p(t),o=Vo(e,i);o&&!o.text?o=null:o&&o.changes&&(Ra(e,o,i,hn(e)),e.curOp.forceUpdate=!0),o||(o=function qr(e,t){var i=p(t=Ar(t)),o=e.display.externalMeasured=new Pa(e.doc,t,i);o.lineN=i;var l=o.built=Wa(e,o);return o.text=l.pre,le(e.display.lineMeasure,l.pre),o}(e,t));var l=Xn(o,t,i);return{line:t,view:o,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function Kr(e,t,i,o,l){t.before&&(i=-1);var f,u=i+(o||"");return t.cache.hasOwnProperty(u)?f=t.cache[u]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function _l(e,t,i){var o=e.options.lineWrapping,l=o&&Yn(e);if(!t.measure.heights||o&&t.measure.width!=l){var u=t.measure.heights=[];if(o){t.measure.width=l;for(var f=t.text.firstChild.getClientRects(),h=0;h<f.length-1;h++){var c=f[h],d=f[h+1];Math.abs(c.bottom-d.bottom)>2&&u.push((c.bottom+d.top)/2-i.top)}}u.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),f=function no(e,t,i,o){var d,l=Gl(t.map,i,o),u=l.node,f=l.start,h=l.end,c=l.collapse;if(3==u.nodeType){for(var v=0;v<4;v++){for(;f&&He(t.line.text.charAt(l.coverStart+f));)--f;for(;l.coverStart+h<l.coverEnd&&He(t.line.text.charAt(l.coverStart+h));)++h;if((d=ge&&ke<9&&0==f&&h==l.coverEnd-l.coverStart?u.parentNode.getBoundingClientRect():Ka(Qe(u,f,h).getClientRects(),o)).left||d.right||0==f)break;h=f,f-=1,c="right"}ge&&ke<11&&(d=function Za(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Dl(e){if(null!=Mr)return Mr;var t=le(e,V("span","x")),i=t.getBoundingClientRect(),o=Qe(t,0,1).getBoundingClientRect();return Mr=Math.abs(i.left-o.left)>1}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*o,bottom:t.bottom*o}}(e.display.measure,d))}else{var g;f>0&&(c=o="right"),d=e.options.lineWrapping&&(g=u.getClientRects()).length>1?g["right"==o?g.length-1:0]:u.getBoundingClientRect()}if(ge&&ke<9&&!f&&(!d||!d.left&&!d.right)){var w=u.parentNode.getClientRects()[0];d=w?{left:w.left,right:w.left+On(e.display),top:w.top,bottom:w.bottom}:qa}for(var b=d.top-t.rect.top,k=d.bottom-t.rect.top,L=(b+k)/2,D=t.view.measure.heights,O=0;O<D.length-1&&!(L<D[O]);O++);var _={left:("right"==c?d.right:d.left)-t.rect.left,right:("left"==c?d.left:d.right)-t.rect.left,top:O?D[O-1]:0,bottom:D[O]};return!d.left&&!d.right&&(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=b,_.rbottom=k),_}(e,t,i,o),f.bogus||(t.cache[u]=f)),{left:f.left,right:f.right,top:l?f.rtop:f.top,bottom:l?f.rbottom:f.bottom}}var fn,qa={left:0,right:0,top:0,bottom:0};function Gl(e,t,i){for(var o,l,u,f,h,c,d=0;d<e.length;d+=3)if(c=e[d+1],t<(h=e[d])?(l=0,u=1,f="left"):t<c?u=1+(l=t-h):(d==e.length-3||t==c&&e[d+3]>t)&&(l=(u=c-h)-1,t>=c&&(f="right")),null!=l){if(o=e[d+2],h==c&&i==(o.insertLeft?"left":"right")&&(f=i),"left"==i&&0==l)for(;d&&e[d-2]==e[d-3]&&e[d-1].insertLeft;)o=e[2+(d-=3)],f="left";if("right"==i&&l==c-h)for(;d<e.length-3&&e[d+3]==e[d+4]&&!e[d+5].insertLeft;)o=e[(d+=3)+2],f="right";break}return{node:o,start:l,end:u,collapse:f,coverStart:h,coverEnd:c}}function Ka(e,t){var i=qa;if("left"==t)for(var o=0;o<e.length&&(i=e[o]).left==i.right;o++);else for(var l=e.length-1;l>=0&&(i=e[l]).left==i.right;l--);return i}function ql(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function $o(e){e.display.externalMeasure=null,P(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ql(e.display.view[t])}function Fn(e){$o(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Kl(){return at&&C?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function io(){return at&&C?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function gr(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=fi(e.widgets[i]));return t}function oo(e,t,i,o,l){if(!l){var u=gr(t);i.top+=u,i.bottom+=u}if("line"==o)return i;o||(o="local");var f=an(t);if("local"==o?f+=Gr(e.display):f-=e.display.viewOffset,"page"==o||"window"==o){var h=e.display.lineSpace.getBoundingClientRect();f+=h.top+("window"==o?0:io());var c=h.left+("window"==o?0:Kl());i.left+=c,i.right+=c}return i.top+=f,i.bottom+=f,i}function el(e,t,i){if("div"==i)return t;var o=t.left,l=t.top;if("page"==i)o-=Kl(),l-=io();else if("local"==i||!i){var u=e.display.sizer.getBoundingClientRect();o+=u.left,l+=u.top}var f=e.display.lineSpace.getBoundingClientRect();return{left:o-f.left,top:l-f.top}}function ci(e,t,i,o,l){return o||(o=q(e.doc,t.line)),oo(e,o,Ul(e,o,t.ch,l),i)}function Cr(e,t,i,o,l,u){function f(k,L){var D=Kr(e,l,k,L?"right":"left",u);return L?D.left=D.right:D.right=D.left,oo(e,o,D,i)}o=o||q(e.doc,t.line),l||(l=hi(e,o));var h=we(o,e.doc.direction),c=t.ch,d=t.sticky;if(c>=o.text.length?(c=o.text.length,d="before"):c<=0&&(c=0,d="after"),!h)return f("before"==d?c-1:c,"before"==d);function v(k,L,D){return f(D?k-1:k,1==h[L].level!=D)}var g=ce(h,c,d),w=kn,b=v(c,g,"before"==d);return null!=w&&(b.other=v(c,w,"before"!=d)),b}function Zl(e,t){var i=0;t=ye(e.doc,t),e.options.lineWrapping||(i=On(e.display)*t.ch);var o=q(e.doc,t.line),l=an(o)+Gr(e.display);return{left:i,right:i,top:l,bottom:l+o.height}}function lo(e,t,i,o,l){var u=N(e,t,i);return u.xRel=l,o&&(u.outside=o),u}function Yl(e,t,i){var o=e.doc;if((i+=e.display.viewOffset)<0)return lo(o.first,0,null,-1,-1);var l=x(o,i),u=o.first+o.size-1;if(l>u)return lo(o.first+o.size-1,q(o,u).text.length,null,1,1);t<0&&(t=0);for(var f=q(o,l);;){var h=di(e,f,l,t,i),c=Os(f,h.ch+(h.xRel>0||h.outside>0?1:0));if(!c)return h;var d=c.find(1);if(d.line==l)return d;f=q(o,l=d.line)}}function Ya(e,t,i,o){o-=gr(t);var l=t.text.length,u=Ct(function(f){return Kr(e,i,f-1).bottom<=o},l,0);return{begin:u,end:l=Ct(function(f){return Kr(e,i,f).top>o},u,l)}}function Xa(e,t,i,o){return i||(i=hi(e,t)),Ya(e,t,i,oo(e,t,Kr(e,i,o),"line").top)}function un(e,t,i,o){return!(e.bottom<=i)&&(e.top>i||(o?e.left:e.right)>t)}function di(e,t,i,o,l){l-=an(t);var u=hi(e,t),f=gr(t),h=0,c=t.text.length,d=!0,v=we(t,e.doc.direction);if(v){var g=(e.options.lineWrapping?Xl:pi)(e,t,i,u,v,o,l);h=(d=1!=g.level)?g.from:g.to-1,c=d?g.to:g.from-1}var L,D,w=null,b=null,k=Ct(function(re){var j=Kr(e,u,re);return j.top+=f,j.bottom+=f,!!un(j,o,l,!1)&&(j.top<=l&&j.left<=o&&(w=re,b=j),!0)},h,c),O=!1;if(b){var E=o-b.left<b.right-o,H=E==d;k=w+(H?0:1),D=H?"after":"before",L=E?b.left:b.right}else{!d&&(k==c||k==h)&&k++,D=0==k?"after":k==t.text.length?"before":Kr(e,u,k-(d?1:0)).bottom+f<=l==d?"after":"before";var _=Cr(e,N(i,k,D),"line",t,u);L=_.left,O=l<_.top?-1:l>=_.bottom?1:0}return lo(i,k=st(t.text,k,1),D,O,o-L)}function pi(e,t,i,o,l,u,f){var h=Ct(function(g){var w=l[g],b=1!=w.level;return un(Cr(e,N(i,b?w.to:w.from,b?"before":"after"),"line",t,o),u,f,!0)},0,l.length-1),c=l[h];if(h>0){var d=1!=c.level,v=Cr(e,N(i,d?c.from:c.to,d?"after":"before"),"line",t,o);un(v,u,f,!0)&&v.top>f&&(c=l[h-1])}return c}function Xl(e,t,i,o,l,u,f){var h=Ya(e,t,o,f),c=h.begin,d=h.end;/\s/.test(t.text.charAt(d-1))&&d--;for(var v=null,g=null,w=0;w<l.length;w++){var b=l[w];if(!(b.from>=d||b.to<=c)){var L=Kr(e,o,1!=b.level?Math.min(d,b.to)-1:Math.max(c,b.from)).right,D=L<u?u-L+1e9:L-u;(!v||g>D)&&(v=b,g=D)}}return v||(v=l[l.length-1]),v.from<c&&(v={from:c,to:v.to,level:v.level}),v.to>d&&(v={from:v.from,to:d,level:v.level}),v}function jn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==fn){fn=V("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)fn.appendChild(document.createTextNode("x")),fn.appendChild(V("br"));fn.appendChild(document.createTextNode("x"))}le(e.measure,fn);var i=fn.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),P(e.measure),i||1}function On(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=V("span","xxxxxxxxxx"),i=V("pre",[t],"CodeMirror-line-like");le(e.measure,i);var o=t.getBoundingClientRect(),l=(o.right-o.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function hn(e){for(var t=e.display,i={},o={},l=t.gutters.clientLeft,u=t.gutters.firstChild,f=0;u;u=u.nextSibling,++f){var h=e.display.gutterSpecs[f].className;i[h]=u.offsetLeft+u.clientLeft+l,o[h]=u.clientWidth}return{fixedPos:cn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:o,wrapperWidth:t.wrapper.clientWidth}}function cn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function jt(e){var t=jn(e.display),i=e.options.lineWrapping,o=i&&Math.max(5,e.display.scroller.clientWidth/On(e.display)-3);return function(l){if(Rr(e.doc,l))return 0;var u=0;if(l.widgets)for(var f=0;f<l.widgets.length;f++)l.widgets[f].height&&(u+=l.widgets[f].height);return i?u+(Math.ceil(l.text.length/o)||1)*t:u+t}}function Zr(e){var t=e.doc,i=jt(e);t.iter(function(o){var l=i(o);l!=o.height&&ir(o,l)})}function sr(e,t,i,o){var l=e.display;if(!i&&"true"==Zi(t).getAttribute("cm-not-content"))return null;var u,f,h=l.lineSpace.getBoundingClientRect();try{u=t.clientX-h.left,f=t.clientY-h.top}catch{return null}var d,c=Yl(e,u,f);if(o&&c.xRel>0&&(d=q(e.doc,c.line).text).length==c.ch){var v=A(d,d.length,e.options.tabSize)-d.length;c=N(c.line,Math.max(0,Math.round((u-Ga(e.display).left)/On(e.display))-v))}return c}function Yr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,o=0;o<i.length;o++)if((t-=i[o].size)<0)return o}function lr(e,t,i,o){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),o||(o=0);var l=e.display;if(o&&i<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo)vr&&Nr(e.doc,t)<l.viewTo&&Sr(e);else if(i<=l.viewFrom)vr&&$i(e.doc,i+o)>l.viewFrom?Sr(e):(l.viewFrom+=o,l.viewTo+=o);else if(t<=l.viewFrom&&i>=l.viewTo)Sr(e);else if(t<=l.viewFrom){var u=ao(e,i,i+o,1);u?(l.view=l.view.slice(u.index),l.viewFrom=u.lineN,l.viewTo+=o):Sr(e)}else if(i>=l.viewTo){var f=ao(e,t,t,-1);f?(l.view=l.view.slice(0,f.index),l.viewTo=f.lineN):Sr(e)}else{var h=ao(e,t,t,-1),c=ao(e,i,i+o,1);h&&c?(l.view=l.view.slice(0,h.index).concat(jo(e,h.lineN,c.lineN)).concat(l.view.slice(c.index)),l.viewTo+=o):Sr(e)}var d=l.externalMeasured;d&&(i<d.lineN?d.lineN+=o:t<d.lineN+d.size&&(l.externalMeasured=null))}function dn(e,t,i){e.curOp.viewChanged=!0;var o=e.display,l=e.display.externalMeasured;if(l&&t>=l.lineN&&t<l.lineN+l.size&&(o.externalMeasured=null),!(t<o.viewFrom||t>=o.viewTo)){var u=o.view[Yr(e,t)];if(null!=u.node){var f=u.changes||(u.changes=[]);-1==z(f,i)&&f.push(i)}}}function Sr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ao(e,t,i,o){var u,l=Yr(e,t),f=e.display.view;if(!vr||i==e.doc.first+e.doc.size)return{index:l,lineN:i};for(var h=e.display.viewFrom,c=0;c<l;c++)h+=f[c].size;if(h!=t){if(o>0){if(l==f.length-1)return null;u=h+f[l].size-t,l++}else u=h-t;t+=u,i+=u}for(;Nr(e.doc,i)!=i;){if(l==(o<0?0:f.length-1))return null;i+=o*f[l-(o<0?1:0)].size,l+=o}return{index:l,lineN:i}}function so(e){for(var t=e.display.view,i=0,o=0;o<t.length;o++){var l=t[o];!l.hidden&&(!l.node||l.changes)&&++i}return i}function uo(e){e.display.input.showSelection(e.display.input.prepareSelection())}function tl(e,t){void 0===t&&(t=!0);var i=e.doc,o={},l=o.cursors=document.createDocumentFragment(),u=o.selection=document.createDocumentFragment(),f=e.options.$customCursor;f&&(t=!0);for(var h=0;h<i.sel.ranges.length;h++)if(t||h!=i.sel.primIndex){var c=i.sel.ranges[h];if(!(c.from().line>=e.display.viewTo||c.to().line<e.display.viewFrom)){var d=c.empty();if(f){var v=f(e,c);v&&rl(e,v,l)}else(d||e.options.showCursorWhenSelecting)&&rl(e,c.head,l);d||Jl(e,c,u)}}return o}function rl(e,t,i){var o=Cr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),l=i.appendChild(V("div","\xa0","CodeMirror-cursor"));if(l.style.left=o.left+"px",l.style.top=o.top+"px",l.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var u=ci(e,t,"div",null,null),f=u.right-u.left;l.style.width=(f>0?f:e.defaultCharWidth())+"px"}if(o.other){var h=i.appendChild(V("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));h.style.display="",h.style.left=o.other.left+"px",h.style.top=o.other.top+"px",h.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function vi(e,t){return e.top-t.top||e.left-t.left}function Jl(e,t,i){var o=e.display,l=e.doc,u=document.createDocumentFragment(),f=Ga(e.display),h=f.left,c=Math.max(o.sizerWidth,Yn(e)-o.sizer.offsetLeft)-f.right,d="ltr"==l.direction;function v(H,_,re,j){_<0&&(_=0),_=Math.round(_),j=Math.round(j),u.appendChild(V("div",null,"CodeMirror-selected","position: absolute; left: "+H+"px;\n                             top: "+_+"px; width: "+(re??c-H)+"px;\n                             height: "+(j-_)+"px"))}function g(H,_,re){var Me,Ne,j=q(l,H),xe=j.text.length;function Oe(De,We){return ci(e,N(H,De),"div",j,We)}function Je(De,We,qe){var ct=Xa(e,j,null,De),ot="ltr"==We==("after"==qe)?"left":"right";return Oe("after"==qe?ct.begin:ct.end-(/\s/.test(j.text.charAt(ct.end-1))?2:1),ot)[ot]}var Be=we(j,l.direction);return function Zt(e,t,i,o){if(!e)return o(t,i,"ltr",0);for(var l=!1,u=0;u<e.length;++u){var f=e[u];(f.from<i&&f.to>t||t==i&&f.to==t)&&(o(Math.max(f.from,t),Math.min(f.to,i),1==f.level?"rtl":"ltr",u),l=!0)}l||o(t,i,"ltr")}(Be,_||0,re??xe,function(De,We,qe,ct){var ot="ltr"==qe,Fe=Oe(De,ot?"left":"right"),yt=Oe(We-1,ot?"right":"left"),xt=null==_&&0==De,tn=null==re&&We==xe,dt=0==ct,$t=!Be||ct==Be.length-1;if(yt.top-Fe.top<=3){var fr=(d?xt:tn)&&dt?h:(ot?Fe:yt).left;v(fr,Fe.top,((d?tn:xt)&&$t?c:(ot?yt:Fe).right)-fr,Fe.bottom)}else{var Io,hr,Tl,fu;ot?(Io=d&&xt&&dt?h:Fe.left,hr=d?c:Je(De,qe,"before"),Tl=d?h:Je(We,qe,"after"),fu=d&&tn&&$t?c:yt.right):(Io=d?Je(De,qe,"before"):h,hr=!d&&xt&&dt?c:Fe.right,Tl=!d&&tn&&$t?h:yt.left,fu=d?Je(We,qe,"after"):c),v(Io,Fe.top,hr-Io,Fe.bottom),Fe.bottom<yt.top&&v(h,Fe.bottom,null,yt.top),v(Tl,yt.top,fu-Tl,yt.bottom)}(!Me||vi(Fe,Me)<0)&&(Me=Fe),vi(yt,Me)<0&&(Me=yt),(!Ne||vi(Fe,Ne)<0)&&(Ne=Fe),vi(yt,Ne)<0&&(Ne=yt)}),{start:Me,end:Ne}}var w=t.from(),b=t.to();if(w.line==b.line)g(w.line,w.ch,b.ch);else{var k=q(l,w.line),L=q(l,b.line),D=Ar(k)==Ar(L),O=g(w.line,w.ch,D?k.text.length+1:null).end,E=g(b.line,D?0:null,b.ch).start;D&&(O.top<E.top-2?(v(O.right,O.top,null,O.bottom),v(h,E.top,E.left,E.bottom)):v(O.right,O.top,E.left-O.right,O.bottom)),O.bottom<E.top&&v(h,O.bottom,null,E.top)}i.appendChild(u)}function En(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||mi(e),t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function fo(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||gi(e))}function nl(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&mi(e))},100)}function gi(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(nt(e,"focus",e,t),e.state.focused=!0,$(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),Ze&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),En(e))}function mi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(nt(e,"blur",e,t),e.state.focused=!1,K(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function il(e){for(var t=e.display,i=t.lineDiv.offsetTop,o=Math.max(0,t.scroller.getBoundingClientRect().top),l=t.lineDiv.getBoundingClientRect().top,u=0,f=0;f<t.view.length;f++){var h=t.view[f],c=e.options.lineWrapping,d=void 0,v=0;if(!h.hidden){if(l+=h.line.height,ge&&ke<8){var g=h.node.offsetTop+h.node.offsetHeight;d=g-i,i=g}else{var w=h.node.getBoundingClientRect();d=w.bottom-w.top,!c&&h.text.firstChild&&(v=h.text.firstChild.getBoundingClientRect().right-w.left-1)}var b=h.line.height-d;if((b>.005||b<-.005)&&(l<o&&(u-=b),ir(h.line,d),ja(h.line),h.rest))for(var k=0;k<h.rest.length;k++)ja(h.rest[k]);if(v>e.display.sizerWidth){var L=Math.ceil(v/On(e.display));L>e.display.maxLineLength&&(e.display.maxLineLength=L,e.display.maxLine=h.line,e.display.maxLineChanged=!0)}}}Math.abs(u)>2&&(t.scroller.scrollTop+=u)}function ja(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],o=i.node.parentNode;o&&(i.height=o.offsetHeight)}}function yi(e,t,i){var o=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;o=Math.floor(o-Gr(e));var l=i&&null!=i.bottom?i.bottom:o+e.wrapper.clientHeight,u=x(t,o),f=x(t,l);if(i&&i.ensure){var h=i.ensure.from.line,c=i.ensure.to.line;h<u?(u=h,f=x(t,an(q(t,h))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=f&&(u=x(t,an(q(t,c))-e.wrapper.clientHeight),f=c)}return{from:u,to:Math.max(f,u+1)}}function Vl(e,t){var i=e.display,o=jn(e.display);t.top<0&&(t.top=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,u=Qo(e),f={};t.bottom-t.top>u&&(t.bottom=t.top+u);var h=e.doc.height+ro(i),d=t.bottom>h-o;if(t.top<l)f.scrollTop=t.top<o?0:t.top;else if(t.bottom>l+u){var v=Math.min(t.top,(d?h:t.bottom)-u);v!=l&&(f.scrollTop=v)}var g=e.options.fixedGutter?0:i.gutters.offsetWidth,w=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft-g,b=Yn(e)-i.gutters.offsetWidth,k=t.right-t.left>b;return k&&(t.right=t.left+b),t.left<10?f.scrollLeft=0:t.left<w?f.scrollLeft=Math.max(0,t.left+g-(k?0:10)):t.right>b+w-3&&(f.scrollLeft=t.right+(k?0:10)-b),f}function bi(e,t){null!=t&&(Xr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Jn(e){Xr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function pn(e,t,i){(null!=t||null!=i)&&Xr(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function Xr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,wi(e,Zl(e,t.from),Zl(e,t.to),t.margin))}function wi(e,t,i,o){var l=Vl(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-o,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+o});pn(e,l.scrollLeft,l.scrollTop)}function Or(e,t){Math.abs(e.doc.scrollTop-t)<2||(Ae||ll(e,{top:t}),Ci(e,t,!0),Ae&&ll(e),co(e,100))}function Ci(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function kr(e,t,i,o){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||o)&&(e.doc.scrollLeft=t,Mi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Si(e){var t=e.display,i=t.gutters.offsetWidth,o=Math.round(e.doc.height+ro(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:o,scrollHeight:o+Fr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var Wn=function(e,t,i){this.cm=i;var o=this.vert=V("div",[V("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=V("div",[V("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=l.tabIndex=-1,e(o),e(l),te(o,"scroll",function(){o.clientHeight&&t(o.scrollTop,"vertical")}),te(l,"scroll",function(){l.clientWidth&&t(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ge&&ke<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Wn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;return i?(this.vert.style.display="block",this.vert.style.bottom=t?o+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?o:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=i?o+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(i?o:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==o&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?o:0,bottom:t?o:0}},Wn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Wn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Wn.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Pe&&!qt?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ie,this.disableVert=new ie},Wn.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto",t.set(1e3,function o(){var l=e.getBoundingClientRect();("vert"==i?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,o)})},Wn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var ki=function(){};function Li(e,t){t||(t=Si(e));var i=e.display.barWidth,o=e.display.barHeight;Hn(e,t);for(var l=0;l<4&&i!=e.display.barWidth||o!=e.display.barHeight;l++)i!=e.display.barWidth&&e.options.lineWrapping&&il(e),Hn(e,Si(e)),i=e.display.barWidth,o=e.display.barHeight}function Hn(e,t){var i=e.display,o=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=o.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=o.bottom)+"px",i.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=o.bottom+"px",i.scrollbarFiller.style.width=o.right+"px"):i.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=o.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}ki.prototype.update=function(){return{bottom:0,right:0}},ki.prototype.setScrollLeft=function(){},ki.prototype.setScrollTop=function(){},ki.prototype.clear=function(){};var In={native:Wn,null:ki};function Qa(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&K(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new In[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),te(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){"horizontal"==i?kr(e,t):Or(e,t)},e),e.display.scrollbars.addClass&&$(e.display.wrapper,e.display.scrollbars.addClass)}var Rs=0;function Qn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rs,markArrays:null},function Dt(e){_r?_r.ops.push(e):e.ownsGroup=_r={ops:[e],delayedCallbacks:[]}}(e.curOp)}function Vn(e){var t=e.curOp;t&&function Ba(e,t){var i=e.ownsGroup;if(i)try{!function Ps(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var o=0;o<e.ops.length;o++){var l=e.ops[o];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(i<t.length)}(i)}finally{_r=null,t(i)}}(t,function(i){for(var o=0;o<i.ops.length;o++)i.ops[o].cm.curOp=null;!function _s(e){for(var t=e.ops,i=0;i<t.length;i++)Us(t[i]);for(var o=0;o<t.length;o++)ur(t[o]);for(var l=0;l<t.length;l++)Nt(t[l]);for(var u=0;u<t.length;u++)Jt(t[u]);for(var f=0;f<t.length;f++)Ft(t[f])}(i)})}function Us(e){var t=e.cm,i=t.display;(function Va(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Fr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Fr(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Bl(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Ti(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function ur(e){e.updatedDisplay=e.mustUpdate&&po(e.cm,e.update)}function Nt(e){var t=e.cm,i=t.display;e.updatedDisplay&&il(t),e.barMeasure=Si(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ul(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Fr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Yn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Jt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&kr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==m();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Li(t,e.barMeasure),e.updatedDisplay&&al(t,e.barMeasure),e.selectionChanged&&En(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&fo(e.cm)}function Ft(e){var t=e.cm,i=t.display,o=t.doc;if(e.updatedDisplay&&ol(t,e.update),null!=i.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&Ci(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&kr(t,e.scrollLeft,!0,!0),e.scrollToPos){var l=function xi(e,t,i,o){var l;null==o&&(o=0),!e.options.lineWrapping&&t==i&&(i="before"==t.sticky?N(t.line,t.ch+1,"before"):t,t=t.ch?N(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var u=0;u<5;u++){var f=!1,h=Cr(e,t),c=i&&i!=t?Cr(e,i):h,d=Vl(e,l={left:Math.min(h.left,c.left),top:Math.min(h.top,c.top)-o,right:Math.max(h.left,c.left),bottom:Math.max(h.bottom,c.bottom)+o}),v=e.doc.scrollTop,g=e.doc.scrollLeft;if(null!=d.scrollTop&&(Or(e,d.scrollTop),Math.abs(e.doc.scrollTop-v)>1&&(f=!0)),null!=d.scrollLeft&&(kr(e,d.scrollLeft),Math.abs(e.doc.scrollLeft-g)>1&&(f=!0)),!f)break}return l}(t,ye(o,e.scrollToPos.from),ye(o,e.scrollToPos.to),e.scrollToPos.margin);!function Ql(e,t){if(!Ee(e,"scrollCursorIntoView")){var i=e.display,o=i.sizer.getBoundingClientRect(),l=null;if(t.top+o.top<0?l=!0:t.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null!=l&&!Kt){var u=V("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-Gr(e.display))+"px;\n                         height: "+(t.bottom-t.top+Fr(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(u),u.scrollIntoView(l),e.display.lineSpace.removeChild(u)}}}(t,l)}var u=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(u)for(var h=0;h<u.length;++h)u[h].lines.length||nt(u[h],"hide");if(f)for(var c=0;c<f.length;++c)f[c].lines.length&&nt(f[c],"unhide");i.wrapper.offsetHeight&&(o.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&nt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Rt(e,t){if(e.curOp)return t();Qn(e);try{return t()}finally{Vn(e)}}function Ot(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Qn(e);try{return t.apply(e,arguments)}finally{Vn(e)}}}function Et(e){return function(){if(this.curOp)return e.apply(this,arguments);Qn(this);try{return e.apply(this,arguments)}finally{Vn(this)}}}function Wt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Qn(t);try{return e.apply(this,arguments)}finally{Vn(t)}}}function co(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Q(Gs,e))}function Gs(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,o=si(e,t.highlightFrontier),l=[];t.iter(o.line,Math.min(t.first+t.size,e.display.viewTo+500),function(u){if(o.line>=e.display.viewFrom){var f=u.styles,h=u.text.length>e.options.maxHighlightLength?ae(t.mode,o.state):null,c=Nl(e,u,o,!0);h&&(o.state=h),u.styles=c.styles;var d=u.styleClasses,v=c.classes;v?u.styleClasses=v:d&&(u.styleClasses=null);for(var g=!f||f.length!=u.styles.length||d!=v&&(!d||!v||d.bgClass!=v.bgClass||d.textClass!=v.textClass),w=0;!g&&w<f.length;++w)g=f[w]!=u.styles[w];g&&l.push(o.line),u.stateAfter=o.save(),o.nextLine()}else u.text.length<=e.options.maxHighlightLength&&zo(e,u.text,o),u.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>i)return co(e,e.options.workDelay),!0}),t.highlightFrontier=o.line,t.modeFrontier=Math.max(t.modeFrontier,o.line),l.length&&Rt(e,function(){for(var u=0;u<l.length;u++)dn(e,l[u],"text")})}}var Ti=function(e,t,i){var o=e.display;this.viewport=t,this.visible=yi(o,e.doc,t),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=Yn(e),this.force=i,this.dims=hn(e),this.events=[]};function po(e,t){var i=e.display,o=e.doc;if(t.editorIsHidden)return Sr(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==so(e))return!1;es(e)&&(Sr(e),t.dims=hn(e));var l=o.first+o.size,u=Math.max(t.visible.from-e.options.viewportMargin,o.first),f=Math.min(l,t.visible.to+e.options.viewportMargin);i.viewFrom<u&&u-i.viewFrom<20&&(u=Math.max(o.first,i.viewFrom)),i.viewTo>f&&i.viewTo-f<20&&(f=Math.min(l,i.viewTo)),vr&&(u=Nr(e.doc,u),f=$i(e.doc,f));var h=u!=i.viewFrom||f!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;(function jl(e,t,i){var o=e.display;0==o.view.length||t>=o.viewTo||i<=o.viewFrom?(o.view=jo(e,t,i),o.viewFrom=t):(o.viewFrom>t?o.view=jo(e,t,o.viewFrom).concat(o.view):o.viewFrom<t&&(o.view=o.view.slice(Yr(e,t))),o.viewFrom=t,o.viewTo<i?o.view=o.view.concat(jo(e,o.viewTo,i)):o.viewTo>i&&(o.view=o.view.slice(0,Yr(e,i)))),o.viewTo=i})(e,u,f),i.viewOffset=an(q(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var c=so(e);if(!h&&0==c&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var d=function $l(e){if(e.hasFocus())return null;var t=m();if(!t||!S(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&S(e.display.lineDiv,o.anchorNode)&&(i.anchorNode=o.anchorNode,i.anchorOffset=o.anchorOffset,i.focusNode=o.focusNode,i.focusOffset=o.focusOffset)}return i}(e);return c>4&&(i.lineDiv.style.display="none"),function $a(e,t,i){var o=e.display,l=e.options.lineNumbers,u=o.lineDiv,f=u.firstChild;function h(k){var L=k.nextSibling;return Ze&&Pe&&e.display.currentWheelTarget==k?k.style.display="none":k.parentNode.removeChild(k),L}for(var c=o.view,d=o.viewFrom,v=0;v<c.length;v++){var g=c[v];if(!g.hidden)if(g.node&&g.node.parentNode==u){for(;f!=g.node;)f=h(f);var b=l&&null!=t&&t<=d&&g.lineNumber;g.changes&&(z(g.changes,"gutter")>-1&&(b=!1),Ra(e,g,d,i)),b&&(P(g.lineNumber),g.lineNumber.appendChild(document.createTextNode(R(e.options,d)))),f=g.node.nextSibling}else{var w=eo(e,g,d,i);u.insertBefore(w,f)}d+=g.size}for(;f;)f=h(f)}(e,i.updateLineNumbers,t.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,function qs(e){if(e&&e.activeElt&&e.activeElt!=m()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&S(document.body,e.anchorNode)&&S(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}(d),P(i.cursorDiv),P(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,h&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,co(e,400)),i.updateLineNumbers=null,!0}function ol(e,t){for(var i=t.viewport,o=!0;;o=!1){if(o&&e.options.lineWrapping&&t.oldDisplayWidth!=Yn(e))o&&(t.visible=yi(e.display,e.doc,i));else if(i&&null!=i.top&&(i={top:Math.min(e.doc.height+ro(e.display)-Qo(e),i.top)}),t.visible=yi(e.display,e.doc,i),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!po(e,t))break;il(e);var l=Si(e);uo(e),Li(e,l),al(e,l),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ll(e,t){var i=new Ti(e,t);if(po(e,i)){il(e),ol(e,i);var o=Si(e);uo(e),Li(e,o),al(e,o),i.finish()}}function vo(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",At(e,"gutterChanged",e)}function al(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Fr(e)+"px"}function Mi(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var o=cn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,l=t.gutters.offsetWidth,u=o+"px",f=0;f<i.length;f++)if(!i[f].hidden){e.options.fixedGutter&&(i[f].gutter&&(i[f].gutter.style.left=u),i[f].gutterBackground&&(i[f].gutterBackground.style.left=u));var h=i[f].alignable;if(h)for(var c=0;c<h.length;c++)h[c].style.left=u}e.options.fixedGutter&&(t.gutters.style.left=o+l+"px")}}function es(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=R(e.options,t.first+t.size-1),o=e.display;if(i.length!=o.lineNumChars){var l=o.measure.appendChild(V("div",[V("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),u=l.firstChild.offsetWidth,f=l.offsetWidth-u;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(u,o.lineGutter.offsetWidth-f)+1,o.lineNumWidth=o.lineNumInnerWidth+f,o.lineNumChars=o.lineNumInnerWidth?i.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",vo(e.display),!0}return!1}function Di(e,t){for(var i=[],o=!1,l=0;l<e.length;l++){var u=e[l],f=null;if("string"!=typeof u&&(f=u.style,u=u.className),"CodeMirror-linenumbers"==u){if(!t)continue;o=!0}i.push({className:u,style:f})}return t&&!o&&i.push({className:"CodeMirror-linenumbers",style:null}),i}function jr(e){var t=e.gutters,i=e.gutterSpecs;P(t),e.lineGutter=null;for(var o=0;o<i.length;++o){var l=i[o],u=l.className,f=l.style,h=t.appendChild(V("div",null,"CodeMirror-gutter "+u));f&&(h.style.cssText=f),"CodeMirror-linenumbers"==u&&(e.lineGutter=h,h.style.width=(e.lineNumWidth||1)+"px")}t.style.display=i.length?"":"none",vo(e)}function Ai(e){jr(e.display),lr(e),Mi(e)}function Ks(e,t,i,o){var l=this;this.input=i,l.scrollbarFiller=V("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=V("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=tt("div",null,"CodeMirror-code"),l.selectionDiv=V("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=V("div",null,"CodeMirror-cursors"),l.measure=V("div",null,"CodeMirror-measure"),l.lineMeasure=V("div",null,"CodeMirror-measure"),l.lineSpace=tt("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var u=tt("div",[l.lineSpace],"CodeMirror-lines");l.mover=V("div",[u],null,"position: relative"),l.sizer=V("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=V("div",null,null,"position: absolute; height: "+ve+"px; width: 1px;"),l.gutters=V("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=V("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=V("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),ge&&ke<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!Ze&&!(Ae&&gt)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=t.first,l.reportedViewFrom=l.reportedViewTo=t.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=Di(o.gutters,o.lineNumbers),jr(l),i.init(l)}Ti.prototype.signal=function(e,t){Yt(e,t)&&this.events.push(arguments)},Ti.prototype.finish=function(){for(var e=0;e<this.events.length;e++)nt.apply(null,this.events[e])};var go=0,St=null;function _e(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function Er(e){var t=_e(e);return t.x*=St,t.y*=St,t}function vn(e,t){var i=_e(t),o=i.x,l=i.y,u=St;0===t.deltaMode&&(o=t.deltaX,l=t.deltaY,u=1);var f=e.display,h=f.scroller,d=h.scrollHeight>h.clientHeight;if(o&&h.scrollWidth>h.clientWidth||l&&d){if(l&&Pe&&Ze)e:for(var v=t.target,g=f.view;v!=h;v=v.parentNode)for(var w=0;w<g.length;w++)if(g[w].node==v){e.display.currentWheelTarget=v;break e}if(o&&!Ae&&!pe&&null!=u)return l&&d&&Or(e,Math.max(0,h.scrollTop+l*u)),kr(e,Math.max(0,h.scrollLeft+o*u)),(!l||l&&d)&&Mt(t),void(f.wheelStartX=null);if(l&&null!=u){var b=l*u,k=e.doc.scrollTop,L=k+f.wrapper.clientHeight;b<0?k=Math.max(0,k+b-50):L=Math.min(e.doc.height,L+b+50),ll(e,{top:k,bottom:L})}go<20&&0!==t.deltaMode&&(null==f.wheelStartX?(f.wheelStartX=h.scrollLeft,f.wheelStartY=h.scrollTop,f.wheelDX=o,f.wheelDY=l,setTimeout(function(){if(null!=f.wheelStartX){var D=h.scrollLeft-f.wheelStartX,O=h.scrollTop-f.wheelStartY,E=O&&f.wheelDY&&O/f.wheelDY||D&&f.wheelDX&&D/f.wheelDX;f.wheelStartX=f.wheelStartY=null,E&&(St=(St*go+E)/(go+1),++go)}},200)):(f.wheelDX+=o,f.wheelDY+=l))}}ge?St=-.53:Ae?St=15:at?St=-.7:Ye&&(St=-1/3);var Tt=function(e,t){this.ranges=e,this.primIndex=t};Tt.prototype.primary=function(){return this.ranges[this.primIndex]},Tt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],o=e.ranges[t];if(!Re(i.anchor,o.anchor)||!Re(i.head,o.head))return!1}return!0},Tt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ue(ue(this.ranges[t].anchor),ue(this.ranges[t].head));return new Tt(e,this.primIndex)},Tt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Tt.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var o=this.ranges[i];if(X(t,o.from())>=0&&X(e,o.to())<=0)return i}return-1};var Ue=function(e,t){this.anchor=e,this.head=t};function mr(e,t,i){var o=e&&e.options.selectionsMayTouch,l=t[i];t.sort(function(w,b){return X(w.from(),b.from())}),i=z(t,l);for(var u=1;u<t.length;u++){var f=t[u],h=t[u-1],c=X(h.to(),f.from());if(o&&!f.empty()?c>0:c>=0){var d=Gn(h.from(),f.from()),v=or(h.to(),f.to()),g=h.empty()?f.from()==f.head:h.from()==h.head;u<=i&&--i,t.splice(--u,2,new Ue(g?v:d,g?d:v))}}return new Tt(t,i)}function gn(e,t){return new Tt([new Ue(e,t||e)],0)}function Pn(e){return e.text?N(e.from.line+e.text.length-1,ee(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function sl(e,t){if(X(e,t.from)<0)return e;if(X(e,t.to)<=0)return Pn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,o=e.ch;return e.line==t.to.line&&(o+=Pn(t).ch-t.to.ch),N(i,o)}function $n(e,t){for(var i=[],o=0;o<e.sel.ranges.length;o++){var l=e.sel.ranges[o];i.push(new Ue(sl(l.anchor,t),sl(l.head,t)))}return mr(e.cm,i,e.sel.primIndex)}function ea(e,t,i){return e.line==t.line?N(i.line,e.ch-t.ch+i.ch):N(i.line+(e.line-t.line),e.ch)}function Jr(e){e.doc.mode=Tn(e.options,e.doc.modeOption),Ni(e)}function Ni(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,co(e,100),e.state.modeGen++,e.curOp&&lr(e)}function ra(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ee(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function na(e,t,i,o){function l(E){return i?i[E]:null}function u(E,H,_){(function Fa(e,t,i,o){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),qo(e),Wl(e,i);var l=o?o(e):1;l!=e.height&&ir(e,l)})(E,H,_,o),At(E,"change",E,t)}function f(E,H){for(var _=[],re=E;re<H;++re)_.push(new ui(d[re],l(re),o));return _}var h=t.from,c=t.to,d=t.text,v=q(e,h.line),g=q(e,c.line),w=ee(d),b=l(d.length-1),k=c.line-h.line;if(t.full)e.insert(0,f(0,d.length)),e.remove(d.length,e.size-d.length);else if(ra(e,t)){var L=f(0,d.length-1);u(g,g.text,b),k&&e.remove(h.line,k),L.length&&e.insert(h.line,L)}else if(v==g)if(1==d.length)u(v,v.text.slice(0,h.ch)+w+v.text.slice(c.ch),b);else{var D=f(1,d.length-1);D.push(new ui(w+v.text.slice(c.ch),b,o)),u(v,v.text.slice(0,h.ch)+d[0],l(0)),e.insert(h.line+1,D)}else if(1==d.length)u(v,v.text.slice(0,h.ch)+d[0]+g.text.slice(c.ch),l(0)),e.remove(h.line+1,k);else{u(v,v.text.slice(0,h.ch)+d[0],l(0)),u(g,w+g.text.slice(c.ch),b);var O=f(1,d.length-1);k>1&&e.remove(h.line+1,k-1),e.insert(h.line+1,O)}At(e,"change",e,t)}function Wr(e,t,i){!function o(l,u,f){if(l.linked)for(var h=0;h<l.linked.length;++h){var c=l.linked[h];if(c.doc!=u){var d=f&&c.sharedHist;i&&!d||(t(c.doc,d),o(c.doc,l,d))}}}(e,null,!0)}function ul(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Zr(e),Jr(e),ia(e),e.options.direction=t.direction,e.options.lineWrapping||Bl(e),e.options.mode=t.modeOption,lr(e)}function ia(e){("rtl"==e.doc.direction?$:K)(e.display.lineDiv,"CodeMirror-rtl")}function mo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function oa(e,t){var i={from:ue(t.from),to:Pn(t),text:nr(e,t.from,t.to)};return ei(e,i,t.from.line,t.to.line+1),Wr(e,function(o){return ei(o,i,t.from.line,t.to.line+1)},!0),i}function ts(e){for(;e.length&&ee(e).ranges;)e.pop()}function la(e,t,i,o){var l=e.history;l.undone.length=0;var f,h,u=+new Date;if((l.lastOp==o||l.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&l.lastModTime>u-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(f=function fl(e,t){return t?(ts(e.done),ee(e.done)):e.done.length&&!ee(e.done).ranges?ee(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ee(e.done)):void 0}(l,l.lastOp==o)))h=ee(f.changes),0==X(t.from,t.to)&&0==X(t.from,h.to)?h.to=Pn(t):f.changes.push(oa(e,t));else{var c=ee(l.done);for((!c||!c.ranges)&&yo(e.sel,l.done),f={changes:[oa(e,t)],generation:l.generation},l.done.push(f);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(i),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=u,l.lastOp=l.lastSelOp=o,l.lastOrigin=l.lastSelOrigin=t.origin,h||nt(e,"historyAdded")}function yo(e,t){var i=ee(t);i&&i.ranges&&i.equals(e)||t.push(e)}function ei(e,t,i,o){var l=t["spans_"+e.id],u=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,o),function(f){f.markedSpans&&((l||(l=t["spans_"+e.id]={}))[u]=f.markedSpans),++u})}function aa(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function sa(e,t){var i=function hl(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var o=[],l=0;l<t.text.length;++l)o.push(aa(i[l]));return o}(e,t),o=Uo(e,t);if(!i)return o;if(!o)return i;for(var l=0;l<i.length;++l){var u=i[l],f=o[l];if(u&&f)e:for(var h=0;h<f.length;++h){for(var c=f[h],d=0;d<u.length;++d)if(u[d].marker==c.marker)continue e;u.push(c)}else f&&(i[l]=f)}return i}function Bn(e,t,i){for(var o=[],l=0;l<e.length;++l){var u=e[l];if(u.ranges)o.push(i?Tt.prototype.deepCopy.call(u):u);else{var f=u.changes,h=[];o.push({changes:h});for(var c=0;c<f.length;++c){var d=f[c],v=void 0;if(h.push({from:d.from,to:d.to,text:d.text}),t)for(var g in d)(v=g.match(/^spans_(\d+)$/))&&z(t,Number(v[1]))>-1&&(ee(h)[g]=d[g],delete d[g])}}}return o}function cl(e,t,i,o){if(o){var l=e.anchor;if(i){var u=X(t,l)<0;u!=X(i,l)<0?(l=t,t=i):u!=X(t,i)<0&&(t=i)}return new Ue(l,t)}return new Ue(i||t,t)}function dl(e,t,i,o,l){null==l&&(l=e.cm&&(e.cm.display.shift||e.extend)),_t(e,new Tt([cl(e.sel.primary(),t,i,l)],0),o)}function ua(e,t,i){for(var o=[],l=e.cm&&(e.cm.display.shift||e.extend),u=0;u<e.sel.ranges.length;u++)o[u]=cl(e.sel.ranges[u],t[u],null,l);_t(e,mr(e.cm,o,e.sel.primIndex),i)}function Ht(e,t,i,o){var l=e.sel.ranges.slice(0);l[t]=i,_t(e,mr(e.cm,l,e.sel.primIndex),o)}function xo(e,t,i,o){_t(e,gn(t,i),o)}function fa(e,t,i){var o=e.history.done,l=ee(o);l&&l.ranges?(o[o.length-1]=t,mn(e,t,i)):_t(e,t,i)}function _t(e,t,i){mn(e,t,i),function Xs(e,t,i,o){var l=e.history,u=o&&o.origin;i==l.lastSelOp||u&&l.lastSelOrigin==u&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==u||function Ys(e,t,i,o){var l=t.charAt(0);return"*"==l||"+"==l&&i.ranges.length==o.ranges.length&&i.somethingSelected()==o.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,u,ee(l.done),t))?l.done[l.done.length-1]=t:yo(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=u,l.lastSelOp=i,o&&!1!==o.clearRedo&&ts(l.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function mn(e,t,i){(Yt(e,"beforeSelectionChange")||e.cm&&Yt(e.cm,"beforeSelectionChange"))&&(t=function rs(e,t,i){var o={ranges:t.ranges,update:function(l){this.ranges=[];for(var u=0;u<l.length;u++)this.ranges[u]=new Ue(ye(e,l[u].anchor),ye(e,l[u].head))},origin:i&&i.origin};return nt(e,"beforeSelectionChange",e,o),e.cm&&nt(e.cm,"beforeSelectionChange",e.cm,o),o.ranges!=t.ranges?mr(e.cm,o.ranges,o.ranges.length-1):t}(e,t,i));var o=i&&i.bias||(X(t.primary().head,e.sel.primary().head)<0?-1:1);bo(e,ca(e,t,o,!0)),(!i||!1!==i.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Jn(e.cm)}function bo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,cr(e.cm)),At(e,"cursorActivity",e))}function ha(e){bo(e,ca(e,e.sel,null,!1))}function ca(e,t,i,o){for(var l,u=0;u<t.ranges.length;u++){var f=t.ranges[u],h=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[u],c=yn(e,f.anchor,h&&h.anchor,i,o),d=yn(e,f.head,h&&h.head,i,o);(l||c!=f.anchor||d!=f.head)&&(l||(l=t.ranges.slice(0,u)),l[u]=new Ue(c,d))}return l?mr(e.cm,l,t.primIndex):t}function ti(e,t,i,o,l){var u=q(e,t.line);if(u.markedSpans)for(var f=0;f<u.markedSpans.length;++f){var h=u.markedSpans[f],c=h.marker,d="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,v="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==h.from||(d?h.from<=t.ch:h.from<t.ch))&&(null==h.to||(v?h.to>=t.ch:h.to>t.ch))){if(l&&(nt(c,"beforeCursorEnter"),c.explicitlyCleared)){if(u.markedSpans){--f;continue}break}if(!c.atomic)continue;if(i){var g=c.find(o<0?1:-1),w=void 0;if((o<0?v:d)&&(g=da(e,g,-o,g&&g.line==t.line?u:null)),g&&g.line==t.line&&(w=X(g,i))&&(o<0?w<0:w>0))return ti(e,g,t,o,l)}var b=c.find(o<0?-1:1);return(o<0?d:v)&&(b=da(e,b,o,b.line==t.line?u:null)),b?ti(e,b,t,o,l):null}}return t}function yn(e,t,i,o,l){var u=o||1;return ti(e,t,i,u,l)||!l&&ti(e,t,i,u,!0)||ti(e,t,i,-u,l)||!l&&ti(e,t,i,-u,!0)||(e.cantEdit=!0,N(e.first,0))}function da(e,t,i,o){return i<0&&0==t.ch?t.line>e.first?ye(e,N(t.line-1)):null:i>0&&t.ch==(o||q(e,t.line)).text.length?t.line<e.first+e.size-1?N(t.line+1,0):null:new N(t.line,t.ch+i)}function wo(e){e.setSelection(N(e.firstLine(),0),N(e.lastLine()),bt)}function pa(e,t,i){var o={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return o.canceled=!0}};return i&&(o.update=function(l,u,f,h){l&&(o.from=ye(e,l)),u&&(o.to=ye(e,u)),f&&(o.text=f),void 0!==h&&(o.origin=h)}),nt(e,"beforeChange",e,o),e.cm&&nt(e.cm,"beforeChange",e.cm,o),o.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Qr(e,t,i){if(e.cm){if(!e.cm.curOp)return Ot(e.cm,Qr)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(Yt(e,"beforeChange")||e.cm&&Yt(e.cm,"beforeChange"))||(t=pa(e,t,!0))){var o=ji&&!i&&function Go(e,t,i){var o=null;if(e.iter(t.line,i.line+1,function(b){if(b.markedSpans)for(var k=0;k<b.markedSpans.length;++k){var L=b.markedSpans[k].marker;L.readOnly&&(!o||-1==z(o,L))&&(o||(o=[])).push(L)}}),!o)return null;for(var l=[{from:t,to:i}],u=0;u<o.length;++u)for(var f=o[u],h=f.find(0),c=0;c<l.length;++c){var d=l[c];if(!(X(d.to,h.from)<0||X(d.from,h.to)>0)){var v=[c,1],g=X(d.from,h.from),w=X(d.to,h.to);(g<0||!f.inclusiveLeft&&!g)&&v.push({from:d.from,to:h.from}),(w>0||!f.inclusiveRight&&!w)&&v.push({from:h.to,to:d.to}),l.splice.apply(l,v),c+=v.length-3}}return l}(e,t.from,t.to);if(o)for(var l=o.length-1;l>=0;--l)ns(e,{from:o[l].from,to:o[l].to,text:l?[""]:t.text,origin:t.origin});else ns(e,t)}}function ns(e,t){if(1!=t.text.length||""!=t.text[0]||0!=X(t.from,t.to)){var i=$n(e,t);la(e,t,i,e.cm?e.cm.curOp.id:NaN),Fi(e,t,i,Uo(e,t));var o=[];Wr(e,function(l,u){!u&&-1==z(o,l.history)&&(Wi(l.history,t),o.push(l.history)),Fi(l,t,null,Uo(l,t))})}}function xn(e,t,i){var o=e.cm&&e.cm.state.suppressEdits;if(!o||i){for(var u,l=e.history,f=e.sel,h="undo"==t?l.done:l.undone,c="undo"==t?l.undone:l.done,d=0;d<h.length&&(u=h[d],!(i?u.ranges&&!u.equals(e.sel):!u.ranges));d++);if(d!=h.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(u=h.pop()).ranges){if(o)return void h.push(u);break}if(yo(u,c),i&&!u.equals(e.sel))return void _t(e,u,{clearRedo:!1});f=u}var v=[];yo(f,c),c.push({changes:v,generation:l.generation}),l.generation=u.generation||++l.maxGeneration;for(var g=Yt(e,"beforeChange")||e.cm&&Yt(e.cm,"beforeChange"),w=function(L){var D=u.changes[L];if(D.origin=t,g&&!pa(e,D,!1))return h.length=0,{};v.push(oa(e,D));var O=L?$n(e,D):ee(h);Fi(e,D,O,sa(e,D)),!L&&e.cm&&e.cm.scrollIntoView({from:D.from,to:Pn(D)});var E=[];Wr(e,function(H,_){!_&&-1==z(E,H.history)&&(Wi(H.history,D),E.push(H.history)),Fi(H,D,null,sa(H,D))})},b=u.changes.length-1;b>=0;--b){var k=w(b);if(k)return k.v}}}}function va(e,t){if(0!=t&&(e.first+=t,e.sel=new Tt(T(e.sel.ranges,function(l){return new Ue(N(l.anchor.line+t,l.anchor.ch),N(l.head.line+t,l.head.ch))}),e.sel.primIndex),e.cm)){lr(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,o=i.viewFrom;o<i.viewTo;o++)dn(e.cm,o,"gutter")}}function Fi(e,t,i,o){if(e.cm&&!e.cm.curOp)return Ot(e.cm,Fi)(e,t,i,o);if(t.to.line<e.first)va(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var l=t.text.length-1-(e.first-t.from.line);va(e,l),t={from:N(e.first,0),to:N(t.to.line+l,t.to.ch),text:[ee(t.text)],origin:t.origin}}var u=e.lastLine();t.to.line>u&&(t={from:t.from,to:N(u,q(e,u).text.length),text:[t.text[0]],origin:t.origin}),t.removed=nr(e,t.from,t.to),i||(i=$n(e,t)),e.cm?function is(e,t,i){var o=e.doc,l=e.display,u=t.from,f=t.to,h=!1,c=u.line;e.options.lineWrapping||(c=p(Ar(q(o,u.line))),o.iter(c,f.line+1,function(b){if(b==l.maxLine)return h=!0,!0})),o.sel.contains(t.from,t.to)>-1&&cr(e),na(o,t,i,jt(e)),e.options.lineWrapping||(o.iter(c,u.line+t.text.length,function(b){var k=Yo(b);k>l.maxLineLength&&(l.maxLine=b,l.maxLineLength=k,l.maxLineChanged=!0,h=!1)}),h&&(e.curOp.updateMaxLine=!0)),function Ds(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,o=t-1;o>i;o--){var l=q(e,o).stateAfter;if(l&&(!(l instanceof Dn)||o+l.lookAhead<t)){i=o+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}(o,u.line),co(e,400);var d=t.text.length-(f.line-u.line)-1;t.full?lr(e):u.line!=f.line||1!=t.text.length||ra(e.doc,t)?lr(e,u.line,f.line+1,d):dn(e,u.line,"text");var v=Yt(e,"changes"),g=Yt(e,"change");if(g||v){var w={from:u,to:f,text:t.text,removed:t.removed,origin:t.origin};g&&At(e,"change",e,w),v&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(w)}e.display.selForContextMenu=null}(e.cm,t,o):na(e,t,o),mn(e,i,bt),e.cantEdit&&yn(e,N(e.firstLine(),0))&&(e.cantEdit=!1)}}function Vr(e,t,i,o,l){var u;o||(o=i),X(o,i)<0&&(i=(u=[o,i])[0],o=u[1]),"string"==typeof t&&(t=e.splitLines(t)),Qr(e,{from:i,to:o,text:t,origin:l})}function Oi(e,t,i,o){i<e.line?e.line+=o:t<e.line&&(e.line=t,e.ch=0)}function Ei(e,t,i,o){for(var l=0;l<e.length;++l){var u=e[l],f=!0;if(u.ranges){u.copied||((u=e[l]=u.deepCopy()).copied=!0);for(var h=0;h<u.ranges.length;h++)Oi(u.ranges[h].anchor,t,i,o),Oi(u.ranges[h].head,t,i,o)}else{for(var c=0;c<u.changes.length;++c){var d=u.changes[c];if(i<d.from.line)d.from=N(d.from.line+o,d.from.ch),d.to=N(d.to.line+o,d.to.ch);else if(t<=d.to.line){f=!1;break}}f||(e.splice(0,l+1),l=0)}}}function Wi(e,t){var i=t.from.line,o=t.to.line,l=t.text.length-(o-i)-1;Ei(e.done,i,o,l),Ei(e.undone,i,o,l)}function Hi(e,t,i,o){var l=t,u=t;return"number"==typeof t?u=q(e,Xi(e,t)):l=p(t),null==l?null:(o(u,l)&&e.cm&&dn(e.cm,l,i),u)}function Co(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function Ii(e){this.children=e;for(var t=0,i=0,o=0;o<e.length;++o){var l=e[o];t+=l.chunkSize(),i+=l.height,l.parent=this}this.size=t,this.height=i,this.parent=null}Ue.prototype.from=function(){return Gn(this.anchor,this.head)},Ue.prototype.to=function(){return or(this.anchor,this.head)},Ue.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Co.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,o=e+t;i<o;++i){var l=this.lines[i];this.height-=l.height,Oa(l),At(l,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var o=0;o<t.length;++o)t[o].parent=this},iterN:function(e,t,i){for(var o=e+t;e<o;++e)if(i(this.lines[e]))return!0}},Ii.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var o=this.children[i],l=o.chunkSize();if(e<l){var u=Math.min(t,l-e),f=o.height;if(o.removeInner(e,u),this.height-=f-o.height,l==u&&(this.children.splice(i--,1),o.parent=null),0==(t-=u))break;e=0}else e-=l}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Co))){var h=[];this.collapse(h),this.children=[new Co(h)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var o=0;o<this.children.length;++o){var l=this.children[o],u=l.chunkSize();if(e<=u){if(l.insertInner(e,t,i),l.lines&&l.lines.length>50){for(var f=l.lines.length%25+25,h=f;h<l.lines.length;){var c=new Co(l.lines.slice(h,h+=25));l.height-=c.height,this.children.splice(++o,0,c),c.parent=this}l.lines=l.lines.slice(0,f),this.maybeSpill()}break}e-=u}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var i=new Ii(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=i.size,e.height-=i.height;var l=z(e.parent.children,e);e.parent.children.splice(l+1,0,i)}else{var o=new Ii(e.children);o.parent=e,e.children=[o,i],e=o}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var o=0;o<this.children.length;++o){var l=this.children[o],u=l.chunkSize();if(e<u){var f=Math.min(t,u-e);if(l.iterN(e,f,i))return!0;if(0==(t-=f))break;e=0}else e-=u}}};var Lr=function(e,t,i){if(i)for(var o in i)i.hasOwnProperty(o)&&(this[o]=i[o]);this.doc=e,this.node=t};function ri(e,t,i){an(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&bi(e,i)}Lr.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,o=p(i);if(null!=o&&t){for(var l=0;l<t.length;++l)t[l]==this&&t.splice(l--,1);t.length||(i.widgets=null);var u=fi(this);ir(i,Math.max(0,i.height-u)),e&&(Rt(e,function(){ri(e,i,-u),dn(e,o,"widget")}),At(e,"lineWidgetCleared",e,this,o))}},Lr.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,o=this.line;this.height=null;var l=fi(this)-t;l&&(Rr(this.doc,o)||ir(o,o.height+l),i&&Rt(i,function(){i.curOp.forceUpdate=!0,ri(i,o,l),At(i,"lineWidgetChanged",i,e,p(o))}))},tr(Lr);var os=0,bn=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++os};function Pi(e,t,i,o,l){if(o&&o.shared)return function js(e,t,i,o,l){(o=F(o)).shared=!1;var u=[Pi(e,t,i,o,l)],f=u[0],h=o.widgetNode;return Wr(e,function(c){h&&(o.widgetNode=h.cloneNode(!0)),u.push(Pi(c,ye(c,t),ye(c,i),o,l));for(var d=0;d<c.linked.length;++d)if(c.linked[d].isParent)return;f=ee(u)}),new ko(u,f)}(e,t,i,o,l);if(e.cm&&!e.cm.curOp)return Ot(e.cm,Pi)(e,t,i,o,l);var u=new bn(e,l),f=X(t,i);if(o&&F(o,u,!1),f>0||0==f&&!1!==u.clearWhenEmpty)return u;if(u.replacedWith&&(u.collapsed=!0,u.widgetNode=tt("span",[u.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||u.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(u.widgetNode.insertLeft=!0)),u.collapsed){if(Zo(e,t.line,t,i,u)||t.line!=i.line&&Zo(e,i.line,t,i,u))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ns(){vr=!0}()}u.addToHistory&&la(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var d,h=t.line,c=e.cm;if(e.iter(h,i.line+1,function(g){c&&u.collapsed&&!c.options.lineWrapping&&Ar(g)==c.display.maxLine&&(d=!0),u.collapsed&&h!=t.line&&ir(g,0),function Aa(e,t,i){var o=i&&window.WeakSet&&(i.markedSpans||(i.markedSpans=new WeakSet));o&&o.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],o&&o.add(e.markedSpans)),t.marker.attachLine(e)}(g,new _o(u,h==t.line?t.ch:null,h==i.line?i.ch:null),e.cm&&e.cm.curOp),++h}),u.collapsed&&e.iter(t.line,i.line+1,function(g){Rr(e,g)&&ir(g,0)}),u.clearOnEnter&&te(u,"beforeCursorEnter",function(){return u.clear()}),u.readOnly&&(function As(){ji=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),u.collapsed&&(u.id=++os,u.atomic=!0),c){if(d&&(c.curOp.updateMaxLine=!0),u.collapsed)lr(c,t.line,i.line+1);else if(u.className||u.startStyle||u.endStyle||u.css||u.attributes||u.title)for(var v=t.line;v<=i.line;v++)dn(c,v,"text");u.atomic&&ha(c.doc),At(c,"markerAdded",c,u)}return u}bn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Qn(e),Yt(this,"clear")){var i=this.find();i&&At(this,"clear",i.from,i.to)}for(var o=null,l=null,u=0;u<this.lines.length;++u){var f=this.lines[u],h=Ji(f.markedSpans,this);e&&!this.collapsed?dn(e,p(f),"text"):e&&(null!=h.to&&(l=p(f)),null!=h.from&&(o=p(f))),f.markedSpans=El(f.markedSpans,h),null==h.from&&this.collapsed&&!Rr(this.doc,f)&&e&&ir(f,jn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var d=Ar(this.lines[c]),v=Yo(d);v>e.display.maxLineLength&&(e.display.maxLine=d,e.display.maxLineLength=v,e.display.maxLineChanged=!0)}null!=o&&e&&this.collapsed&&lr(e,o,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ha(e.doc)),e&&At(e,"markerCleared",e,this,o,l),t&&Vn(e),this.parent&&this.parent.clear()}},bn.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,o,l=0;l<this.lines.length;++l){var u=this.lines[l],f=Ji(u.markedSpans,this);if(null!=f.from&&(i=N(t?u:p(u),f.from),-1==e))return i;if(null!=f.to&&(o=N(t?u:p(u),f.to),1==e))return o}return i&&{from:i,to:o}},bn.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,o=this.doc.cm;!t||!o||Rt(o,function(){var l=t.line,u=p(t.line),f=Vo(o,u);if(f&&(ql(f),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!Rr(i.doc,l)&&null!=i.height){var h=i.height;i.height=null;var c=fi(i)-h;c&&ir(l,l.height+c)}At(o,"markerChanged",o,e)})},bn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==z(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bn.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},tr(bn);var ko=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function Qt(e){return e.findMarks(N(e.first,0),e.clipPos(N(e.lastLine())),function(t){return t.parent})}function Js(e){for(var t=function(o){var l=e[o],u=[l.primary.doc];Wr(l.primary.doc,function(c){return u.push(c)});for(var f=0;f<l.markers.length;f++){var h=l.markers[f];-1==z(u,h.doc)&&(h.parent=null,l.markers.splice(f--,1))}},i=0;i<e.length;i++)t(i)}ko.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();At(this,"clear")}},ko.prototype.find=function(e,t){return this.primary.find(e,t)},tr(ko);var Qs=0,ar=function(e,t,i,o,l){if(!(this instanceof ar))return new ar(e,t,i,o,l);null==i&&(i=0),Ii.call(this,[new Co([new ui("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var u=N(i,0);this.sel=gn(u),this.history=new mo(null),this.id=++Qs,this.modeOption=t,this.lineSep=o,this.direction="rtl"==l?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),na(this,{from:u,to:u,text:e}),_t(this,gn(u),bt)};ar.prototype=Te(Ii.prototype,{constructor:ar,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,o=0;o<t.length;++o)i+=t[o].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ln(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Wt(function(e){var t=N(this.first,0),i=this.first+this.size-1;Qr(this,{from:t,to:N(i,q(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&pn(this.cm,0,0),_t(this,gn(t),bt)}),replaceRange:function(e,t,i,o){Vr(this,e,t=ye(this,t),i=i?ye(this,i):t,o)},getRange:function(e,t,i){var o=nr(this,ye(this,e),ye(this,t));return!1===i?o:o.join(""===i?"":i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(W(this,e))return q(this,e)},getLineNumber:function(e){return p(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=q(this,e)),Ar(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ye(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Wt(function(e,t,i){xo(this,ye(this,"number"==typeof e?N(e,t||0):e),null,i)}),setSelection:Wt(function(e,t,i){xo(this,ye(this,e),ye(this,t||e),i)}),extendSelection:Wt(function(e,t,i){dl(this,ye(this,e),t&&ye(this,t),i)}),extendSelections:Wt(function(e,t){ua(this,Al(this,e),t)}),extendSelectionsBy:Wt(function(e,t){ua(this,Al(this,T(this.sel.ranges,e)),t)}),setSelections:Wt(function(e,t,i){if(e.length){for(var o=[],l=0;l<e.length;l++)o[l]=new Ue(ye(this,e[l].anchor),ye(this,e[l].head||e[l].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),_t(this,mr(this.cm,o,t),i)}}),addSelection:Wt(function(e,t,i){var o=this.sel.ranges.slice(0);o.push(new Ue(ye(this,e),ye(this,t||e))),_t(this,mr(this.cm,o,o.length-1),i)}),getSelection:function(e){for(var i,t=this.sel.ranges,o=0;o<t.length;o++){var l=nr(this,t[o].from(),t[o].to());i=i?i.concat(l):l}return!1===e?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,o=0;o<i.length;o++){var l=nr(this,i[o].from(),i[o].to());!1!==e&&(l=l.join(e||this.lineSeparator())),t[o]=l}return t},replaceSelection:function(e,t,i){for(var o=[],l=0;l<this.sel.ranges.length;l++)o[l]=e;this.replaceSelections(o,t,i||"+input")},replaceSelections:Wt(function(e,t,i){for(var o=[],l=this.sel,u=0;u<l.ranges.length;u++){var f=l.ranges[u];o[u]={from:f.from(),to:f.to(),text:this.splitLines(e[u]),origin:i}}for(var h=t&&"end"!=t&&function ta(e,t,i){for(var o=[],l=N(e.first,0),u=l,f=0;f<t.length;f++){var h=t[f],c=ea(h.from,l,u),d=ea(Pn(h),l,u);if(l=h.to,u=d,"around"==i){var v=e.sel.ranges[f],g=X(v.head,v.anchor)<0;o[f]=new Ue(g?d:c,g?c:d)}else o[f]=new Ue(c,c)}return new Tt(o,e.sel.primIndex)}(this,o,t),c=o.length-1;c>=0;c--)Qr(this,o[c]);h?fa(this,h):this.cm&&Jn(this.cm)}),undo:Wt(function(){xn(this,"undo")}),redo:Wt(function(){xn(this,"redo")}),undoSelection:Wt(function(){xn(this,"undo",!0)}),redoSelection:Wt(function(){xn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,o=0;o<e.done.length;o++)e.done[o].ranges||++t;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){var e=this;this.history=new mo(this.history),Wr(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Bn(this.history.done),undone:Bn(this.history.undone)}},setHistory:function(e){var t=this.history=new mo(this.history);t.done=Bn(e.done.slice(0),null,!0),t.undone=Bn(e.undone.slice(0),null,!0)},setGutterMarker:Wt(function(e,t,i){return Hi(this,e,"gutter",function(o){var l=o.gutterMarkers||(o.gutterMarkers={});return l[t]=i,!i&&Bt(l)&&(o.gutterMarkers=null),!0})}),clearGutter:Wt(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&Hi(t,i,"gutter",function(){return i.gutterMarkers[e]=null,Bt(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(W(this,e)&&(t=e,e=q(this,e))))return null}else if(null==(t=p(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Wt(function(e,t,i){return Hi(this,e,"gutter"==t?"gutter":"class",function(o){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(o[l]){if(y(i).test(o[l]))return!1;o[l]+=" "+i}else o[l]=i;return!0})}),removeLineClass:Wt(function(e,t,i){return Hi(this,e,"gutter"==t?"gutter":"class",function(o){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",u=o[l];if(!u)return!1;if(null==i)o[l]=null;else{var f=u.match(y(i));if(!f)return!1;var h=f.index+f[0].length;o[l]=u.slice(0,f.index)+(f.index&&h!=u.length?" ":"")+u.slice(h)||null}return!0})}),addLineWidget:Wt(function(e,t,i){return function So(e,t,i,o){var l=new Lr(e,i,o),u=e.cm;return u&&l.noHScroll&&(u.display.alignWidgets=!0),Hi(e,t,"widget",function(f){var h=f.widgets||(f.widgets=[]);if(null==l.insertAt?h.push(l):h.splice(Math.min(h.length,Math.max(0,l.insertAt)),0,l),l.line=f,u&&!Rr(e,f)){var c=an(f)<e.scrollTop;ir(f,f.height+fi(l)),c&&bi(u,l.height),u.curOp.forceUpdate=!0}return!0}),u&&At(u,"lineWidgetAdded",u,l,"number"==typeof t?t:p(t)),l}(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Pi(this,ye(this,e),ye(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Pi(this,e=ye(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=q(this,(e=ye(this,e)).line).markedSpans;if(i)for(var o=0;o<i.length;++o){var l=i[o];(null==l.from||l.from<=e.ch)&&(null==l.to||l.to>=e.ch)&&t.push(l.marker.parent||l.marker)}return t},findMarks:function(e,t,i){e=ye(this,e),t=ye(this,t);var o=[],l=e.line;return this.iter(e.line,t.line+1,function(u){var f=u.markedSpans;if(f)for(var h=0;h<f.length;h++){var c=f[h];!(null!=c.to&&l==e.line&&e.ch>=c.to||null==c.from&&l!=e.line||null!=c.from&&l==t.line&&c.from>=t.ch)&&(!i||i(c.marker))&&o.push(c.marker.parent||c.marker)}++l}),o},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var o=0;o<i.length;++o)null!=i[o].from&&e.push(i[o].marker)}),e},posFromIndex:function(e){var t,i=this.first,o=this.lineSeparator().length;return this.iter(function(l){var u=l.text.length+o;if(u>e)return t=e,!0;e-=u,++i}),ye(this,N(i,t))},indexFromPos:function(e){var t=(e=ye(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(o){t+=o.text.length+i}),t},copy:function(e){var t=new ar(ln(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var o=new ar(ln(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:e.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function ls(e,t){for(var i=0;i<t.length;i++){var o=t[i],l=o.find(),u=e.clipPos(l.from),f=e.clipPos(l.to);if(X(u,f)){var h=Pi(e,u,f,o.primary,o.primary.type);o.markers.push(h),h.parent=o}}}(o,Qt(this)),o},unlinkDoc:function(e){if(e instanceof Ie&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Js(Qt(this));break}if(e.history==this.history){var o=[e.id];Wr(e,function(l){return o.push(l.id)},!0),e.history=new mo(null),e.history.done=Bn(this.history.done,o),e.history.undone=Bn(this.history.undone,o)}},iterLinkedDocs:function(e){Wr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):yr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Wt(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function Zs(e){Rt(e,function(){ia(e),lr(e)})}(this.cm))})}),ar.prototype.eachLine=ar.prototype.iter;var ga=0;function as(e){var t=this;if(us(t),!Ee(t,e)&&!zt(t.display,e)){Mt(e),ge&&(ga=+new Date);var i=sr(t,e,!0),o=e.dataTransfer.files;if(i&&!t.isReadOnly())if(o&&o.length&&window.FileReader&&window.File)for(var l=o.length,u=Array(l),f=0,h=function(){++f==l&&Ot(t,function(){var b={from:i=ye(t.doc,i),to:i,text:t.doc.splitLines(u.filter(function(k){return null!=k}).join(t.doc.lineSeparator())),origin:"paste"};Qr(t.doc,b),fa(t.doc,gn(ye(t.doc,i),ye(t.doc,Pn(b))))})()},c=function(b,k){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,b.type))h();else{var L=new FileReader;L.onerror=function(){return h()},L.onload=function(){var D=L.result;/[\x00-\x08\x0e-\x1f]{2}/.test(D)||(u[k]=D),h()},L.readAsText(b)}},d=0;d<o.length;d++)c(o[d],d);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var v=e.dataTransfer.getData("Text");if(v){var g;if(t.state.draggingText&&!t.state.draggingText.copy&&(g=t.listSelections()),mn(t.doc,gn(i,i)),g)for(var w=0;w<g.length;++w)Vr(t.doc,"",g[w].anchor,g[w].head,"drag");t.replaceSelection(v,"around","paste"),t.display.input.focus()}}catch{}}}}function us(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function fs(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),i=[],o=0;o<t.length;o++){var l=t[o].CodeMirror;l&&i.push(l)}i.length&&i[0].operation(function(){for(var u=0;u<i.length;u++)e(i[u])})}}var wn=!1;function To(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Vt={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Mo=0;Mo<10;Mo++)Vt[Mo+48]=Vt[Mo+96]=String(Mo);for(var vl=65;vl<=90;vl++)Vt[vl]=String.fromCharCode(vl);for(var $r=1;$r<=12;$r++)Vt[$r+111]=Vt[$r+63235]="F"+$r;var en={};function hs(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var i,o,l,u,f=0;f<t.length-1;f++){var h=t[f];if(/^(cmd|meta|m)$/i.test(h))u=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);l=!0}}return i&&(e="Alt-"+e),o&&(e="Ctrl-"+e),u&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function cs(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==o){delete e[i];continue}for(var l=T(i.split(" "),hs),u=0;u<l.length;u++){var f=void 0,h=void 0;u==l.length-1?(h=l.join(" "),f=o):(h=l.slice(0,u+1).join(" "),f="...");var c=t[h];if(c){if(c!=f)throw new Error("Inconsistent bindings for "+h)}else t[h]=f}delete e[i]}for(var d in t)e[d]=t[d];return e}function Cn(e,t,i,o){var l=(t=Bi(t)).call?t.call(e,o):t[e];if(!1===l)return"nothing";if("..."===l)return"multi";if(null!=l&&i(l))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Cn(e,t.fallthrough,i,o);for(var u=0;u<t.fallthrough.length;u++){var f=Cn(e,t.fallthrough[u],i,o);if(f)return f}}}function ni(e){var t="string"==typeof e?e:Vt[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function gl(e,t,i){var o=e;return t.altKey&&"Alt"!=o&&(e="Alt-"+e),(M?t.metaKey:t.ctrlKey)&&"Ctrl"!=o&&(e="Ctrl-"+e),(M?t.ctrlKey:t.metaKey)&&"Mod"!=o&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=o&&(e="Shift-"+e),e}function ml(e,t){if(pe&&34==e.keyCode&&e.char)return!1;var i=Vt[e.keyCode];return null!=i&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(i=e.code),gl(i,e,t))}function Bi(e){return"string"==typeof e?en[e]:e}function zi(e,t){for(var i=e.doc.sel.ranges,o=[],l=0;l<i.length;l++){for(var u=t(i[l]);o.length&&X(u.from,ee(o).to)<=0;){var f=o.pop();if(X(f.from,u.from)<0){u.from=f.from;break}}o.push(u)}Rt(e,function(){for(var h=o.length-1;h>=0;h--)Vr(e.doc,"",o[h].from,o[h].to,"+delete");Jn(e)})}function ii(e,t,i){var o=st(e.text,t+i,i);return o<0||o>e.text.length?null:o}function yl(e,t,i){var o=ii(e,t.ch,i);return null==o?null:new N(t.line,o,i<0?"after":"before")}function ma(e,t,i,o,l){if(e){"rtl"==t.doc.direction&&(l=-l);var u=we(i,t.doc.direction);if(u){var d,f=l<0?ee(u):u[0],c=l<0==(1==f.level)?"after":"before";if(f.level>0||"rtl"==t.doc.direction){var v=hi(t,i),g=Kr(t,v,d=l<0?i.text.length-1:0).top;d=Ct(function(w){return Kr(t,v,w).top==g},l<0==(1==f.level)?f.from:f.to-1,d),"before"==c&&(d=ii(i,d,1))}else d=l<0?f.to:f.from;return new N(o,d,c)}}return new N(o,l<0?i.text.length:0,l<0?"before":"after")}en.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},en.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},en.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},en.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},en.default=Pe?en.macDefault:en.pcDefault;var zn={selectAll:wo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),bt)},killLine:function(e){return zi(e,function(t){if(t.empty()){var i=q(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:N(t.head.line+1,0)}:{from:t.head,to:N(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return zi(e,function(t){return{from:N(t.from().line,0),to:ye(e.doc,N(t.to().line+1,0))}})},delLineLeft:function(e){return zi(e,function(t){return{from:N(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return zi(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){return zi(e,function(t){var i=e.charCoords(t.head,"div").top+5,o=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:o}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(N(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(N(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ps(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ri(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function $s(e,t){var i=q(e.doc,t),o=function An(e){for(var t;t=Ko(e);)e=t.find(1,!0).line;return e}(i);return o!=i&&(t=p(o)),ma(!0,e,i,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},be)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},be)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,o=e.coordsChar({left:0,top:i},"div");return o.ch<e.getLine(o.line).search(/\S/)?Ri(e,t.head):o},be)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),o=e.options.tabSize,l=0;l<i.length;l++){var u=i[l].from(),f=A(e.getLine(u.line),u.ch,o);t.push(Z(o-f%o))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Rt(e,function(){for(var t=e.listSelections(),i=[],o=0;o<t.length;o++)if(t[o].empty()){var l=t[o].head,u=q(e.doc,l.line).text;if(u)if(l.ch==u.length&&(l=new N(l.line,l.ch-1)),l.ch>0)l=new N(l.line,l.ch+1),e.replaceRange(u.charAt(l.ch-1)+u.charAt(l.ch-2),N(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var f=q(e.doc,l.line-1).text;f&&(l=new N(l.line,1),e.replaceRange(u.charAt(0)+e.doc.lineSeparator()+f.charAt(f.length-1),N(l.line-1,f.length-1),l,"+transpose"))}i.push(new Ue(l,l))}e.setSelections(i)})},newlineAndIndent:function(e){return Rt(e,function(){for(var t=e.listSelections(),i=t.length-1;i>=0;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var o=0;o<t.length;o++)e.indentLine(t[o].from().line,null,!0);Jn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ps(e,t){var i=q(e.doc,t),o=Ar(i);return o!=i&&(t=p(o)),ma(!0,e,o,t,1)}function Ri(e,t){var i=ps(e,t.line),o=q(e.doc,i.line),l=we(o,e.doc.direction);if(!l||0==l[0].level){var u=Math.max(i.ch,o.text.search(/\S/));return N(i.line,t.line==i.line&&t.ch<=u&&t.ch?0:u,i.sticky)}return i}function Do(e,t,i){if("string"==typeof t&&!(t=zn[t]))return!1;e.display.input.ensurePolled();var o=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),l=t(e)!=Le}finally{e.display.shift=o,e.state.suppressEdits=!1}return l}var eu=new ie;function oi(e,t,i,o){var l=e.state.keySeq;if(l){if(ni(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:eu.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),ya(e,l+" "+t,i,o))return!0}return ya(e,t,i,o)}function ya(e,t,i,o){var l=function vs(e,t,i){for(var o=0;o<e.state.keyMaps.length;o++){var l=Cn(t,e.state.keyMaps[o],i,e);if(l)return l}return e.options.extraKeys&&Cn(t,e.options.extraKeys,i,e)||Cn(t,e.options.keyMap,i,e)}(e,t,o);return"multi"==l&&(e.state.keySeq=t),"handled"==l&&At(e,"keyHandled",e,t,i),("handled"==l||"multi"==l)&&(Mt(i),En(e)),!!l}function gs(e,t){var i=ml(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?oi(e,"Shift-"+i,t,function(o){return Do(e,o,!0)})||oi(e,i,t,function(o){if("string"==typeof o?/^go[A-Z]/.test(o):o.motion)return Do(e,o)}):oi(e,i,t,function(o){return Do(e,o)}))}var xl=null;function ys(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=m(),Ee(t,e)))){ge&&ke<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var o=gs(t,e);pe&&(xl=o?i:null,!o&&88==i&&!rn&&(Pe?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),Ae&&!Pe&&!o&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==i&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function xa(e){var t=e.display.lineDiv;function i(o){(18==o.keyCode||!o.altKey)&&(K(t,"CodeMirror-crosshair"),rt(document,"keyup",i),rt(document,"mouseover",i))}$(t,"CodeMirror-crosshair"),te(document,"keyup",i),te(document,"mouseover",i)}(t)}}function _i(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ee(this,e)}function Ui(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||zt(t.display,e)||Ee(t,e)||e.ctrlKey&&!e.altKey||Pe&&e.metaKey)){var i=e.keyCode,o=e.charCode;if(pe&&i==xl)return xl=null,void Mt(e);if(!pe||e.which&&!(e.which<10)||!gs(t,e)){var l=String.fromCharCode(o??i);"\b"!=l&&(function ms(e,t,i){return oi(e,"'"+i+"'",t,function(o){return Do(e,o,!0)})}(t,e,l)||t.display.input.onKeyPress(e))}}}var Ao,No,bl=function(e,t,i){this.time=e,this.pos=t,this.button=i};function xs(e){var t=this,i=t.display;if(!(Ee(t,e)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=e.shiftKey,zt(i,e))return void(Ze||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100)));if(!Rn(t,e)){var o=sr(t,e),l=dr(e),u=o?function ru(e,t){var i=+new Date;return No&&No.compare(i,e,t)?(Ao=No=null,"triple"):Ao&&Ao.compare(i,e,t)?(No=new bl(i,e,t),Ao=null,"double"):(Ao=new bl(i,e,t),No=null,"single")}(o,l):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),(!o||!function bs(e,t,i,o,l){var u="Click";return"double"==o?u="Double"+u:"triple"==o&&(u="Triple"+u),oi(e,gl(u=(1==t?"Left":2==t?"Middle":"Right")+u,l),l,function(f){if("string"==typeof f&&(f=zn[f]),!f)return!1;var h=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h=f(e,i)!=Le}finally{e.state.suppressEdits=!1}return h})}(t,l,o,u,e))&&(1==l?o?function iu(e,t,i,o){ge?setTimeout(Q(fo,e),0):e.curOp.focus=m();var f,l=function nu(e,t,i){var o=e.getOption("configureMouse"),l=o?o(e,t,i):{};return null==l.unit&&(l.unit=(kt?i.shiftKey&&i.metaKey:i.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==l.extend||e.doc.extend)&&(l.extend=e.doc.extend||i.shiftKey),null==l.addNew&&(l.addNew=Pe?i.metaKey:i.ctrlKey),null==l.moveOnDrag&&(l.moveOnDrag=!(Pe?i.altKey:i.ctrlKey)),l}(e,i,o),u=e.doc.sel;e.options.dragDrop&&Ml&&!e.isReadOnly()&&"single"==i&&(f=u.contains(t))>-1&&(X((f=u.ranges[f]).from(),t)<0||t.xRel>0)&&(X(f.to(),t)>0||t.xRel<0)?function ws(e,t,i,o){var l=e.display,u=!1,f=Ot(e,function(d){Ze&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:nl(e)),rt(l.wrapper.ownerDocument,"mouseup",f),rt(l.wrapper.ownerDocument,"mousemove",h),rt(l.scroller,"dragstart",c),rt(l.scroller,"drop",f),u||(Mt(d),o.addNew||dl(e.doc,i,null,null,o.extend),Ze&&!Ye||ge&&9==ke?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),h=function(d){u=u||Math.abs(t.clientX-d.clientX)+Math.abs(t.clientY-d.clientY)>=10},c=function(){return u=!0};Ze&&(l.scroller.draggable=!0),e.state.draggingText=f,f.copy=!o.moveOnDrag,te(l.wrapper.ownerDocument,"mouseup",f),te(l.wrapper.ownerDocument,"mousemove",h),te(l.scroller,"dragstart",c),te(l.scroller,"drop",f),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}(e,o,t,l):function Cs(e,t,i,o){ge&&nl(e);var l=e.display,u=e.doc;Mt(t);var f,h,c=u.sel,d=c.ranges;if(o.addNew&&!o.extend?(h=u.sel.contains(i),f=h>-1?d[h]:new Ue(i,i)):(f=u.sel.primary(),h=u.sel.primIndex),"rectangle"==o.unit)o.addNew||(f=new Ue(i,i)),i=sr(e,t,!0,!0),h=-1;else{var v=wl(e,i,o.unit);f=o.extend?cl(f,v.anchor,v.head,o.extend):v}o.addNew?-1==h?(h=d.length,_t(u,mr(e,d.concat([f]),h),{scroll:!1,origin:"*mouse"})):d.length>1&&d[h].empty()&&"char"==o.unit&&!o.extend?(_t(u,mr(e,d.slice(0,h).concat(d.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),c=u.sel):Ht(u,h,f,er):(h=0,_t(u,new Tt([f],0),er),c=u.sel);var g=i;var b=l.wrapper.getBoundingClientRect(),k=0;function L(H){var _=++k,re=sr(e,H,!0,"rectangle"==o.unit);if(re)if(0!=X(re,g)){e.curOp.focus=m(),function w(H){if(0!=X(g,H))if(g=H,"rectangle"==o.unit){for(var _=[],re=e.options.tabSize,j=A(q(u,i.line).text,i.ch,re),xe=A(q(u,H.line).text,H.ch,re),Me=Math.min(j,xe),Ne=Math.max(j,xe),Oe=Math.min(i.line,H.line),Je=Math.min(e.lastLine(),Math.max(i.line,H.line));Oe<=Je;Oe++){var Be=q(u,Oe).text,De=wt(Be,Me,re);Me==Ne?_.push(new Ue(N(Oe,De),N(Oe,De))):Be.length>De&&_.push(new Ue(N(Oe,De),N(Oe,wt(Be,Ne,re))))}_.length||_.push(new Ue(i,i)),_t(u,mr(e,c.ranges.slice(0,h).concat(_),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(H)}else{var ot,We=f,qe=wl(e,H,o.unit),ct=We.anchor;X(qe.anchor,ct)>0?(ot=qe.head,ct=Gn(We.from(),qe.anchor)):(ot=qe.anchor,ct=or(We.to(),qe.head));var Fe=c.ranges.slice(0);Fe[h]=function ou(e,t){var i=t.anchor,o=t.head,l=q(e.doc,i.line);if(0==X(i,o)&&i.sticky==o.sticky)return t;var u=we(l);if(!u)return t;var f=ce(u,i.ch,i.sticky),h=u[f];if(h.from!=i.ch&&h.to!=i.ch)return t;var d,c=f+(h.from==i.ch==(1!=h.level)?0:1);if(0==c||c==u.length)return t;if(o.line!=i.line)d=(o.line-i.line)*("ltr"==e.doc.direction?1:-1)>0;else{var v=ce(u,o.ch,o.sticky),g=v-f||(o.ch-i.ch)*(1==h.level?-1:1);d=v==c-1||v==c?g<0:g>0}var w=u[c+(d?-1:0)],b=d==(1==w.level),k=b?w.from:w.to,L=b?"after":"before";return i.ch==k&&i.sticky==L?t:new Ue(new N(i.line,k,L),o)}(e,new Ue(ye(u,ct),ot)),_t(u,mr(e,Fe,h),er)}}(re);var j=yi(l,u);(re.line>=j.to||re.line<j.from)&&setTimeout(Ot(e,function(){k==_&&L(H)}),150)}else{var xe=H.clientY<b.top?-20:H.clientY>b.bottom?20:0;xe&&setTimeout(Ot(e,function(){k==_&&(l.scroller.scrollTop+=xe,L(H))}),50)}}function D(H){e.state.selectingText=!1,k=1/0,H&&(Mt(H),l.input.focus()),rt(l.wrapper.ownerDocument,"mousemove",O),rt(l.wrapper.ownerDocument,"mouseup",E),u.history.lastSelOrigin=null}var O=Ot(e,function(H){0!==H.buttons&&dr(H)?L(H):D(H)}),E=Ot(e,D);e.state.selectingText=E,te(l.wrapper.ownerDocument,"mousemove",O),te(l.wrapper.ownerDocument,"mouseup",E)}(e,o,t,l)}(t,o,u,e):Zi(e)==i.scroller&&Mt(e):2==l?(o&&dl(t.doc,o),setTimeout(function(){return i.input.focus()},20)):3==l&&(oe?t.display.input.onContextMenu(e):nl(t)))}}}function wl(e,t,i){if("char"==i)return new Ue(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new Ue(N(t.line,0),ye(e.doc,N(t.line+1,0)));var o=i(e,t);return new Ue(o.from,o.to)}function ba(e,t,i,o){var l,u;if(t.touches)l=t.touches[0].clientX,u=t.touches[0].clientY;else try{l=t.clientX,u=t.clientY}catch{return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&Mt(t);var f=e.display,h=f.lineDiv.getBoundingClientRect();if(u>h.bottom||!Yt(e,i))return rr(t);u-=h.top-f.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var d=f.gutters.childNodes[c];if(d&&d.getBoundingClientRect().right>=l)return nt(e,i,e,x(e.doc,u),e.display.gutterSpecs[c].className,t),rr(t)}}function Rn(e,t){return ba(e,t,"gutterClick",!0)}function wa(e,t){zt(e.display,t)||function Cl(e,t){return!!Yt(e,"gutterContextMenu")&&ba(e,t,"gutterContextMenu",!1)}(e,t)||Ee(e,t,"contextmenu")||oe||e.display.input.onContextMenu(t)}function Ss(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fn(e)}bl.prototype.compare=function(e,t,i){return this.time+400>e&&0==X(t,this.pos)&&i==this.button};var Gi={toString:function(){return"CodeMirror.Init"}},ks={},it={};function Ca(e,t,i){if(!t!=!(i&&i!=Gi)){var l=e.display.dragFunctions,u=t?te:rt;u(e.display.scroller,"dragstart",l.start),u(e.display.scroller,"dragenter",l.enter),u(e.display.scroller,"dragover",l.over),u(e.display.scroller,"dragleave",l.leave),u(e.display.scroller,"drop",l.drop)}}function Fo(e){e.options.lineWrapping?($(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(K(e.display.wrapper,"CodeMirror-wrap"),Bl(e)),Zr(e),lr(e),Fn(e),setTimeout(function(){return Li(e)},100)}function Ie(e,t){var i=this;if(!(this instanceof Ie))return new Ie(e,t);this.options=t=t?F(t):{},F(ks,t,!1);var o=t.value;"string"==typeof o?o=new ar(o,t.mode,null,t.lineSeparator,t.direction):t.mode&&(o.modeOption=t.mode),this.doc=o;var l=new Ie.inputStyles[t.inputStyle](this),u=this.display=new Ks(e,o,l,t);for(var f in u.wrapper.CodeMirror=this,Ss(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Qa(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ie,keySeq:null,specialChars:null},t.autofocus&&!gt&&u.input.focus(),ge&&ke<11&&setTimeout(function(){return i.display.input.reset(!0)},20),function Sl(e){var t=e.display;te(t.scroller,"mousedown",Ot(e,xs)),te(t.scroller,"dblclick",ge&&ke<11?Ot(e,function(c){if(!Ee(e,c)){var d=sr(e,c);if(d&&!Rn(e,c)&&!zt(e.display,c)){Mt(c);var v=e.findWordAt(d);dl(e.doc,v.anchor,v.head)}}}):function(c){return Ee(e,c)||Mt(c)}),te(t.scroller,"contextmenu",function(c){return wa(e,c)}),te(t.input.getField(),"contextmenu",function(c){t.scroller.contains(c.target)||wa(e,c)});var i,o={end:0};function l(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),(o=t.activeTouch).end=+new Date)}function f(c,d){if(null==d.left)return!0;var v=d.left-c.left,g=d.top-c.top;return v*v+g*g>400}te(t.scroller,"touchstart",function(c){if(!Ee(e,c)&&!function u(c){if(1!=c.touches.length)return!1;var d=c.touches[0];return d.radiusX<=1&&d.radiusY<=1}(c)&&!Rn(e,c)){t.input.ensurePolled(),clearTimeout(i);var d=+new Date;t.activeTouch={start:d,moved:!1,prev:d-o.end<=300?o:null},1==c.touches.length&&(t.activeTouch.left=c.touches[0].pageX,t.activeTouch.top=c.touches[0].pageY)}}),te(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),te(t.scroller,"touchend",function(c){var d=t.activeTouch;if(d&&!zt(t,c)&&null!=d.left&&!d.moved&&new Date-d.start<300){var g,v=e.coordsChar(t.activeTouch,"page");g=!d.prev||f(d,d.prev)?new Ue(v,v):!d.prev.prev||f(d,d.prev.prev)?e.findWordAt(v):new Ue(N(v.line,0),ye(e.doc,N(v.line+1,0))),e.setSelection(g.anchor,g.head),e.focus(),Mt(c)}l()}),te(t.scroller,"touchcancel",l),te(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Or(e,t.scroller.scrollTop),kr(e,t.scroller.scrollLeft,!0),nt(e,"scroll",e))}),te(t.scroller,"mousewheel",function(c){return vn(e,c)}),te(t.scroller,"DOMMouseScroll",function(c){return vn(e,c)}),te(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(c){Ee(e,c)||Ir(c)},over:function(c){Ee(e,c)||(function Vs(e,t){var i=sr(e,t);if(i){var o=document.createDocumentFragment();rl(e,i,o),e.display.dragCursor||(e.display.dragCursor=V("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),le(e.display.dragCursor,o)}}(e,c),Ir(c))},start:function(c){return function ss(e,t){if(ge&&(!e.state.draggingText||+new Date-ga<100))Ir(t);else if(!Ee(e,t)&&!zt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Ye)){var i=V("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",pe&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),pe&&i.parentNode.removeChild(i)}}(e,c)},drop:Ot(e,as),leave:function(c){Ee(e,c)||us(e)}};var h=t.input.getField();te(h,"keyup",function(c){return _i.call(e,c)}),te(h,"keydown",Ot(e,ys)),te(h,"keypress",Ot(e,Ui)),te(h,"focus",function(c){return gi(e,c)}),te(h,"blur",function(c){return mi(e,c)})}(this),function Lo(){wn||(function pl(){var e;te(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,fs(To)},100))}),te(window,"blur",function(){return fs(mi)})}(),wn=!0)}(),Qn(this),this.curOp.forceUpdate=!0,ul(this,o),t.autofocus&&!gt||this.hasFocus()?setTimeout(function(){i.hasFocus()&&!i.state.focused&&gi(i)},20):mi(this),it)it.hasOwnProperty(f)&&it[f](this,t[f],Gi);es(this),t.finishInit&&t.finishInit(this);for(var h=0;h<Oo.length;++h)Oo[h](this);Vn(this),Ze&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(u.lineDiv).textRendering&&(u.lineDiv.style.textRendering="auto")}Ie.defaults=ks,Ie.optionHandlers=it;var Oo=[];function qi(e,t,i,o){var u,l=e.doc;null==i&&(i="add"),"smart"==i&&(l.mode.indent?u=si(e,t).state:i="prev");var f=e.options.tabSize,h=q(l,t),c=A(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var v,d=h.text.match(/^\s*/)[0];if(o||/\S/.test(h.text)){if("smart"==i&&((v=l.mode.indent(u,h.text.slice(d.length),h.text))==Le||v>150)){if(!o)return;i="prev"}}else v=0,i="not";"prev"==i?v=t>l.first?A(q(l,t-1).text,null,f):0:"add"==i?v=c+e.options.indentUnit:"subtract"==i?v=c-e.options.indentUnit:"number"==typeof i&&(v=c+i),v=Math.max(0,v);var g="",w=0;if(e.options.indentWithTabs)for(var b=Math.floor(v/f);b;--b)w+=f,g+="\t";if(w<v&&(g+=Z(v-w)),g!=d)return Vr(l,g,N(t,0),N(t,d.length),"+input"),h.stateAfter=null,!0;for(var k=0;k<l.sel.ranges.length;k++){var L=l.sel.ranges[k];if(L.head.line==t&&L.head.ch<d.length){var D=N(t,d.length);Ht(l,k,new Ue(D,D));break}}}Ie.defineInitHook=function(e){return Oo.push(e)};var Tr=null;function Eo(e){Tr=e}function Wo(e,t,i,o,l){var u=e.doc;e.display.shift=!1,o||(o=u.sel);var f=+new Date-200,h="paste"==l||e.state.pasteIncoming>f,c=yr(t),d=null;if(h&&o.ranges.length>1)if(Tr&&Tr.text.join("\n")==t){if(o.ranges.length%Tr.text.length==0){d=[];for(var v=0;v<Tr.text.length;v++)d.push(u.splitLines(Tr.text[v]))}}else c.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(d=T(c,function(O){return[O]}));for(var g=e.curOp.updateInput,w=o.ranges.length-1;w>=0;w--){var b=o.ranges[w],k=b.from(),L=b.to();b.empty()&&(i&&i>0?k=N(k.line,k.ch-i):e.state.overwrite&&!h?L=N(L.line,Math.min(q(u,L.line).text.length,L.ch+ee(c).length)):h&&Tr&&Tr.lineWise&&Tr.text.join("\n")==c.join("\n")&&(k=L=N(k.line,0)));var D={from:k,to:L,text:d?d[w%d.length]:c,origin:l||(h?"paste":e.state.cutIncoming>f?"cut":"+input")};Qr(e.doc,D),At(e,"inputRead",e,D)}t&&!h&&Ls(e,t),Jn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=g),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Sa(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&Rt(t,function(){return Wo(t,i,0,null,"paste")}),!0}function Ls(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,o=i.ranges.length-1;o>=0;o--){var l=i.ranges[o];if(!(l.head.ch>100||o&&i.ranges[o-1].head.line==l.head.line)){var u=e.getModeAt(l.head),f=!1;if(u.electricChars){for(var h=0;h<u.electricChars.length;h++)if(t.indexOf(u.electricChars.charAt(h))>-1){f=qi(e,l.head.line,"smart");break}}else u.electricInput&&u.electricInput.test(q(e.doc,l.head.line).text.slice(0,l.head.ch))&&(f=qi(e,l.head.line,"smart"));f&&At(e,"electricInput",e,l.head.line)}}}function kl(e){for(var t=[],i=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,u={anchor:N(l,0),head:N(l+1,0)};i.push(u),t.push(e.getRange(u.anchor,u.head))}return{text:t,ranges:i}}function ka(e,t,i,o){e.setAttribute("autocorrect",i?"":"off"),e.setAttribute("autocapitalize",o?"":"off"),e.setAttribute("spellcheck",!!t)}function je(){var e=V("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=V("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Ze?e.style.width="1000px":e.setAttribute("wrap","off"),et&&(e.style.border="1px solid black"),ka(e),t}function La(e,t,i,o,l){var u=t,f=i,h=q(e,t.line),c=l&&"rtl"==e.direction?-i:i;function v(E){var H;if("codepoint"==o){var _=h.text.charCodeAt(t.ch+(i>0?0:-1));H=isNaN(_)?null:new N(t.line,Math.max(0,Math.min(h.text.length,t.ch+i*((i>0?_>=55296&&_<56320:_>=56320&&_<57343)?2:1))),-i)}else H=l?function ds(e,t,i,o){var l=we(t,e.doc.direction);if(!l)return yl(t,i,o);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var u=ce(l,i.ch,i.sticky),f=l[u];if("ltr"==e.doc.direction&&f.level%2==0&&(o>0?f.to>i.ch:f.from<i.ch))return yl(t,i,o);var c,h=function(O,E){return ii(t,O instanceof N?O.ch:O,E)},d=function(O){return e.options.lineWrapping?(c=c||hi(e,t),Xa(e,t,c,O)):{begin:0,end:t.text.length}},v=d("before"==i.sticky?h(i,-1):i.ch);if("rtl"==e.doc.direction||1==f.level){var g=1==f.level==o<0,w=h(i,g?1:-1);if(null!=w&&(g?w<=f.to&&w<=v.end:w>=f.from&&w>=v.begin))return new N(i.line,w,g?"before":"after")}var k=function(O,E,H){for(;O>=0&&O<l.length;O+=E){var re=l[O],j=E>0==(1!=re.level),xe=j?H.begin:h(H.end,-1);if(re.from<=xe&&xe<re.to||(xe=j?re.from:h(re.to,-1),H.begin<=xe&&xe<H.end))return Me=xe,j?new N(i.line,h(Me,1),"before"):new N(i.line,Me,"after")}var Me},L=k(u+o,o,v);if(L)return L;var D=o>0?v.end:h(v.begin,-1);return null==D||o>0&&D==t.text.length||!(L=k(o>0?0:l.length-1,o,d(D)))?null:L}(e.cm,h,t,i):yl(h,t,i);if(null==H){if(E||!function d(){var E=t.line+c;return!(E<e.first||E>=e.first+e.size)&&(t=new N(E,t.ch,t.sticky),h=q(e,E))}())return!1;t=ma(l,e.cm,h,t.line,c)}else t=H;return!0}if("char"==o||"codepoint"==o)v();else if("column"==o)v(!0);else if("word"==o||"group"==o)for(var g=null,w="group"==o,b=e.cm&&e.cm.getHelper(t,"wordChars"),k=!0;!(i<0)||v(!k);k=!1){var L=h.text.charAt(t.ch)||"\n",D=Pt(L,b)?"w":w&&"\n"==L?"n":!w||/\s/.test(L)?null:"p";if(w&&!k&&!D&&(D="s"),g&&g!=D){i<0&&(i=1,v(),t.sticky="after");break}if(D&&(g=D),i>0&&!v(!k))break}var O=yn(e,t,u,f,!0);return Re(u,O)&&(O.hitSide=!0),O}function li(e,t,i,o){var f,d,l=e.doc,u=t.left;if("page"==o){var h=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(h-.5*jn(e.display),3);f=(i>0?t.bottom:t.top)+i*c}else"line"==o&&(f=i>0?t.bottom+3:t.top-3);for(;(d=Yl(e,u,f)).outside;){if(i<0?f<=0:f>=l.height){d.hitSide=!0;break}f+=5*i}return d}var $e=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ie,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ho(e,t){var i=Vo(e,t.line);if(!i||i.hidden)return null;var o=q(e.doc,t.line),l=Xn(i,o,t.line),u=we(o,e.doc.direction),f="left";u&&(f=ce(u,t.ch)%2?"right":"left");var c=Gl(l.map,t.ch,f);return c.offset="right"==c.collapse?c.end:c.start,c}function lt(e,t){return t&&(e.bad=!0),e}function Ll(e,t,i){var o;if(t==e.display.lineDiv){if(!(o=e.display.lineDiv.childNodes[i]))return lt(e.clipPos(N(e.display.viewTo-1)),!0);t=null,i=0}else for(o=t;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var u=e.display.view[l];if(u.node==o)return uu(u,t,i)}}function uu(e,t,i){var o=e.text.firstChild,l=!1;if(!t||!S(o,t))return lt(N(p(e.line),0),!0);if(t==o&&(l=!0,t=o.childNodes[i],i=0,!t)){var u=e.rest?ee(e.rest):e.line;return lt(N(p(u),u.text.length),l)}var f=3==t.nodeType?t:null,h=t;for(!f&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(f=t.firstChild,i&&(i=f.nodeValue.length));h.parentNode!=o;)h=h.parentNode;var c=e.measure,d=c.maps;function v(D,O,E){for(var H=-1;H<(d?d.length:0);H++)for(var _=H<0?c.map:d[H],re=0;re<_.length;re+=3){var j=_[re+2];if(j==D||j==O){var xe=p(H<0?e.line:e.rest[H]),Me=_[re]+E;return(E<0||j!=D)&&(Me=_[re+(E?1:0)]),N(xe,Me)}}}var g=v(f,h,i);if(g)return lt(g,l);for(var w=h.nextSibling,b=f?f.nodeValue.length-i:0;w;w=w.nextSibling){if(g=v(w,w.firstChild,0))return lt(N(g.line,g.ch-b),l);b+=w.textContent.length}for(var k=h.previousSibling,L=i;k;k=k.previousSibling){if(g=v(k,k.firstChild,-1))return lt(N(g.line,g.ch+L),l);L+=k.textContent.length}}$e.prototype.init=function(e){var t=this,i=this,o=i.cm,l=i.div=e.lineDiv;function u(h){for(var c=h.target;c;c=c.parentNode){if(c==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(c.className))break}return!1}function f(h){if(u(h)&&!Ee(o,h)){if(o.somethingSelected())Eo({lineWise:!1,text:o.getSelections()}),"cut"==h.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var c=kl(o);Eo({lineWise:!0,text:c.text}),"cut"==h.type&&o.operation(function(){o.setSelections(c.ranges,0,bt),o.replaceSelection("",null,"cut")})}if(h.clipboardData){h.clipboardData.clearData();var d=Tr.text.join("\n");if(h.clipboardData.setData("Text",d),h.clipboardData.getData("Text")==d)return void h.preventDefault()}var v=je(),g=v.firstChild;o.display.lineSpace.insertBefore(v,o.display.lineSpace.firstChild),g.value=Tr.text.join("\n");var w=m();U(g),setTimeout(function(){o.display.lineSpace.removeChild(v),w.focus(),w==l&&i.showPrimarySelection()},50)}}l.contentEditable=!0,ka(l,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize),te(l,"paste",function(h){!u(h)||Ee(o,h)||Sa(h,o)||ke<=11&&setTimeout(Ot(o,function(){return t.updateFromDOM()}),20)}),te(l,"compositionstart",function(h){t.composing={data:h.data,done:!1}}),te(l,"compositionupdate",function(h){t.composing||(t.composing={data:h.data,done:!1})}),te(l,"compositionend",function(h){t.composing&&(h.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),te(l,"touchstart",function(){return i.forceCompositionEnd()}),te(l,"input",function(){t.composing||t.readFromDOMSoon()}),te(l,"copy",f),te(l,"cut",f)},$e.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},$e.prototype.prepareSelection=function(){var e=tl(this.cm,!1);return e.focus=m()==this.div,e},$e.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},$e.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},$e.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),o=i.from(),l=i.to();if(t.display.viewTo==t.display.viewFrom||o.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var u=Ll(t,e.anchorNode,e.anchorOffset),f=Ll(t,e.focusNode,e.focusOffset);if(!u||u.bad||!f||f.bad||0!=X(Gn(u,f),o)||0!=X(or(u,f),l)){var h=t.display.view,c=o.line>=t.display.viewFrom&&Ho(t,o)||{node:h[0].measure.map[2],offset:0},d=l.line<t.display.viewTo&&Ho(t,l);if(!d){var v=h[h.length-1].measure,g=v.maps?v.maps[v.maps.length-1]:v.map;d={node:g[g.length-1],offset:g[g.length-2]-g[g.length-3]}}if(!c||!d)return void e.removeAllRanges();var b,w=e.rangeCount&&e.getRangeAt(0);try{b=Qe(c.node,c.offset,d.offset,d.node)}catch{}b&&(!Ae&&t.state.focused?(e.collapse(c.node,c.offset),b.collapsed||(e.removeAllRanges(),e.addRange(b))):(e.removeAllRanges(),e.addRange(b)),w&&null==e.anchorNode?e.addRange(w):Ae&&this.startGracePeriod()),this.rememberSelection()}}},$e.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},$e.prototype.showMultipleSelections=function(e){le(this.cm.display.cursorDiv,e.cursors),le(this.cm.display.selectionDiv,e.selection)},$e.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},$e.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return S(this.div,t)},$e.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||m()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},$e.prototype.blur=function(){this.div.blur()},$e.prototype.getField=function(){return this.div},$e.prototype.supportsTouch=function(){return!0},$e.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):Rt(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function i(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,i))})},$e.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},$e.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(C&&at&&this.cm.display.gutterSpecs.length&&function au(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Ll(t,e.anchorNode,e.anchorOffset),o=Ll(t,e.focusNode,e.focusOffset);i&&o&&Rt(t,function(){_t(t.doc,gn(i,o),bt),(i.bad||o.bad)&&(t.curOp.selectionChanged=!0)})}}},$e.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u,f,h,e=this.cm,t=e.display,i=e.doc.sel.primary(),o=i.from(),l=i.to();if(0==o.ch&&o.line>e.firstLine()&&(o=N(o.line-1,q(e.doc,o.line-1).length)),l.ch==q(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=N(l.line+1,0)),o.line<t.viewFrom||l.line>t.viewTo-1)return!1;o.line==t.viewFrom||0==(u=Yr(e,o.line))?(f=p(t.view[0].line),h=t.view[0].node):(f=p(t.view[u].line),h=t.view[u-1].node.nextSibling);var d,v,c=Yr(e,l.line);if(c==t.view.length-1?(d=t.viewTo-1,v=t.lineDiv.lastChild):(d=p(t.view[c+1].line)-1,v=t.view[c+1].node.previousSibling),!h)return!1;for(var g=e.doc.splitLines(function su(e,t,i,o,l){var u="",f=!1,h=e.doc.lineSeparator(),c=!1;function v(){f&&(u+=h,c&&(u+=h),f=c=!1)}function g(b){b&&(v(),u+=b)}function w(b){if(1==b.nodeType){var k=b.getAttribute("cm-text");if(k)return void g(k);var D,L=b.getAttribute("cm-marker");if(L){var O=e.findMarks(N(o,0),N(l+1,0),function d(b){return function(k){return k.id==b}}(+L));return void(O.length&&(D=O[0].find(0))&&g(nr(e.doc,D.from,D.to).join(h)))}if("false"==b.getAttribute("contenteditable"))return;var E=/^(pre|div|p|li|table|br)$/i.test(b.nodeName);if(!/^br$/i.test(b.nodeName)&&0==b.textContent.length)return;E&&v();for(var H=0;H<b.childNodes.length;H++)w(b.childNodes[H]);/^(pre|p)$/i.test(b.nodeName)&&(c=!0),E&&(f=!0)}else 3==b.nodeType&&g(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;w(t),t!=i;)t=t.nextSibling,c=!1;return u}(e,h,v,f,d)),w=nr(e.doc,N(f,0),N(d,q(e.doc,d).text.length));g.length>1&&w.length>1;)if(ee(g)==ee(w))g.pop(),w.pop(),d--;else{if(g[0]!=w[0])break;g.shift(),w.shift(),f++}for(var b=0,k=0,L=g[0],D=w[0],O=Math.min(L.length,D.length);b<O&&L.charCodeAt(b)==D.charCodeAt(b);)++b;for(var E=ee(g),H=ee(w),_=Math.min(E.length-(1==g.length?b:0),H.length-(1==w.length?b:0));k<_&&E.charCodeAt(E.length-k-1)==H.charCodeAt(H.length-k-1);)++k;if(1==g.length&&1==w.length&&f==o.line)for(;b&&b>o.ch&&E.charCodeAt(E.length-k-1)==H.charCodeAt(H.length-k-1);)b--,k++;g[g.length-1]=E.slice(0,E.length-k).replace(/^\u200b+/,""),g[0]=g[0].slice(b).replace(/\u200b+$/,"");var re=N(f,b),j=N(d,w.length?ee(w).length-k:0);return g.length>1||g[0]||X(re,j)?(Vr(e.doc,g,re,j,"+input"),!0):void 0},$e.prototype.ensurePolled=function(){this.forceCompositionEnd()},$e.prototype.reset=function(){this.forceCompositionEnd()},$e.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},$e.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},$e.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&Rt(this.cm,function(){return lr(e.cm)})},$e.prototype.setUneditable=function(e){e.contentEditable="false"},$e.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ot(this.cm,Wo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},$e.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},$e.prototype.onContextMenu=function(){},$e.prototype.resetPosition=function(){},$e.prototype.needsContentAttribute=!0;var ht=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new ie,this.hasSelection=!1,this.composing=null};ht.prototype.init=function(e){var t=this,i=this,o=this.cm;this.createField(e);var l=this.textarea;function u(f){if(!Ee(o,f)){if(o.somethingSelected())Eo({lineWise:!1,text:o.getSelections()});else{if(!o.options.lineWiseCopyCut)return;var h=kl(o);Eo({lineWise:!0,text:h.text}),"cut"==f.type?o.setSelections(h.ranges,null,bt):(i.prevInput="",l.value=h.text.join("\n"),U(l))}"cut"==f.type&&(o.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),et&&(l.style.width="0px"),te(l,"input",function(){ge&&ke>=9&&t.hasSelection&&(t.hasSelection=null),i.poll()}),te(l,"paste",function(f){Ee(o,f)||Sa(f,o)||(o.state.pasteIncoming=+new Date,i.fastPoll())}),te(l,"cut",u),te(l,"copy",u),te(e.scroller,"paste",function(f){if(!zt(e,f)&&!Ee(o,f)){if(!l.dispatchEvent)return o.state.pasteIncoming=+new Date,void i.focus();var h=new Event("paste");h.clipboardData=f.clipboardData,l.dispatchEvent(h)}}),te(e.lineSpace,"selectstart",function(f){zt(e,f)||Mt(f)}),te(l,"compositionstart",function(){var f=o.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:f,range:o.markText(f,o.getCursor("to"),{className:"CodeMirror-composing"})}}),te(l,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},ht.prototype.createField=function(e){this.wrapper=je(),this.textarea=this.wrapper.firstChild},ht.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ht.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,o=tl(e);if(e.options.moveInputWithCursor){var l=Cr(e,i.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+f.top-u.top)),o.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+f.left-u.left))}return o},ht.prototype.showSelection=function(e){var i=this.cm.display;le(i.cursorDiv,e.cursors),le(i.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ht.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&U(this.textarea),ge&&ke>=9&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",ge&&ke>=9&&(this.hasSelection=null))}},ht.prototype.getField=function(){return this.textarea},ht.prototype.supportsTouch=function(){return!1},ht.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!gt||m()!=this.textarea))try{this.textarea.focus()}catch{}},ht.prototype.blur=function(){this.textarea.blur()},ht.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ht.prototype.receivedFocus=function(){this.slowPoll()},ht.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ht.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))})},ht.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,o=this.prevInput;if(this.contextMenuPending||!t.state.focused||Br(i)&&!o&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var l=i.value;if(l==o&&!t.somethingSelected())return!1;if(ge&&ke>=9&&this.hasSelection===l||Pe&&/[\uf700-\uf7ff]/.test(l))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var u=l.charCodeAt(0);if(8203==u&&!o&&(o="\u200b"),8666==u)return this.reset(),this.cm.execCommand("undo")}for(var f=0,h=Math.min(o.length,l.length);f<h&&o.charCodeAt(f)==l.charCodeAt(f);)++f;return Rt(t,function(){Wo(t,l.slice(f),o.length-f,null,e.composing?"*compose":null),l.length>1e3||l.indexOf("\n")>-1?i.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ht.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ht.prototype.onKeyPress=function(){ge&&ke>=9&&(this.hasSelection=null),this.fastPoll()},ht.prototype.onContextMenu=function(e){var t=this,i=t.cm,o=i.display,l=t.textarea;t.contextMenuPending&&t.contextMenuPending();var u=sr(i,e),f=o.scroller.scrollTop;if(u&&!pe){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(u)&&Ot(i,_t)(i.doc,gn(u),bt);var g,c=l.style.cssText,d=t.wrapper.style.cssText,v=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-v.top-5)+"px; left: "+(e.clientX-v.left-5)+"px;\n      z-index: 1000; background: "+(ge?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Ze&&(g=window.scrollY),o.input.focus(),Ze&&window.scrollTo(null,g),o.input.reset(),i.somethingSelected()||(l.value=t.prevInput=" "),t.contextMenuPending=b,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),ge&&ke>=9&&w(),oe){Ir(e);var k=function(){rt(window,"mouseup",k),setTimeout(b,20)};te(window,"mouseup",k)}else setTimeout(b,50)}function w(){if(null!=l.selectionStart){var L=i.somethingSelected(),D="\u200b"+(L?l.value:"");l.value="\u21da",l.value=D,t.prevInput=L?"":"\u200b",l.selectionStart=1,l.selectionEnd=D.length,o.selForContextMenu=i.doc.sel}}function b(){if(t.contextMenuPending==b&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,l.style.cssText=c,ge&&ke<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=f),null!=l.selectionStart)){(!ge||ge&&ke<9)&&w();var L=0,D=function(){o.selForContextMenu==i.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"\u200b"==t.prevInput?Ot(i,wo)(i):L++<10?o.detectingSelectAll=setTimeout(D,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(D,200)}}},ht.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},ht.prototype.setUneditable=function(){},ht.prototype.needsContentAttribute=!1,function lu(e){var t=e.optionHandlers;function i(o,l,u,f){e.defaults[o]=l,u&&(t[o]=f?function(h,c,d){d!=Gi&&u(h,c,d)}:u)}e.defineOption=i,e.Init=Gi,i("value","",function(o,l){return o.setValue(l)},!0),i("mode",null,function(o,l){o.doc.modeOption=l,Jr(o)},!0),i("indentUnit",2,Jr,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(o){Ni(o),Fn(o),lr(o)},!0),i("lineSeparator",null,function(o,l){if(o.doc.lineSep=l,l){var u=[],f=o.doc.first;o.doc.iter(function(c){for(var d=0;;){var v=c.text.indexOf(l,d);if(-1==v)break;d=v+l.length,u.push(N(f,v))}f++});for(var h=u.length-1;h>=0;h--)Vr(o.doc,l,u[h],N(u[h].line,u[h].ch+l.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,l,u){o.state.specialChars=new RegExp(l.source+(l.test("\t")?"":"|\t"),"g"),u!=Gi&&o.refresh()}),i("specialCharPlaceholder",Ha,function(o){return o.refresh()},!0),i("electricChars",!0),i("inputStyle",gt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(o,l){return o.getInputField().spellcheck=l},!0),i("autocorrect",!1,function(o,l){return o.getInputField().autocorrect=l},!0),i("autocapitalize",!1,function(o,l){return o.getInputField().autocapitalize=l},!0),i("rtlMoveVisually",!fe),i("wholeLineUpdateBefore",!0),i("theme","default",function(o){Ss(o),Ai(o)},!0),i("keyMap","default",function(o,l,u){var f=Bi(l),h=u!=Gi&&Bi(u);h&&h.detach&&h.detach(o,f),f.attach&&f.attach(o,h||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,Fo,!0),i("gutters",[],function(o,l){o.display.gutterSpecs=Di(l,o.options.lineNumbers),Ai(o)},!0),i("fixedGutter",!0,function(o,l){o.display.gutters.style.left=l?cn(o.display)+"px":"0",o.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(o){return Li(o)},!0),i("scrollbarStyle","native",function(o){Qa(o),Li(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),i("lineNumbers",!1,function(o,l){o.display.gutterSpecs=Di(o.options.gutters,l),Ai(o)},!0),i("firstLineNumber",1,Ai,!0),i("lineNumberFormatter",function(o){return o},Ai,!0),i("showCursorWhenSelecting",!1,uo,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(o,l){"nocursor"==l&&(mi(o),o.display.input.blur()),o.display.input.readOnlyChanged(l)}),i("screenReaderLabel",null,function(o,l){o.display.input.screenReaderLabelChanged(l=""===l?null:l)}),i("disableInput",!1,function(o,l){l||o.display.input.reset()},!0),i("dragDrop",!0,Ca),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,uo,!0),i("singleCursorHeightPerLine",!0,uo,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,Ni,!0),i("addModeClass",!1,Ni,!0),i("pollInterval",100),i("undoDepth",200,function(o,l){return o.doc.history.undoDepth=l}),i("historyEventDelay",1250),i("viewportMargin",10,function(o){return o.refresh()},!0),i("maxHighlightLength",1e4,Ni,!0),i("moveInputWithCursor",!0,function(o,l){l||o.display.input.resetPosition()}),i("tabindex",null,function(o,l){return o.display.input.getField().tabIndex=l||""}),i("autofocus",null),i("direction","ltr",function(o,l){return o.doc.setDirection(l)},!0),i("phrases",null)}(Ie),function Ts(e){var t=e.optionHandlers,i=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,l){var u=this.options,f=u[o];u[o]==l&&"mode"!=o||(u[o]=l,t.hasOwnProperty(o)&&Ot(this,t[o])(this,l,f),nt(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,l){this.state.keyMaps[l?"push":"unshift"](Bi(o))},removeKeyMap:function(o){for(var l=this.state.keyMaps,u=0;u<l.length;++u)if(l[u]==o||l[u].name==o)return l.splice(u,1),!0},addOverlay:Et(function(o,l){var u=o.token?o:e.getMode(this.options,o);if(u.startState)throw new Error("Overlays may not be stateful.");(function I(e,t,i){for(var o=0,l=i(t);o<e.length&&i(e[o])<=l;)o++;e.splice(o,0,t)})(this.state.overlays,{mode:u,modeSpec:o,opaque:l&&l.opaque,priority:l&&l.priority||0},function(f){return f.priority}),this.state.modeGen++,lr(this)}),removeOverlay:Et(function(o){for(var l=this.state.overlays,u=0;u<l.length;++u){var f=l[u].modeSpec;if(f==o||"string"==typeof o&&f.name==o)return l.splice(u,1),this.state.modeGen++,void lr(this)}}),indentLine:Et(function(o,l,u){"string"!=typeof l&&"number"!=typeof l&&(l=null==l?this.options.smartIndent?"smart":"prev":l?"add":"subtract"),W(this.doc,o)&&qi(this,o,l,u)}),indentSelection:Et(function(o){for(var l=this.doc.sel.ranges,u=-1,f=0;f<l.length;f++){var h=l[f];if(h.empty())h.head.line>u&&(qi(this,h.head.line,o,!0),u=h.head.line,f==this.doc.sel.primIndex&&Jn(this));else{var c=h.from(),d=h.to(),v=Math.max(u,c.line);u=Math.min(this.lastLine(),d.line-(d.ch?0:1))+1;for(var g=v;g<u;++g)qi(this,g,o);var w=this.doc.sel.ranges;0==c.ch&&l.length==w.length&&w[f].from().ch>0&&Ht(this.doc,f,new Ue(c,w[f].to()),bt)}}}),getTokenAt:function(o,l){return Da(this,o,l)},getLineTokens:function(o,l){return Da(this,N(o),l,!0)},getTokenTypeAt:function(o){o=ye(this.doc,o);var c,l=Bo(this,q(this.doc,o.line)),u=0,f=(l.length-1)/2,h=o.ch;if(0==h)c=l[2];else for(;;){var d=u+f>>1;if((d?l[2*d-1]:0)>=h)f=d;else{if(!(l[2*d+1]<h)){c=l[2*d+2];break}u=d+1}}var v=c?c.indexOf("overlay "):-1;return v<0?c:0==v?null:c.slice(0,v-1)},getModeAt:function(o){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(o).state).mode:l},getHelper:function(o,l){return this.getHelpers(o,l)[0]},getHelpers:function(o,l){var u=[];if(!i.hasOwnProperty(l))return u;var f=i[l],h=this.getModeAt(o);if("string"==typeof h[l])f[h[l]]&&u.push(f[h[l]]);else if(h[l])for(var c=0;c<h[l].length;c++){var d=f[h[l][c]];d&&u.push(d)}else h.helperType&&f[h.helperType]?u.push(f[h.helperType]):f[h.name]&&u.push(f[h.name]);for(var v=0;v<f._global.length;v++){var g=f._global[v];g.pred(h,this)&&-1==z(u,g.val)&&u.push(g.val)}return u},getStateAfter:function(o,l){var u=this.doc;return si(this,(o=Xi(u,o??u.first+u.size-1))+1,l).state},cursorCoords:function(o,l){var f=this.doc.sel.primary();return Cr(this,null==o?f.head:"object"==typeof o?ye(this.doc,o):o?f.from():f.to(),l||"page")},charCoords:function(o,l){return ci(this,ye(this.doc,o),l||"page")},coordsChar:function(o,l){return Yl(this,(o=el(this,o,l||"page")).left,o.top)},lineAtHeight:function(o,l){return o=el(this,{top:o,left:0},l||"page").top,x(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,l,u){var h,f=!1;if("number"==typeof o){var c=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>c&&(o=c,f=!0),h=q(this.doc,o)}else h=o;return oo(this,h,{top:0,left:0},l||"page",u||f).top+(f?this.doc.height-an(h):0)},defaultTextHeight:function(){return jn(this.display)},defaultCharWidth:function(){return On(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,l,u,f,h){var c=this.display,d=(o=Cr(this,ye(this.doc,o))).bottom,v=o.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),c.sizer.appendChild(l),"over"==f)d=o.top;else if("above"==f||"near"==f){var g=Math.max(c.wrapper.clientHeight,this.doc.height),w=Math.max(c.sizer.clientWidth,c.lineSpace.clientWidth);("above"==f||o.bottom+l.offsetHeight>g)&&o.top>l.offsetHeight?d=o.top-l.offsetHeight:o.bottom+l.offsetHeight<=g&&(d=o.bottom),v+l.offsetWidth>w&&(v=w-l.offsetWidth)}l.style.top=d+"px",l.style.left=l.style.right="","right"==h?(v=c.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):("left"==h?v=0:"middle"==h&&(v=(c.sizer.clientWidth-l.offsetWidth)/2),l.style.left=v+"px"),u&&function ho(e,t){var i=Vl(e,t);null!=i.scrollTop&&Or(e,i.scrollTop),null!=i.scrollLeft&&kr(e,i.scrollLeft)}(this,{left:v,top:d,right:v+l.offsetWidth,bottom:d+l.offsetHeight})},triggerOnKeyDown:Et(ys),triggerOnKeyPress:Et(Ui),triggerOnKeyUp:_i,triggerOnMouseDown:Et(xs),execCommand:function(o){if(zn.hasOwnProperty(o))return zn[o].call(null,this)},triggerElectric:Et(function(o){Ls(this,o)}),findPosH:function(o,l,u,f){var h=1;l<0&&(h=-1,l=-l);for(var c=ye(this.doc,o),d=0;d<l&&!(c=La(this.doc,c,h,u,f)).hitSide;++d);return c},moveH:Et(function(o,l){var u=this;this.extendSelectionsBy(function(f){return u.display.shift||u.doc.extend||f.empty()?La(u.doc,f.head,o,l,u.options.rtlMoveVisually):o<0?f.from():f.to()},be)}),deleteH:Et(function(o,l){var f=this.doc;this.doc.sel.somethingSelected()?f.replaceSelection("",null,"+delete"):zi(this,function(h){var c=La(f,h.head,o,l,!1);return o<0?{from:c,to:h.head}:{from:h.head,to:c}})}),findPosV:function(o,l,u,f){var h=1,c=f;l<0&&(h=-1,l=-l);for(var d=ye(this.doc,o),v=0;v<l;++v){var g=Cr(this,d,"div");if(null==c?c=g.left:g.left=c,(d=li(this,g,h,u)).hitSide)break}return d},moveV:Et(function(o,l){var u=this,f=this.doc,h=[],c=!this.display.shift&&!f.extend&&f.sel.somethingSelected();if(f.extendSelectionsBy(function(v){if(c)return o<0?v.from():v.to();var g=Cr(u,v.head,"div");null!=v.goalColumn&&(g.left=v.goalColumn),h.push(g.left);var w=li(u,g,o,l);return"page"==l&&v==f.sel.primary()&&bi(u,ci(u,w,"div").top-g.top),w},be),h.length)for(var d=0;d<f.sel.ranges.length;d++)f.sel.ranges[d].goalColumn=h[d]}),findWordAt:function(o){var u=q(this.doc,o.line).text,f=o.ch,h=o.ch;if(u){var c=this.getHelper(o,"wordChars");"before"!=o.sticky&&h!=u.length||!f?++h:--f;for(var d=u.charAt(f),v=Pt(d,c)?function(g){return Pt(g,c)}:/\s/.test(d)?function(g){return/\s/.test(g)}:function(g){return!/\s/.test(g)&&!Pt(g)};f>0&&v(u.charAt(f-1));)--f;for(;h<u.length&&v(u.charAt(h));)++h}return new Ue(N(o.line,f),N(o.line,h))},toggleOverwrite:function(o){null!=o&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?$(this.display.cursorDiv,"CodeMirror-overwrite"):K(this.display.cursorDiv,"CodeMirror-overwrite"),nt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==m()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Et(function(o,l){pn(this,o,l)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-Fr(this)-this.display.barHeight,width:o.scrollWidth-Fr(this)-this.display.barWidth,clientHeight:Qo(this),clientWidth:Yn(this)}},scrollIntoView:Et(function(o,l){null==o?(o={from:this.doc.sel.primary().head,to:null},null==l&&(l=this.options.cursorScrollMargin)):"number"==typeof o?o={from:N(o,0),to:null}:null==o.from&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=l||0,null!=o.from.line?function Ja(e,t){Xr(e),e.curOp.scrollToPos=t}(this,o):wi(this,o.from,o.to,o.margin)}),setSize:Et(function(o,l){var u=this,f=function(c){return"number"==typeof c||/^\d+$/.test(String(c))?c+"px":c};null!=o&&(this.display.wrapper.style.width=f(o)),null!=l&&(this.display.wrapper.style.height=f(l)),this.options.lineWrapping&&$o(this);var h=this.display.viewFrom;this.doc.iter(h,this.display.viewTo,function(c){if(c.widgets)for(var d=0;d<c.widgets.length;d++)if(c.widgets[d].noHScroll){dn(u,h,"widget");break}++h}),this.curOp.forceUpdate=!0,nt(this,"refresh",this)}),operation:function(o){return Rt(this,o)},startOperation:function(){return Qn(this)},endOperation:function(){return Vn(this)},refresh:Et(function(){var o=this.display.cachedTextHeight;lr(this),this.curOp.forceUpdate=!0,Fn(this),pn(this,this.doc.scrollLeft,this.doc.scrollTop),vo(this.display),(null==o||Math.abs(o-jn(this.display))>.5||this.options.lineWrapping)&&Zr(this),nt(this,"refresh",this)}),swapDoc:Et(function(o){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),ul(this,o),Fn(this),this.display.input.reset(),pn(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,At(this,"swapDoc",this,l),l}),phrase:function(o){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,o)?l[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},tr(e),e.registerHelper=function(o,l,u){i.hasOwnProperty(o)||(i[o]=e[o]={_global:[]}),i[o][l]=u},e.registerGlobalHelper=function(o,l,u,f){e.registerHelper(o,l,f),i[o]._global.push({pred:u,val:f})}}(Ie);var s="iter insert remove copy getEditor constructor".split(" ");for(var a in ar.prototype)ar.prototype.hasOwnProperty(a)&&z(s,a)<0&&(Ie.prototype[a]=function(e){return function(){return e.apply(this.doc,arguments)}}(ar.prototype[a]));return tr(ar),Ie.inputStyles={textarea:ht,contenteditable:$e},Ie.defineMode=function(e){!Ie.defaults.mode&&"null"!=e&&(Ie.defaults.mode=e),Xt.apply(this,arguments)},Ie.defineMIME=function Un(e,t){pr[e]=t},Ie.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ie.defineMIME("text/plain","null"),Ie.defineExtension=function(e,t){Ie.prototype[e]=t},Ie.defineDocExtension=function(e,t){ar.prototype[e]=t},Ie.fromTextArea=function r(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=m();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function o(){e.value=h.getValue()}var l;if(e.form&&(te(e.form,"submit",o),!t.leaveSubmitMethodAlone)){var u=e.form;l=u.submit;try{var f=u.submit=function(){o(),u.submit=l,u.submit(),u.submit=f}}catch{}}t.finishInit=function(c){c.save=o,c.getTextArea=function(){return e},c.toTextArea=function(){c.toTextArea=isNaN,o(),e.parentNode.removeChild(c.getWrapperElement()),e.style.display="",e.form&&(rt(e.form,"submit",o),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=l))}},e.style.display="none";var h=Ie(function(c){return e.parentNode.insertBefore(c,e.nextSibling)},t);return h},function n(e){e.off=rt,e.on=te,e.wheelEventPixels=Er,e.Doc=ar,e.splitLines=yr,e.countColumn=A,e.findColumn=wt,e.isWordChar=Gt,e.Pass=Le,e.signal=nt,e.Line=ui,e.changeEnd=Pn,e.scrollbarModel=In,e.Pos=N,e.cmpPos=X,e.modes=nn,e.mimeModes=pr,e.resolveMode=xr,e.getMode=Tn,e.modeExtensions=on,e.extendMode=ut,e.copyState=ae,e.startState=Mn,e.innerMode=Dr,e.commands=zn,e.keyMap=en,e.keyName=ml,e.isModifierKey=ni,e.lookupKey=Cn,e.normalizeKeyMap=cs,e.StringStream=Ge,e.SharedTextMarker=ko,e.TextMarker=bn,e.LineWidget=Lr,e.e_preventDefault=Mt,e.e_stopPropagation=_n,e.e_stop=Ir,e.addClass=$,e.contains=S,e.rmClass=K,e.keyNames=Vt}(Ie),Ie.version="5.65.0",Ie},"object"==typeof ne&&typeof he<"u"?he.exports=B():void 0!==(Ke="function"==typeof(J=B)?J.call(ne,Ce,ne,he):J)&&(he.exports=Ke)},{}]},{},[1])},8266:function(ai){ai.exports=function(){"use strict";var vt=navigator.userAgent,Ce=navigator.platform,J=/gecko\/\d/i.test(vt),Ke=/MSIE \d/.test(vt),G=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vt),he=/Edge\/(\d+)/.exec(vt),ne=Ke||G||he,Y=ne&&(Ke?document.documentMode||6:+(he||G)[1]),B=!he&&/WebKit\//.test(vt),Ae=B&&/Qt\/\d+\.\d+/.test(vt),de=!he&&/Chrome\/(\d+)/.exec(vt),ze=de&&+de[1],Se=/Opera\//.test(vt),ge=/Apple Computer/.test(navigator.vendor),ke=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(vt),Ze=/PhantomJS/.test(vt),ft=ge&&(/Mobile\/\w+/.test(vt)||navigator.maxTouchPoints>2),at=/Android/.test(vt),pe=ft||at||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(vt),Ye=ft||/Mac/.test(Ce),qt=/\bCrOS\b/.test(vt),Kt=/win/i.test(Ce),et=Se&&vt.match(/Version\/(\d*\.\d*)/);et&&(et=Number(et[1])),et&&et>=15&&(Se=!1,B=!0);var C=Ye&&(Ae||Se&&(null==et||et<12.11)),gt=J||ne&&Y>=9;function Pe(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var y,kt=function(r,n){var s=r.className,a=Pe(n).exec(s);if(a){var e=s.slice(a.index+a[0].length);r.className=s.slice(0,a.index)+(e?a[1]+e:"")}};function fe(r){for(var n=r.childNodes.length;n>0;--n)r.removeChild(r.firstChild);return r}function Xe(r,n){return fe(r).appendChild(n)}function M(r,n,s,a){var e=document.createElement(r);if(s&&(e.className=s),a&&(e.style.cssText=a),"string"==typeof n)e.appendChild(document.createTextNode(n));else if(n)for(var t=0;t<n.length;++t)e.appendChild(n[t]);return e}function oe(r,n,s,a){var e=M(r,n,s,a);return e.setAttribute("role","presentation"),e}function K(r,n){if(3==n.nodeType&&(n=n.parentNode),r.contains)return r.contains(n);do{if(11==n.nodeType&&(n=n.host),n==r)return!0}while(n=n.parentNode)}function P(r){var n;try{n=r.activeElement}catch{n=r.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function le(r,n){var s=r.className;Pe(n).test(s)||(r.className+=(s?" ":"")+n)}function V(r,n){for(var s=r.split(" "),a=0;a<s.length;a++)s[a]&&!Pe(s[a]).test(n)&&(n+=" "+s[a]);return n}y=document.createRange?function(r,n,s,a){var e=document.createRange();return e.setEnd(a||r,s),e.setStart(r,n),e}:function(r,n,s){var a=document.body.createTextRange();try{a.moveToElementText(r.parentNode)}catch{return a}return a.collapse(!0),a.moveEnd("character",s),a.moveStart("character",n),a};var tt=function(r){r.select()};function Qe(r){return r.display.wrapper.ownerDocument}function S(r){return Qe(r).defaultView}function m(r){var n=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,n)}}function $(r,n,s){for(var a in n||(n={}),r)r.hasOwnProperty(a)&&(!1!==s||!n.hasOwnProperty(a))&&(n[a]=r[a]);return n}function me(r,n,s,a,e){null==n&&-1==(n=r.search(/[^\s\u00a0]/))&&(n=r.length);for(var t=a||0,i=e||0;;){var o=r.indexOf("\t",t);if(o<0||o>=n)return i+(n-t);i+=o-t,i+=s-i%s,t=o+1}}ft?tt=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:ne&&(tt=function(r){try{r.select()}catch{}});var U=function(){this.id=null,this.f=null,this.time=0,this.handler=m(this.onTimeout,this)};function Q(r,n){for(var s=0;s<r.length;++s)if(r[s]==n)return s;return-1}U.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},U.prototype.set=function(r,n){this.f=n;var s=+new Date+r;(!this.id||s<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=s)};var F=50,A={toString:function(){return"CodeMirror.Pass"}},ie={scroll:!1},z={origin:"*mouse"},ve={origin:"+move"};function Le(r,n,s){for(var a=0,e=0;;){var t=r.indexOf("\t",a);-1==t&&(t=r.length);var i=t-a;if(t==r.length||e+i>=n)return a+Math.min(i,n-e);if(e+=t-a,a=t+1,(e+=s-e%s)>=n)return a}}var bt=[""];function er(r){for(;bt.length<=r;)bt.push(be(bt)+" ");return bt[r]}function be(r){return r[r.length-1]}function wt(r,n){for(var s=[],a=0;a<r.length;a++)s[a]=n(r[a],a);return s}function Z(){}function ee(r,n){var s;return Object.create?s=Object.create(r):(Z.prototype=r,s=new Z),n&&$(n,s),s}var T=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function I(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||T.test(r))}function se(r,n){return n?!!(n.source.indexOf("\\w")>-1&&I(r))||n.test(r):I(r)}function Te(r){for(var n in r)if(r.hasOwnProperty(n)&&r[n])return!1;return!0}var Ve=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Gt(r){return r.charCodeAt(0)>=768&&Ve.test(r)}function Pt(r,n,s){for(;(s<0?n>0:n<r.length)&&Gt(r.charAt(n));)n+=s;return n}function Bt(r,n,s){for(var a=n>s?-1:1;;){if(n==s)return n;var e=(n+s)/2,t=a<0?Math.ceil(e):Math.floor(e);if(t==n)return r(t)?n:s;r(t)?s=t:n=t+a}}var He=null;function st(r,n,s){var a;He=null;for(var e=0;e<r.length;++e){var t=r[e];if(t.from<n&&t.to>n)return e;t.to==n&&(t.from!=t.to&&"before"==s?a=e:He=e),t.from==n&&(t.from!=t.to&&"before"!=s?a=e:He=e)}return a??He}var Ct=function(){var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function s(u){return u<=247?r.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?n.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,t=/[LRr]/,i=/[Lb1n]/,o=/[1n]/;function l(u,f,h){this.level=u,this.from=f,this.to=h}return function(u,f){var h="ltr"==f?"L":"R";if(0==u.length||"ltr"==f&&!a.test(u))return!1;for(var c=u.length,d=[],v=0;v<c;++v)d.push(s(u.charCodeAt(v)));for(var g=0,w=h;g<c;++g){var b=d[g];"m"==b?d[g]=w:w=b}for(var k=0,L=h;k<c;++k){var D=d[k];"1"==D&&"r"==L?d[k]="n":t.test(D)&&(L=D,"r"==D&&(d[k]="R"))}for(var O=1,E=d[0];O<c-1;++O){var H=d[O];"+"==H&&"1"==E&&"1"==d[O+1]?d[O]="1":","==H&&E==d[O+1]&&("1"==E||"n"==E)&&(d[O]=E),E=H}for(var _=0;_<c;++_){var re=d[_];if(","==re)d[_]="N";else if("%"==re){var j=void 0;for(j=_+1;j<c&&"%"==d[j];++j);for(var xe=_&&"!"==d[_-1]||j<c&&"1"==d[j]?"1":"N",Me=_;Me<j;++Me)d[Me]=xe;_=j-1}}for(var Ne=0,Oe=h;Ne<c;++Ne){var Je=d[Ne];"L"==Oe&&"1"==Je?d[Ne]="L":t.test(Je)&&(Oe=Je)}for(var Be=0;Be<c;++Be)if(e.test(d[Be])){var De=void 0;for(De=Be+1;De<c&&e.test(d[De]);++De);for(var We="L"==(Be?d[Be-1]:h),ct=We==("L"==(De<c?d[De]:h))?We?"L":"R":h,ot=Be;ot<De;++ot)d[ot]=ct;Be=De-1}for(var yt,Fe=[],xt=0;xt<c;)if(i.test(d[xt])){var tn=xt;for(++xt;xt<c&&i.test(d[xt]);++xt);Fe.push(new l(0,tn,xt))}else{var dt=xt,$t=Fe.length,pt="rtl"==f?1:0;for(++xt;xt<c&&"L"!=d[xt];++xt);for(var Ut=dt;Ut<xt;)if(o.test(d[Ut])){dt<Ut&&(Fe.splice($t,0,new l(1,dt,Ut)),$t+=pt);var fr=Ut;for(++Ut;Ut<xt&&o.test(d[Ut]);++Ut);Fe.splice($t,0,new l(2,fr,Ut)),$t+=pt,dt=Ut}else++Ut;dt<xt&&Fe.splice($t,0,new l(1,dt,xt))}return"ltr"==f&&(1==Fe[0].level&&(yt=u.match(/^\s+/))&&(Fe[0].from=yt[0].length,Fe.unshift(new l(0,0,yt[0].length))),1==be(Fe).level&&(yt=u.match(/\s+$/))&&(be(Fe).to-=yt[0].length,Fe.push(new l(0,c-yt[0].length,c)))),"rtl"==f?Fe.reverse():Fe}}();function Zt(r,n){var s=r.order;return null==s&&(s=r.order=Ct(r.text,n)),s}var kn=[],ce=function(r,n,s){if(r.addEventListener)r.addEventListener(n,s,!1);else if(r.attachEvent)r.attachEvent("on"+n,s);else{var a=r._handlers||(r._handlers={});a[n]=(a[n]||kn).concat(s)}};function Ki(r,n){return r._handlers&&r._handlers[n]||kn}function we(r,n,s){if(r.removeEventListener)r.removeEventListener(n,s,!1);else if(r.detachEvent)r.detachEvent("on"+n,s);else{var a=r._handlers,e=a&&a[n];if(e){var t=Q(e,s);t>-1&&(a[n]=e.slice(0,t).concat(e.slice(t+1)))}}}function mt(r,n){var s=Ki(r,n);if(s.length)for(var a=Array.prototype.slice.call(arguments,2),e=0;e<s.length;++e)s[e].apply(null,a)}function te(r,n,s){return"string"==typeof n&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),mt(r,s||n.type,r,n),Yt(n)||n.codemirrorIgnore}function Hr(r){var n=r._handlers&&r._handlers.cursorActivity;if(n)for(var s=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),a=0;a<n.length;++a)-1==Q(s,n[a])&&s.push(n[a])}function rt(r,n){return Ki(r,n).length>0}function nt(r){r.prototype.on=function(n,s){ce(this,n,s)},r.prototype.off=function(n,s){we(this,n,s)}}function Ee(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function cr(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function Yt(r){return null!=r.defaultPrevented?r.defaultPrevented:0==r.returnValue}function tr(r){Ee(r),cr(r)}function Mt(r){return r.target||r.srcElement}function _n(r){var n=r.which;return null==n&&(1&r.button?n=1:2&r.button?n=3:4&r.button&&(n=2)),Ye&&r.ctrlKey&&1==n&&(n=3),n}var Ir,dr,rr=function(){if(ne&&Y<9)return!1;var r=M("div");return"draggable"in r||"dragDrop"in r}();function Zi(r){if(null==Ir){var n=M("span","\u200b");Xe(r,M("span",[n,document.createTextNode("x")])),0!=r.firstChild.offsetHeight&&(Ir=n.offsetWidth<=1&&n.offsetHeight>2&&!(ne&&Y<8))}var s=Ir?M("span","\u200b"):M("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return s.setAttribute("cm-text",""),s}function Ml(r){if(null!=dr)return dr;var n=Xe(r,document.createTextNode("A\u062eA")),s=y(n,0,1).getBoundingClientRect(),a=y(n,1,2).getBoundingClientRect();return fe(r),!(!s||s.left==s.right)&&(dr=a.right-s.right<3)}var r,Ln=3!="\n\nb".split(/\n/).length?function(r){for(var n=0,s=[],a=r.length;n<=a;){var e=r.indexOf("\n",n);-1==e&&(e=r.length);var t=r.slice(n,"\r"==r.charAt(e-1)?e-1:e),i=t.indexOf("\r");-1!=i?(s.push(t.slice(0,i)),n+=i+1):(s.push(t),n=e+1)}return s}:function(r){return r.split(/\r\n?|\n/)},Po=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var n;try{n=r.ownerDocument.selection.createRange()}catch{}return!(!n||n.parentElement()!=r)&&0!=n.compareEndPoints("StartToEnd",n)},Yi="oncopy"in(r=M("div"))||(r.setAttribute("oncopy","return;"),"function"==typeof r.oncopy),Pr=null;var Br={},rn={};function Mr(r,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Br[r]=n}function nn(r){if("string"==typeof r&&rn.hasOwnProperty(r))r=rn[r];else if(r&&"string"==typeof r.name&&rn.hasOwnProperty(r.name)){var n=rn[r.name];"string"==typeof n&&(n={name:n}),(r=ee(n,r)).name=n.name}else{if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return nn("application/xml");if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return nn("application/json")}return"string"==typeof r?{name:r}:r||{name:"null"}}function pr(r,n){n=nn(n);var s=Br[n.name];if(!s)return pr(r,"text/plain");var a=s(r,n);if(Xt.hasOwnProperty(n.name)){var e=Xt[n.name];for(var t in e)e.hasOwnProperty(t)&&(a.hasOwnProperty(t)&&(a["_"+t]=a[t]),a[t]=e[t])}if(a.name=n.name,n.helperType&&(a.helperType=n.helperType),n.modeProps)for(var i in n.modeProps)a[i]=n.modeProps[i];return a}var Xt={};function Un(r,n){$(n,Xt.hasOwnProperty(r)?Xt[r]:Xt[r]={})}function xr(r,n){if(!0===n)return n;if(r.copyState)return r.copyState(n);var s={};for(var a in n){var e=n[a];e instanceof Array&&(e=e.concat([])),s[a]=e}return s}function Tn(r,n){for(var s;r.innerMode&&(s=r.innerMode(n))&&s.mode!=r;)n=s.state,r=s.mode;return s||{mode:r,state:n}}function on(r,n,s){return!r.startState||r.startState(n,s)}var ut=function(r,n,s){this.pos=this.start=0,this.string=r,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=s};function ae(r,n){if((n-=r.first)<0||n>=r.size)throw new Error("There is no line "+(n+r.first)+" in the document.");for(var s=r;!s.lines;)for(var a=0;;++a){var e=s.children[a],t=e.chunkSize();if(n<t){s=e;break}n-=t}return s.lines[n]}function Dr(r,n,s){var a=[],e=n.line;return r.iter(n.line,s.line+1,function(t){var i=t.text;e==s.line&&(i=i.slice(0,s.ch)),e==n.line&&(i=i.slice(n.ch)),a.push(i),++e}),a}function Mn(r,n,s){var a=[];return r.iter(n,s,function(e){a.push(e.text)}),a}function Ge(r,n){var s=n-r.height;if(s)for(var a=r;a;a=a.parent)a.height+=s}function q(r){if(null==r.parent)return null;for(var n=r.parent,s=Q(n.lines,r),a=n.parent;a;n=a,a=a.parent)for(var e=0;a.children[e]!=n;++e)s+=a.children[e].chunkSize();return s+n.first}function nr(r,n){var s=r.first;e:do{for(var a=0;a<r.children.length;++a){var e=r.children[a],t=e.height;if(n<t){r=e;continue e}n-=t,s+=e.chunkSize()}return s}while(!r.lines);for(var i=0;i<r.lines.length;++i){var l=r.lines[i].height;if(n<l)break;n-=l}return s+i}function ln(r,n){return n>=r.first&&n<r.first+r.size}function ir(r,n){return String(r.lineNumberFormatter(n+r.firstLineNumber))}function p(r,n,s){if(void 0===s&&(s=null),!(this instanceof p))return new p(r,n,s);this.line=r,this.ch=n,this.sticky=s}function x(r,n){return r.line-n.line||r.ch-n.ch}function W(r,n){return r.sticky==n.sticky&&0==x(r,n)}function R(r){return p(r.line,r.ch)}function N(r,n){return x(r,n)<0?n:r}function X(r,n){return x(r,n)<0?r:n}function Re(r,n){return Math.max(r.first,Math.min(n,r.first+r.size-1))}function ue(r,n){if(n.line<r.first)return p(r.first,0);var s=r.first+r.size-1;return n.line>s?p(s,ae(r,s).text.length):function or(r,n){var s=r.ch;return null==s||s>n?p(r.line,n):s<0?p(r.line,0):r}(n,ae(r,n.line).text.length)}function Gn(r,n){for(var s=[],a=0;a<n.length;a++)s[a]=ue(r,n[a]);return s}ut.prototype.eol=function(){return this.pos>=this.string.length},ut.prototype.sol=function(){return this.pos==this.lineStart},ut.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ut.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ut.prototype.eat=function(r){var n=this.string.charAt(this.pos);if("string"==typeof r?n==r:n&&(r.test?r.test(n):r(n)))return++this.pos,n},ut.prototype.eatWhile=function(r){for(var n=this.pos;this.eat(r););return this.pos>n},ut.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},ut.prototype.skipToEnd=function(){this.pos=this.string.length},ut.prototype.skipTo=function(r){var n=this.string.indexOf(r,this.pos);if(n>-1)return this.pos=n,!0},ut.prototype.backUp=function(r){this.pos-=r},ut.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=me(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},ut.prototype.indentation=function(){return me(this.string,null,this.tabSize)-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},ut.prototype.match=function(r,n,s){if("string"!=typeof r){var t=this.string.slice(this.pos).match(r);return t&&t.index>0?null:(t&&!1!==n&&(this.pos+=t[0].length),t)}var a=function(i){return s?i.toLowerCase():i};if(a(this.string.substr(this.pos,r.length))==a(r))return!1!==n&&(this.pos+=r.length),!0},ut.prototype.current=function(){return this.string.slice(this.start,this.pos)},ut.prototype.hideFirstChars=function(r,n){this.lineStart+=r;try{return n()}finally{this.lineStart-=r}},ut.prototype.lookAhead=function(r){var n=this.lineOracle;return n&&n.lookAhead(r)},ut.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};var Xi=function(r,n){this.state=r,this.lookAhead=n},ye=function(r,n,s,a){this.state=n,this.doc=r,this.line=s,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};function Ta(r,n,s,a){var e=[r.state.modeGen],t={};Ro(r,n.text,r.doc.mode,s,function(u,f){return e.push(u,f)},t,a);for(var i=s.state,o=function(u){s.baseTokens=e;var f=r.state.overlays[u],h=1,c=0;s.state=!0,Ro(r,n.text,f.mode,s,function(d,v){for(var g=h;c<d;){var w=e[h];w>d&&e.splice(h,1,d,e[h+1],w),h+=2,c=Math.min(d,w)}if(v)if(f.opaque)e.splice(g,h-g,d,"overlay "+v),h=g+2;else for(;g<h;g+=2){var b=e[g+1];e[g+1]=(b?b+" ":"")+"overlay "+v}},t),s.state=i,s.baseTokens=null,s.baseTokenPos=1},l=0;l<r.state.overlays.length;++l)o(l);return{styles:e,classes:t.bgClass||t.textClass?t:null}}function Al(r,n,s){if(!n.styles||n.styles[0]!=r.state.modeGen){var a=Dn(r,q(n)),e=n.text.length>r.options.maxHighlightLength&&xr(r.doc.mode,a.state),t=Ta(r,n,a);e&&(a.state=e),n.stateAfter=a.save(!e),n.styles=t.styles,t.classes?n.styleClasses=t.classes:n.styleClasses&&(n.styleClasses=null),s===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return n.styles}function Dn(r,n,s){var a=r.doc,e=r.display;if(!a.mode.startState)return new ye(a,!0,n);var t=function Ma(r,n,s){for(var a,e,t=r.doc,i=s?-1:n-(r.doc.mode.innerMode?1e3:100),o=n;o>i;--o){if(o<=t.first)return t.first;var l=ae(t,o-1),u=l.stateAfter;if(u&&(!s||o+(u instanceof Xi?u.lookAhead:0)<=t.modeFrontier))return o;var f=me(l.text,null,r.options.tabSize);(null==e||a>f)&&(e=o-1,a=f)}return e}(r,n,s),i=t>a.first&&ae(a,t-1).stateAfter,o=i?ye.fromSaved(a,i,t):new ye(a,on(a.mode),t);return a.iter(t,n,function(l){br(r,l.text,o);var u=o.line;l.stateAfter=u==n-1||u%5==0||u>=e.viewFrom&&u<e.viewTo?o.save():null,o.nextLine()}),s&&(a.modeFrontier=o.line),o}function br(r,n,s,a){var e=r.doc.mode,t=new ut(n,r.options.tabSize,s);for(t.start=t.pos=a||0,""==n&&Nl(e,s.state);!t.eol();)Bo(e,t,s.state),t.start=t.pos}function Nl(r,n){if(r.blankLine)return r.blankLine(n);if(r.innerMode){var s=Tn(r,n);if(s.mode.blankLine)return s.mode.blankLine(s.state)}}function Bo(r,n,s,a){for(var e=0;e<10;e++){a&&(a[0]=Tn(r,s).mode);var t=r.token(n,s);if(n.pos>n.start)return t}throw new Error("Mode "+r.name+" failed to advance stream.")}ye.prototype.lookAhead=function(r){var n=this.doc.getLine(this.line+r);return null!=n&&r>this.maxLookAhead&&(this.maxLookAhead=r),n},ye.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},ye.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ye.fromSaved=function(r,n,s){return n instanceof Xi?new ye(r,xr(r.mode,n.state),s,n.lookAhead):new ye(r,xr(r.mode,n),s)},ye.prototype.save=function(r){var n=!1!==r?xr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Xi(n,this.maxLookAhead):n};var si=function(r,n,s){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=n||null,this.state=s};function zo(r,n,s,a){var i,f,e=r.doc,t=e.mode,o=ae(e,(n=ue(e,n)).line),l=Dn(r,n.line,s),u=new ut(o.text,r.options.tabSize,l);for(a&&(f=[]);(a||u.pos<n.ch)&&!u.eol();)u.start=u.pos,i=Bo(t,u,l.state),a&&f.push(new si(u,i,xr(e.mode,l.state)));return a?f:new si(u,i,l.state)}function Fl(r,n){if(r)for(;;){var s=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!s)break;r=r.slice(0,s.index)+r.slice(s.index+s[0].length);var a=s[1]?"bgClass":"textClass";null==n[a]?n[a]=s[2]:new RegExp("(?:^|\\s)"+s[2]+"(?:$|\\s)").test(n[a])||(n[a]+=" "+s[2])}return r}function Ro(r,n,s,a,e,t,i){var o=s.flattenSpans;null==o&&(o=r.options.flattenSpans);var h,l=0,u=null,f=new ut(n,r.options.tabSize,a),c=r.options.addModeClass&&[null];for(""==n&&Fl(Nl(s,a.state),t);!f.eol();){if(f.pos>r.options.maxHighlightLength?(o=!1,i&&br(r,n,a,f.pos),f.pos=n.length,h=null):h=Fl(Bo(s,f,a.state,c),t),c){var d=c[0].name;d&&(h="m-"+(h?d+" "+h:d))}if(!o||u!=h){for(;l<f.start;)e(l=Math.min(f.start,l+5e3),u);u=h}f.start=f.pos}for(;l<f.pos;){var v=Math.min(f.pos,l+5e3);e(v,u),l=v}}var Ol=!1,zr=!1;function ji(r,n,s){this.marker=r,this.from=n,this.to=s}function vr(r,n){if(r)for(var s=0;s<r.length;++s){var a=r[s];if(a.marker==n)return a}}function As(r,n){for(var s,a=0;a<r.length;++a)r[a]!=n&&(s||(s=[])).push(r[a]);return s}function El(r,n){if(n.full)return null;var s=ln(r,n.from.line)&&ae(r,n.from.line).markedSpans,a=ln(r,n.to.line)&&ae(r,n.to.line).markedSpans;if(!s&&!a)return null;var e=n.from.ch,t=n.to.ch,i=0==x(n.from,n.to),o=function _o(r,n,s){var a;if(r)for(var e=0;e<r.length;++e){var t=r[e],i=t.marker;null!=t.from&&!(i.inclusiveLeft?t.from<=n:t.from<n)&&(t.from!=n||"bookmark"!=i.type||s&&t.marker.insertLeft)||(a||(a=[])).push(new ji(i,t.from,null==t.to||(i.inclusiveRight?t.to>=n:t.to>n)?null:t.to))}return a}(s,e,i),l=function Ji(r,n,s){var a;if(r)for(var e=0;e<r.length;++e){var t=r[e],i=t.marker;(null==t.to||(i.inclusiveRight?t.to>=n:t.to>n)||t.from==n&&"bookmark"==i.type&&(!s||t.marker.insertLeft))&&(a||(a=[])).push(new ji(i,null==t.from||(i.inclusiveLeft?t.from<=n:t.from<n)?null:t.from-n,null==t.to?null:t.to-n))}return a}(a,t,i),u=1==n.text.length,f=be(n.text).length+(u?e:0);if(o)for(var h=0;h<o.length;++h){var c=o[h];if(null==c.to){var d=vr(l,c.marker);d?u&&(c.to=null==d.to?null:d.to+f):c.to=e}}if(l)for(var v=0;v<l.length;++v){var g=l[v];null!=g.to&&(g.to+=f),null==g.from?vr(o,g.marker)||(g.from=f,u&&(o||(o=[])).push(g)):(g.from+=f,u&&(o||(o=[])).push(g))}o&&(o=Aa(o)),l&&l!=o&&(l=Aa(l));var b=[o];if(!u){var L,k=n.text.length-2;if(k>0&&o)for(var D=0;D<o.length;++D)null==o[D].to&&(L||(L=[])).push(new ji(o[D].marker,null,null));for(var O=0;O<k;++O)b.push(L);b.push(l)}return b}function Aa(r){for(var n=0;n<r.length;++n){var s=r[n];null!=s.from&&s.from==s.to&&!1!==s.marker.clearWhenEmpty&&r.splice(n--,1)}return r.length?r:null}function Na(r){var n=r.markedSpans;if(n){for(var s=0;s<n.length;++s)n[s].marker.detachLine(r);r.markedSpans=null}}function Uo(r,n){if(n){for(var s=0;s<n.length;++s)n[s].marker.attachLine(r);r.markedSpans=n}}function Qi(r){return r.inclusiveLeft?-1:0}function Go(r){return r.inclusiveRight?1:0}function qo(r,n){var s=r.lines.length-n.lines.length;if(0!=s)return s;var a=r.find(),e=n.find(),t=x(a.from,e.from)||Qi(r)-Qi(n);return t?-t:x(a.to,e.to)||Go(r)-Go(n)||n.id-r.id}function Wl(r,n){var a,s=zr&&r.markedSpans;if(s)for(var e=void 0,t=0;t<s.length;++t)(e=s[t]).marker.collapsed&&null==(n?e.from:e.to)&&(!a||qo(a,e.marker)<0)&&(a=e.marker);return a}function Vi(r){return Wl(r,!0)}function qn(r){return Wl(r,!1)}function Hl(r,n){var a,s=zr&&r.markedSpans;if(s)for(var e=0;e<s.length;++e){var t=s[e];t.marker.collapsed&&(null==t.from||t.from<n)&&(null==t.to||t.to>n)&&(!a||qo(a,t.marker)<0)&&(a=t.marker)}return a}function Il(r,n,s,a,e){var t=ae(r,n),i=zr&&t.markedSpans;if(i)for(var o=0;o<i.length;++o){var l=i[o];if(l.marker.collapsed){var u=l.marker.find(0),f=x(u.from,s)||Qi(l.marker)-Qi(e),h=x(u.to,a)||Go(l.marker)-Go(e);if(!(f>=0&&h<=0||f<=0&&h>=0)&&(f<=0&&(l.marker.inclusiveRight&&e.inclusiveLeft?x(u.to,s)>=0:x(u.to,s)>0)||f>=0&&(l.marker.inclusiveRight&&e.inclusiveLeft?x(u.from,a)<=0:x(u.from,a)<0)))return!0}}}function wr(r){for(var n;n=Vi(r);)r=n.find(-1,!0).line;return r}function Zo(r,n){var s=ae(r,n),a=wr(s);return s==a?n:q(a)}function Ar(r,n){if(n>r.lastLine())return n;var a,s=ae(r,n);if(!An(r,s))return n;for(;a=qn(s);)s=a.find(1,!0).line;return q(s)+1}function An(r,n){var s=zr&&n.markedSpans;if(s)for(var a=void 0,e=0;e<s.length;++e)if((a=s[e]).marker.collapsed){if(null==a.from)return!0;if(!a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&Pl(r,n,a))return!0}}function Pl(r,n,s){if(null==s.to){var a=s.marker.find(1,!0);return Pl(r,a.line,vr(a.line.markedSpans,s.marker))}if(s.marker.inclusiveRight&&s.to==n.text.length)return!0;for(var e=void 0,t=0;t<n.markedSpans.length;++t)if((e=n.markedSpans[t]).marker.collapsed&&!e.marker.widgetNode&&e.from==s.to&&(null==e.to||e.to!=s.from)&&(e.marker.inclusiveLeft||s.marker.inclusiveRight)&&Pl(r,n,e))return!0}function Nr(r){for(var n=0,s=(r=wr(r)).parent,a=0;a<s.lines.length;++a){var e=s.lines[a];if(e==r)break;n+=e.height}for(var t=s.parent;t;t=(s=t).parent)for(var i=0;i<t.children.length;++i){var o=t.children[i];if(o==s)break;n+=o.height}return n}function $i(r){if(0==r.height)return 0;for(var s,n=r.text.length,a=r;s=Vi(a);){var e=s.find(0,!0);a=e.from.line,n+=e.from.ch-e.to.ch}for(a=r;s=qn(a);){var t=s.find(0,!0);n-=a.text.length-t.from.ch,n+=(a=t.to.line).text.length-t.to.ch}return n}function Rr(r){var n=r.display,s=r.doc;n.maxLine=ae(s,s.first),n.maxLineLength=$i(n.maxLine),n.maxLineChanged=!0,s.iter(function(a){var e=$i(a);e>n.maxLineLength&&(n.maxLineLength=e,n.maxLine=a)})}var Nn=function(r,n,s){this.text=r,Uo(this,n),this.height=s?s(this):1};function Yo(r){r.parent=null,Na(r)}Nn.prototype.lineNo=function(){return q(this)},nt(Nn);var Bl={},ui={};function Fa(r,n){if(!r||/^\s*$/.test(r))return null;var s=n.addModeClass?ui:Bl;return s[r]||(s[r]=r.replace(/\S+/g,"cm-$&"))}function Oa(r,n){var s=oe("span",null,null,B?"padding-right: .1px":null),a={pre:oe("pre",[s],"CodeMirror-line"),content:s,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};n.measure={};for(var e=0;e<=(n.rest?n.rest.length:0);e++){var t=e?n.rest[e-1]:n.line,i=void 0;a.pos=0,a.addToken=Ws,Ml(r.display.measure)&&(i=Zt(t,r.doc.direction))&&(a.addToken=Wa(a.addToken,i)),a.map=[],Hs(t,a,Al(r,t,n!=r.display.externalMeasured&&q(t))),t.styleClasses&&(t.styleClasses.bgClass&&(a.bgClass=V(t.styleClasses.bgClass,a.bgClass||"")),t.styleClasses.textClass&&(a.textClass=V(t.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(Zi(r.display.measure))),0==e?(n.measure.map=a.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(a.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(B){var l=a.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return mt(r,"renderLine",r,n.line,a.pre),a.pre.className&&(a.textClass=V(a.pre.className,a.textClass||"")),a}function Es(r){var n=M("span","\u2022","cm-invalidchar");return n.title="\\u"+r.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Ws(r,n,s,a,e,t,i){if(n){var f,o=r.splitSpaces?function Ea(r,n){if(r.length>1&&!/  /.test(r))return r;for(var s=n,a="",e=0;e<r.length;e++){var t=r.charAt(e);" "==t&&s&&(e==r.length-1||32==r.charCodeAt(e+1))&&(t="\xa0"),a+=t,s=" "==t}return a}(n,r.trailingSpace):n,l=r.cm.state.specialChars,u=!1;if(l.test(n)){f=document.createDocumentFragment();for(var h=0;;){l.lastIndex=h;var c=l.exec(n),d=c?c.index-h:n.length-h;if(d){var v=document.createTextNode(o.slice(h,h+d));f.appendChild(ne&&Y<9?M("span",[v]):v),r.map.push(r.pos,r.pos+d,v),r.col+=d,r.pos+=d}if(!c)break;h+=d+1;var g=void 0;if("\t"==c[0]){var w=r.cm.options.tabSize,b=w-r.col%w;(g=f.appendChild(M("span",er(b),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),r.col+=b}else"\r"==c[0]||"\n"==c[0]?((g=f.appendChild(M("span","\r"==c[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",c[0]),r.col+=1):((g=r.cm.options.specialCharPlaceholder(c[0])).setAttribute("cm-text",c[0]),f.appendChild(ne&&Y<9?M("span",[g]):g),r.col+=1);r.map.push(r.pos,r.pos+1,g),r.pos++}}else r.col+=n.length,f=document.createTextNode(o),r.map.push(r.pos,r.pos+n.length,f),ne&&Y<9&&(u=!0),r.pos+=n.length;if(r.trailingSpace=32==o.charCodeAt(n.length-1),s||a||e||u||t||i){var k=s||"";a&&(k+=a),e&&(k+=e);var L=M("span",[f],k,t);if(i)for(var D in i)i.hasOwnProperty(D)&&"style"!=D&&"class"!=D&&L.setAttribute(D,i[D]);return r.content.appendChild(L)}r.content.appendChild(f)}}function Wa(r,n){return function(s,a,e,t,i,o,l){e=e?e+" cm-force-border":"cm-force-border";for(var u=s.pos,f=u+a.length;;){for(var h=void 0,c=0;c<n.length&&!((h=n[c]).to>u&&h.from<=u);c++);if(h.to>=f)return r(s,a,e,t,i,o,l);r(s,a.slice(0,h.to-u),e,t,null,o,l),t=null,a=a.slice(h.to-u),u=h.to}}}function Ha(r,n,s,a){var e=!a&&s.widgetNode;e&&r.map.push(r.pos,r.pos+n,e),!a&&r.cm.display.input.needsContentAttribute&&(e||(e=r.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",s.id)),e&&(r.cm.display.input.setUneditable(e),r.content.appendChild(e)),r.pos+=n,r.trailingSpace=!1}function Hs(r,n,s){var a=r.markedSpans,e=r.text,t=0;if(a)for(var h,c,v,g,w,b,k,o=e.length,l=0,u=1,f="",d=0;;){if(d==l){v=g=w=c="",k=null,b=null,d=1/0;for(var L=[],D=void 0,O=0;O<a.length;++O){var E=a[O],H=E.marker;if("bookmark"==H.type&&E.from==l&&H.widgetNode)L.push(H);else if(E.from<=l&&(null==E.to||E.to>l||H.collapsed&&E.to==l&&E.from==l)){if(null!=E.to&&E.to!=l&&d>E.to&&(d=E.to,g=""),H.className&&(v+=" "+H.className),H.css&&(c=(c?c+";":"")+H.css),H.startStyle&&E.from==l&&(w+=" "+H.startStyle),H.endStyle&&E.to==d&&(D||(D=[])).push(H.endStyle,E.to),H.title&&((k||(k={})).title=H.title),H.attributes)for(var _ in H.attributes)(k||(k={}))[_]=H.attributes[_];H.collapsed&&(!b||qo(b.marker,H)<0)&&(b=E)}else E.from>l&&d>E.from&&(d=E.from)}if(D)for(var re=0;re<D.length;re+=2)D[re+1]==d&&(g+=" "+D[re]);if(!b||b.from==l)for(var j=0;j<L.length;++j)Ha(n,0,L[j]);if(b&&(b.from||0)==l){if(Ha(n,(null==b.to?o+1:b.to)-l,b.marker,null==b.from),null==b.to)return;b.to==l&&(b=!1)}}if(l>=o)break;for(var xe=Math.min(o,d);;){if(f){var Me=l+f.length;if(!b){var Ne=Me>xe?f.slice(0,xe-l):f;n.addToken(n,Ne,h?h+v:v,w,l+Ne.length==d?g:"",c,k)}if(Me>=xe){f=f.slice(xe-l),l=xe;break}l=Me,w=""}f=e.slice(t,t=s[u++]),h=Fa(s[u++],n.cm.options)}}else for(var i=1;i<s.length;i+=2)n.addToken(n,e.slice(t,t=s[i]),Fa(s[i+1],n.cm.options))}function Ia(r,n,s){this.line=n,this.rest=function Os(r){for(var n,s;n=qn(r);)r=n.find(1,!0).line,(s||(s=[])).push(r);return s}(n),this.size=this.rest?q(be(this.rest))-s+1:1,this.node=this.text=null,this.hidden=An(r,n)}function Xo(r,n,s){for(var e,a=[],t=n;t<s;t=e){var i=new Ia(r.doc,ae(r.doc,t),t);e=t+i.size,a.push(i)}return a}var Kn=null;var _r=null;function Dt(r,n){var s=Ki(r,n);if(s.length){var e,a=Array.prototype.slice.call(arguments,2);Kn?e=Kn.delayedCallbacks:_r?e=_r:(e=_r=[],setTimeout(Ps,0));for(var t=function(o){e.push(function(){return s[o].apply(null,a)})},i=0;i<s.length;++i)t(i)}}function Ps(){var r=_r;_r=null;for(var n=0;n<r.length;++n)r[n]()}function Ba(r,n,s,a){for(var e=0;e<n.changes.length;e++){var t=n.changes[e];"text"==t?Ra(r,n):"gutter"==t?_a(r,n,s,a):"class"==t?Zn(r,n):"widget"==t&&Ua(r,n,a)}n.changes=null}function sn(r){return r.node==r.text&&(r.node=M("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),ne&&Y<8&&(r.node.style.zIndex=2)),r.node}function za(r,n){var s=r.display.externalMeasured;return s&&s.line==n.line?(r.display.externalMeasured=null,n.measure=s.measure,s.built):Oa(r,n)}function Ra(r,n){var s=n.text.className,a=za(r,n);n.text==n.node&&(n.node=a.pre),n.text.parentNode.replaceChild(a.pre,n.text),n.text=a.pre,a.bgClass!=n.bgClass||a.textClass!=n.textClass?(n.bgClass=a.bgClass,n.textClass=a.textClass,Zn(r,n)):s&&(n.text.className=s)}function Zn(r,n){(function At(r,n){var s=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(s&&(s+=" CodeMirror-linebackground"),n.background)s?n.background.className=s:(n.background.parentNode.removeChild(n.background),n.background=null);else if(s){var a=sn(n);n.background=a.insertBefore(M("div",null,s),a.firstChild),r.display.input.setUneditable(n.background)}})(r,n),n.line.wrapClass?sn(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className=""),n.text.className=(n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass)||""}function _a(r,n,s,a){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var e=sn(n);n.gutterBackground=M("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(r.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),r.display.input.setUneditable(n.gutterBackground),e.insertBefore(n.gutterBackground,n.text)}var t=n.line.gutterMarkers;if(r.options.lineNumbers||t){var i=sn(n),o=n.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if(o.setAttribute("aria-hidden","true"),r.display.input.setUneditable(o),i.insertBefore(o,n.text),n.line.gutterClass&&(o.className+=" "+n.line.gutterClass),r.options.lineNumbers&&(!t||!t["CodeMirror-linenumbers"])&&(n.lineNumber=o.appendChild(M("div",ir(r.options,s),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),t)for(var l=0;l<r.display.gutterSpecs.length;++l){var u=r.display.gutterSpecs[l].className,f=t.hasOwnProperty(u)&&t[u];f&&o.appendChild(M("div",[f],"CodeMirror-gutter-elt","left: "+a.gutterLeft[u]+"px; width: "+a.gutterWidth[u]+"px"))}}}function Ua(r,n,s){n.alignable&&(n.alignable=null);for(var a=Pe("CodeMirror-linewidget"),e=n.node.firstChild,t=void 0;e;e=t)t=e.nextSibling,a.test(e.className)&&n.node.removeChild(e);Jo(r,n,s)}function Bs(r,n,s,a){var e=za(r,n);return n.text=n.node=e.pre,e.bgClass&&(n.bgClass=e.bgClass),e.textClass&&(n.textClass=e.textClass),Zn(r,n),_a(r,n,s,a),Jo(r,n,a),n.node}function Jo(r,n,s){if(zl(r,n.line,n,s,!0),n.rest)for(var a=0;a<n.rest.length;a++)zl(r,n.rest[a],n,s,!1)}function zl(r,n,s,a,e){if(n.widgets)for(var t=sn(s),i=0,o=n.widgets;i<o.length;++i){var l=o[i],u=M("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),zs(l,u,s,a),r.display.input.setUneditable(u),e&&l.above?t.insertBefore(u,s.gutter||s.text):t.appendChild(u),Dt(l,"redraw")}}function zs(r,n,s,a){if(r.noHScroll){(s.alignable||(s.alignable=[])).push(n);var e=a.wrapperWidth;n.style.left=a.fixedPos+"px",r.coverGutter||(e-=a.gutterTotalWidth,n.style.paddingLeft=a.gutterTotalWidth+"px"),n.style.width=e+"px"}r.coverGutter&&(n.style.zIndex=5,n.style.position="relative",r.noHScroll||(n.style.marginLeft=-a.gutterTotalWidth+"px"))}function eo(r){if(null!=r.height)return r.height;var n=r.doc.cm;if(!n)return 0;if(!K(document.body,r.node)){var s="position: relative;";r.coverGutter&&(s+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),r.noHScroll&&(s+="width: "+n.display.wrapper.clientWidth+"px;"),Xe(n.display.measure,M("div",[r.node],null,s))}return r.height=r.node.parentNode.offsetHeight}function Ur(r,n){for(var s=Mt(n);s!=r.wrapper;s=s.parentNode)if(!s||1==s.nodeType&&"true"==s.getAttribute("cm-ignore-events")||s.parentNode==r.sizer&&s!=r.mover)return!0}function to(r){return r.lineSpace.offsetTop}function Rl(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function fi(r){if(r.cachedPaddingH)return r.cachedPaddingH;var n=Xe(r.measure,M("pre","x","CodeMirror-line-like")),s=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,a={left:parseInt(s.paddingLeft),right:parseInt(s.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(r.cachedPaddingH=a),a}function zt(r){return F-r.display.nativeBarWidth}function Gr(r){return r.display.scroller.clientWidth-zt(r)-r.display.barWidth}function ro(r){return r.display.scroller.clientHeight-zt(r)-r.display.barHeight}function Fr(r,n,s){if(r.line==n)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var a=0;a<r.rest.length;a++)if(r.rest[a]==n)return{map:r.measure.maps[a],cache:r.measure.caches[a]};for(var e=0;e<r.rest.length;e++)if(q(r.rest[e])>s)return{map:r.measure.maps[e],cache:r.measure.caches[e],before:!0}}}function Qo(r,n,s,a){return qr(r,Xn(r,n),s,a)}function _l(r,n){if(n>=r.display.viewFrom&&n<r.display.viewTo)return r.display.view[cn(r,n)];var s=r.display.externalMeasured;return s&&n>=s.lineN&&n<s.lineN+s.size?s:void 0}function Xn(r,n){var s=q(n),a=_l(r,s);a&&!a.text?a=null:a&&a.changes&&(Ba(r,a,s,Xl(r)),r.curOp.forceUpdate=!0),a||(a=function Yn(r,n){var s=q(n=wr(n)),a=r.display.externalMeasured=new Ia(r.doc,n,s);a.lineN=s;var e=a.built=Oa(r,a);return a.text=e.pre,Xe(r.display.lineMeasure,e.pre),a}(r,n));var e=Fr(a,n,s);return{line:n,view:a,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function qr(r,n,s,a,e){n.before&&(s=-1);var i,t=s+(a||"");return n.cache.hasOwnProperty(t)?i=n.cache[t]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(function Ga(r,n,s){var a=r.options.lineWrapping,e=a&&Gr(r);if(!n.measure.heights||a&&n.measure.width!=e){var t=n.measure.heights=[];if(a){n.measure.width=e;for(var i=n.text.firstChild.getClientRects(),o=0;o<i.length-1;o++){var l=i[o],u=i[o+1];Math.abs(l.bottom-u.bottom)>2&&t.push((l.bottom+u.top)/2-s.top)}}t.push(s.bottom-s.top)}}(r,n.view,n.rect),n.hasHeights=!0),(i=function Kr(r,n,s,a){var u,e=Vo(n.map,s,a),t=e.node,i=e.start,o=e.end,l=e.collapse;if(3==t.nodeType){for(var f=0;f<4;f++){for(;i&&Gt(n.line.text.charAt(e.coverStart+i));)--i;for(;e.coverStart+o<e.coverEnd&&Gt(n.line.text.charAt(e.coverStart+o));)++o;if((u=ne&&Y<9&&0==i&&o==e.coverEnd-e.coverStart?t.parentNode.getBoundingClientRect():hi(y(t,i,o).getClientRects(),a)).left||u.right||0==i)break;o=i,i-=1,l="right"}ne&&Y<11&&(u=function qa(r,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function yr(r){if(null!=Pr)return Pr;var n=Xe(r,M("span","x")),s=n.getBoundingClientRect(),a=y(n,0,1).getBoundingClientRect();return Pr=Math.abs(s.left-a.left)>1}(r))return n;var s=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*s,right:n.right*s,top:n.top*a,bottom:n.bottom*a}}(r.display.measure,u))}else{var h;i>0&&(l=a="right"),u=r.options.lineWrapping&&(h=t.getClientRects()).length>1?h["right"==a?h.length-1:0]:t.getBoundingClientRect()}if(ne&&Y<9&&!i&&(!u||!u.left&&!u.right)){var c=t.parentNode.getClientRects()[0];u=c?{left:c.left,right:c.left+pi(r.display),top:c.top,bottom:c.bottom}:Ul}for(var d=u.top-n.rect.top,v=u.bottom-n.rect.top,g=(d+v)/2,w=n.view.measure.heights,b=0;b<w.length-1&&!(g<w[b]);b++);var D={left:("right"==l?u.right:u.left)-n.rect.left,right:("left"==l?u.left:u.right)-n.rect.left,top:b?w[b-1]:0,bottom:w[b]};return!u.left&&!u.right&&(D.bogus=!0),r.options.singleCursorHeightPerLine||(D.rtop=d,D.rbottom=v),D}(r,n,s,a)).bogus||(n.cache[t]=i)),{left:i.left,right:i.right,top:e?i.rtop:i.top,bottom:e?i.rbottom:i.bottom}}var un,Ul={left:0,right:0,top:0,bottom:0};function Vo(r,n,s){for(var a,e,t,i,o,l,u=0;u<r.length;u+=3)if(l=r[u+1],n<(o=r[u])?(e=0,t=1,i="left"):n<l?t=1+(e=n-o):(u==r.length-3||n==l&&r[u+3]>n)&&(e=(t=l-o)-1,n>=l&&(i="right")),null!=e){if(a=r[u+2],o==l&&s==(a.insertLeft?"left":"right")&&(i=s),"left"==s&&0==e)for(;u&&r[u-2]==r[u-3]&&r[u-1].insertLeft;)a=r[2+(u-=3)],i="left";if("right"==s&&e==l-o)for(;u<r.length-3&&r[u+3]==r[u+4]&&!r[u+5].insertLeft;)a=r[(u+=3)+2],i="right";break}return{node:a,start:e,end:t,collapse:i,coverStart:o,coverEnd:l}}function hi(r,n){var s=Ul;if("left"==n)for(var a=0;a<r.length&&(s=r[a]).left==s.right;a++);else for(var e=r.length-1;e>=0&&(s=r[e]).left==s.right;e--);return s}function Gl(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var n=0;n<r.rest.length;n++)r.measure.caches[n]={}}function Ka(r){r.display.externalMeasure=null,fe(r.display.lineMeasure);for(var n=0;n<r.display.view.length;n++)Gl(r.display.view[n])}function no(r){Ka(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Za(r){return de&&at?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function ql(r){return de&&at?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function $o(r){var s=wr(r).widgets,a=0;if(s)for(var e=0;e<s.length;++e)s[e].above&&(a+=eo(s[e]));return a}function Fn(r,n,s,a,e){if(!e){var t=$o(n);s.top+=t,s.bottom+=t}if("line"==a)return s;a||(a="local");var i=Nr(n);if("local"==a?i+=to(r.display):i-=r.display.viewOffset,"page"==a||"window"==a){var o=r.display.lineSpace.getBoundingClientRect();i+=o.top+("window"==a?0:ql(Qe(r)));var l=o.left+("window"==a?0:Za(Qe(r)));s.left+=l,s.right+=l}return s.top+=i,s.bottom+=i,s}function Kl(r,n,s){if("div"==s)return n;var a=n.left,e=n.top;if("page"==s)a-=Za(Qe(r)),e-=ql(Qe(r));else if("local"==s||!s){var t=r.display.sizer.getBoundingClientRect();a+=t.left,e+=t.top}var i=r.display.lineSpace.getBoundingClientRect();return{left:a-i.left,top:e-i.top}}function io(r,n,s,a,e){return a||(a=ae(r.doc,n.line)),Fn(r,a,Qo(r,a,n.ch,e),s)}function gr(r,n,s,a,e,t){function i(v,g){var w=qr(r,e,v,g?"right":"left",t);return g?w.left=w.right:w.right=w.left,Fn(r,a,w,s)}a=a||ae(r.doc,n.line),e||(e=Xn(r,a));var o=Zt(a,r.doc.direction),l=n.ch,u=n.sticky;if(l>=a.text.length?(l=a.text.length,u="before"):l<=0&&(l=0,u="after"),!o)return i("before"==u?l-1:l,"before"==u);function f(v,g,w){return i(w?v-1:v,1==o[g].level!=w)}var h=st(o,l,u),c=He,d=f(l,h,"before"==u);return null!=c&&(d.other=f(l,c,"before"!=u)),d}function oo(r,n){var s=0;n=ue(r.doc,n),r.options.lineWrapping||(s=pi(r.display)*n.ch);var a=ae(r.doc,n.line),e=Nr(a)+to(r.display);return{left:s,right:s,top:e,bottom:e+a.height}}function el(r,n,s,a,e){var t=p(r,n,s);return t.xRel=e,a&&(t.outside=a),t}function ci(r,n,s){var a=r.doc;if((s+=r.display.viewOffset)<0)return el(a.first,0,null,-1,-1);var e=nr(a,s),t=a.first+a.size-1;if(e>t)return el(a.first+a.size-1,ae(a,t).text.length,null,1,1);n<0&&(n=0);for(var i=ae(a,e);;){var o=Yl(r,i,e,n,s),l=Hl(i,o.ch+(o.xRel>0||o.outside>0?1:0));if(!l)return o;var u=l.find(1);if(u.line==e)return u;i=ae(a,e=u.line)}}function Cr(r,n,s,a){a-=$o(n);var e=n.text.length,t=Bt(function(i){return qr(r,s,i-1).bottom<=a},e,0);return{begin:t,end:e=Bt(function(i){return qr(r,s,i).top>a},t,e)}}function Zl(r,n,s,a){return s||(s=Xn(r,n)),Cr(r,n,s,Fn(r,n,qr(r,s,a),"line").top)}function lo(r,n,s,a){return!(r.bottom<=s)&&(r.top>s||(a?r.left:r.right)>n)}function Yl(r,n,s,a,e){e-=Nr(n);var t=Xn(r,n),i=$o(n),o=0,l=n.text.length,u=!0,f=Zt(n,r.doc.direction);if(f){var h=(r.options.lineWrapping?Xa:Ya)(r,n,s,t,f,a,e);o=(u=1!=h.level)?h.from:h.to-1,l=u?h.to:h.from-1}var g,w,c=null,d=null,v=Bt(function(O){var E=qr(r,t,O);return E.top+=i,E.bottom+=i,!!lo(E,a,e,!1)&&(E.top<=e&&E.left<=a&&(c=O,d=E),!0)},o,l),b=!1;if(d){var k=a-d.left<d.right-a,L=k==u;v=c+(L?0:1),w=L?"after":"before",g=k?d.left:d.right}else{!u&&(v==l||v==o)&&v++,w=0==v?"after":v==n.text.length?"before":qr(r,t,v-(u?1:0)).bottom+i<=e==u?"after":"before";var D=gr(r,p(s,v,w),"line",n,t);g=D.left,b=e<D.top?-1:e>=D.bottom?1:0}return el(s,v=Pt(n.text,v,1),w,b,a-g)}function Ya(r,n,s,a,e,t,i){var o=Bt(function(h){var c=e[h],d=1!=c.level;return lo(gr(r,p(s,d?c.to:c.from,d?"before":"after"),"line",n,a),t,i,!0)},0,e.length-1),l=e[o];if(o>0){var u=1!=l.level,f=gr(r,p(s,u?l.from:l.to,u?"after":"before"),"line",n,a);lo(f,t,i,!0)&&f.top>i&&(l=e[o-1])}return l}function Xa(r,n,s,a,e,t,i){var o=Cr(r,n,a,i),l=o.begin,u=o.end;/\s/.test(n.text.charAt(u-1))&&u--;for(var f=null,h=null,c=0;c<e.length;c++){var d=e[c];if(!(d.from>=u||d.to<=l)){var g=qr(r,a,1!=d.level?Math.min(u,d.to)-1:Math.max(l,d.from)).right,w=g<t?t-g+1e9:g-t;(!f||h>w)&&(f=d,h=w)}}return f||(f=e[e.length-1]),f.from<l&&(f={from:l,to:f.to,level:f.level}),f.to>u&&(f={from:f.from,to:u,level:f.level}),f}function di(r){if(null!=r.cachedTextHeight)return r.cachedTextHeight;if(null==un){un=M("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)un.appendChild(document.createTextNode("x")),un.appendChild(M("br"));un.appendChild(document.createTextNode("x"))}Xe(r.measure,un);var s=un.offsetHeight/50;return s>3&&(r.cachedTextHeight=s),fe(r.measure),s||1}function pi(r){if(null!=r.cachedCharWidth)return r.cachedCharWidth;var n=M("span","xxxxxxxxxx"),s=M("pre",[n],"CodeMirror-line-like");Xe(r.measure,s);var a=n.getBoundingClientRect(),e=(a.right-a.left)/10;return e>2&&(r.cachedCharWidth=e),e||10}function Xl(r){for(var n=r.display,s={},a={},e=n.gutters.clientLeft,t=n.gutters.firstChild,i=0;t;t=t.nextSibling,++i){var o=r.display.gutterSpecs[i].className;s[o]=t.offsetLeft+t.clientLeft+e,a[o]=t.clientWidth}return{fixedPos:fn(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:s,gutterWidth:a,wrapperWidth:n.wrapper.clientWidth}}function fn(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function jn(r){var n=di(r.display),s=r.options.lineWrapping,a=s&&Math.max(5,r.display.scroller.clientWidth/pi(r.display)-3);return function(e){if(An(r.doc,e))return 0;var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;i++)e.widgets[i].height&&(t+=e.widgets[i].height);return s?t+(Math.ceil(e.text.length/a)||1)*n:t+n}}function On(r){var n=r.doc,s=jn(r);n.iter(function(a){var e=s(a);e!=a.height&&Ge(a,e)})}function hn(r,n,s,a){var e=r.display;if(!s&&"true"==Mt(n).getAttribute("cm-not-content"))return null;var t,i,o=e.lineSpace.getBoundingClientRect();try{t=n.clientX-o.left,i=n.clientY-o.top}catch{return null}var u,l=ci(r,t,i);if(a&&l.xRel>0&&(u=ae(r.doc,l.line).text).length==l.ch){var f=me(u,u.length,r.options.tabSize)-u.length;l=p(l.line,Math.max(0,Math.round((t-fi(r.display).left)/pi(r.display))-f))}return l}function cn(r,n){if(n>=r.display.viewTo||(n-=r.display.viewFrom)<0)return null;for(var s=r.display.view,a=0;a<s.length;a++)if((n-=s[a].size)<0)return a}function jt(r,n,s,a){null==n&&(n=r.doc.first),null==s&&(s=r.doc.first+r.doc.size),a||(a=0);var e=r.display;if(a&&s<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>n)&&(e.updateLineNumbers=n),r.curOp.viewChanged=!0,n>=e.viewTo)zr&&Zo(r.doc,n)<e.viewTo&&sr(r);else if(s<=e.viewFrom)zr&&Ar(r.doc,s+a)>e.viewFrom?sr(r):(e.viewFrom+=a,e.viewTo+=a);else if(n<=e.viewFrom&&s>=e.viewTo)sr(r);else if(n<=e.viewFrom){var t=Yr(r,s,s+a,1);t?(e.view=e.view.slice(t.index),e.viewFrom=t.lineN,e.viewTo+=a):sr(r)}else if(s>=e.viewTo){var i=Yr(r,n,n,-1);i?(e.view=e.view.slice(0,i.index),e.viewTo=i.lineN):sr(r)}else{var o=Yr(r,n,n,-1),l=Yr(r,s,s+a,1);o&&l?(e.view=e.view.slice(0,o.index).concat(Xo(r,o.lineN,l.lineN)).concat(e.view.slice(l.index)),e.viewTo+=a):sr(r)}var u=e.externalMeasured;u&&(s<u.lineN?u.lineN+=a:n<u.lineN+u.size&&(e.externalMeasured=null))}function Zr(r,n,s){r.curOp.viewChanged=!0;var a=r.display,e=r.display.externalMeasured;if(e&&n>=e.lineN&&n<e.lineN+e.size&&(a.externalMeasured=null),!(n<a.viewFrom||n>=a.viewTo)){var t=a.view[cn(r,n)];if(null!=t.node){var i=t.changes||(t.changes=[]);-1==Q(i,s)&&i.push(s)}}}function sr(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Yr(r,n,s,a){var t,e=cn(r,n),i=r.display.view;if(!zr||s==r.doc.first+r.doc.size)return{index:e,lineN:s};for(var o=r.display.viewFrom,l=0;l<e;l++)o+=i[l].size;if(o!=n){if(a>0){if(e==i.length-1)return null;t=o+i[e].size-n,e++}else t=o-n;n+=t,s+=t}for(;Zo(r.doc,s)!=s;){if(e==(a<0?0:i.length-1))return null;s+=a*i[e-(a<0?1:0)].size,e+=a}return{index:e,lineN:s}}function dn(r){for(var n=r.display.view,s=0,a=0;a<n.length;a++){var e=n[a];!e.hidden&&(!e.node||e.changes)&&++s}return s}function Sr(r){r.display.input.showSelection(r.display.input.prepareSelection())}function ao(r,n){void 0===n&&(n=!0);var s=r.doc,a={},e=a.cursors=document.createDocumentFragment(),t=a.selection=document.createDocumentFragment(),i=r.options.$customCursor;i&&(n=!0);for(var o=0;o<s.sel.ranges.length;o++)if(n||o!=s.sel.primIndex){var l=s.sel.ranges[o];if(!(l.from().line>=r.display.viewTo||l.to().line<r.display.viewFrom)){var u=l.empty();if(i){var f=i(r,l);f&&jl(r,f,e)}else(u||r.options.showCursorWhenSelecting)&&jl(r,l.head,e);u||uo(r,l,t)}}return a}function jl(r,n,s){var a=gr(r,n,"div",null,null,!r.options.singleCursorHeightPerLine),e=s.appendChild(M("div","\xa0","CodeMirror-cursor"));if(e.style.left=a.left+"px",e.style.top=a.top+"px",e.style.height=Math.max(0,a.bottom-a.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var t=io(r,n,"div",null,null),i=t.right-t.left;e.style.width=(i>0?i:r.defaultCharWidth())+"px"}if(a.other){var o=s.appendChild(M("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=a.other.left+"px",o.style.top=a.other.top+"px",o.style.height=.85*(a.other.bottom-a.other.top)+"px"}}function so(r,n){return r.top-n.top||r.left-n.left}function uo(r,n,s){var a=r.display,e=r.doc,t=document.createDocumentFragment(),i=fi(r.display),o=i.left,l=Math.max(a.sizerWidth,Gr(r)-a.sizer.offsetLeft)-i.right,u="ltr"==e.direction;function f(L,D,O,E){D<0&&(D=0),D=Math.round(D),E=Math.round(E),t.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+L+"px;\n                             top: "+D+"px; width: "+(O??l-L)+"px;\n                             height: "+(E-D)+"px"))}function h(L,D,O){var _,re,E=ae(e,L),H=E.text.length;function j(Ne,Oe){return io(r,p(L,Ne),"div",E,Oe)}function xe(Ne,Oe,Je){var Be=Zl(r,E,null,Ne),De="ltr"==Oe==("after"==Je)?"left":"right";return j("after"==Je?Be.begin:Be.end-(/\s/.test(E.text.charAt(Be.end-1))?2:1),De)[De]}var Me=Zt(E,e.direction);return function Lt(r,n,s,a){if(!r)return a(n,s,"ltr",0);for(var e=!1,t=0;t<r.length;++t){var i=r[t];(i.from<s&&i.to>n||n==s&&i.to==n)&&(a(Math.max(i.from,n),Math.min(i.to,s),1==i.level?"rtl":"ltr",t),e=!0)}e||a(n,s,"ltr")}(Me,D||0,O??H,function(Ne,Oe,Je,Be){var De="ltr"==Je,We=j(Ne,De?"left":"right"),qe=j(Oe-1,De?"right":"left"),ct=null==D&&0==Ne,ot=null==O&&Oe==H,Fe=0==Be,yt=!Me||Be==Me.length-1;if(qe.top-We.top<=3){var dt=(u?ct:ot)&&Fe?o:(De?We:qe).left;f(dt,We.top,((u?ot:ct)&&yt?l:(De?qe:We).right)-dt,We.bottom)}else{var pt,Ut,fr,Sn;De?(pt=u&&ct&&Fe?o:We.left,Ut=u?l:xe(Ne,Je,"before"),fr=u?o:xe(Oe,Je,"after"),Sn=u&&ot&&yt?l:qe.right):(pt=u?xe(Ne,Je,"before"):o,Ut=!u&&ct&&Fe?l:We.right,fr=!u&&ot&&yt?o:qe.left,Sn=u?xe(Oe,Je,"after"):l),f(pt,We.top,Ut-pt,We.bottom),We.bottom<qe.top&&f(o,We.bottom,null,qe.top),f(fr,qe.top,Sn-fr,qe.bottom)}(!_||so(We,_)<0)&&(_=We),so(qe,_)<0&&(_=qe),(!re||so(We,re)<0)&&(re=We),so(qe,re)<0&&(re=qe)}),{start:_,end:re}}var c=n.from(),d=n.to();if(c.line==d.line)h(c.line,c.ch,d.ch);else{var v=ae(e,c.line),g=ae(e,d.line),w=wr(v)==wr(g),b=h(c.line,c.ch,w?v.text.length+1:null).end,k=h(d.line,w?0:null,d.ch).start;w&&(b.top<k.top-2?(f(b.right,b.top,null,b.bottom),f(o,k.top,k.left,k.bottom)):f(b.right,b.top,k.left-b.right,b.bottom)),b.bottom<k.top&&f(o,b.bottom,null,k.top)}s.appendChild(t)}function tl(r){if(r.state.focused){var n=r.display;clearInterval(n.blinker);var s=!0;n.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?n.blinker=setInterval(function(){r.hasFocus()||En(r),n.cursorDiv.style.visibility=(s=!s)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function rl(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||Jl(r))}function vi(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&En(r))},100)}function Jl(r,n){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),"nocursor"!=r.options.readOnly&&(r.state.focused||(mt(r,"focus",r,n),r.state.focused=!0,le(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),B&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),tl(r))}function En(r,n){r.state.delayingBlurEvent||(r.state.focused&&(mt(r,"blur",r,n),r.state.focused=!1,kt(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function fo(r){for(var n=r.display,s=n.lineDiv.offsetTop,a=Math.max(0,n.scroller.getBoundingClientRect().top),e=n.lineDiv.getBoundingClientRect().top,t=0,i=0;i<n.view.length;i++){var o=n.view[i],l=r.options.lineWrapping,u=void 0,f=0;if(!o.hidden){if(e+=o.line.height,ne&&Y<8){var h=o.node.offsetTop+o.node.offsetHeight;u=h-s,s=h}else{var c=o.node.getBoundingClientRect();u=c.bottom-c.top,!l&&o.text.firstChild&&(f=o.text.firstChild.getBoundingClientRect().right-c.left-1)}var d=o.line.height-u;if((d>.005||d<-.005)&&(e<a&&(t-=d),Ge(o.line,u),nl(o.line),o.rest))for(var v=0;v<o.rest.length;v++)nl(o.rest[v]);if(f>r.display.sizerWidth){var g=Math.ceil(f/pi(r.display));g>r.display.maxLineLength&&(r.display.maxLineLength=g,r.display.maxLine=o.line,r.display.maxLineChanged=!0)}}}Math.abs(t)>2&&(n.scroller.scrollTop+=t)}function nl(r){if(r.widgets)for(var n=0;n<r.widgets.length;++n){var s=r.widgets[n],a=s.node.parentNode;a&&(s.height=a.offsetHeight)}}function gi(r,n,s){var a=s&&null!=s.top?Math.max(0,s.top):r.scroller.scrollTop;a=Math.floor(a-to(r));var e=s&&null!=s.bottom?s.bottom:a+r.wrapper.clientHeight,t=nr(n,a),i=nr(n,e);if(s&&s.ensure){var o=s.ensure.from.line,l=s.ensure.to.line;o<t?(t=o,i=nr(n,Nr(ae(n,o))+r.wrapper.clientHeight)):Math.min(l,n.lastLine())>=i&&(t=nr(n,Nr(ae(n,l))-r.wrapper.clientHeight),i=l)}return{from:t,to:Math.max(i,t+1)}}function yi(r,n){var s=r.display,a=di(r.display);n.top<0&&(n.top=0);var e=r.curOp&&null!=r.curOp.scrollTop?r.curOp.scrollTop:s.scroller.scrollTop,t=ro(r),i={};n.bottom-n.top>t&&(n.bottom=n.top+t);var o=r.doc.height+Rl(s),u=n.bottom>o-a;if(n.top<e)i.scrollTop=n.top<a?0:n.top;else if(n.bottom>e+t){var f=Math.min(n.top,(u?o:n.bottom)-t);f!=e&&(i.scrollTop=f)}var h=r.options.fixedGutter?0:s.gutters.offsetWidth,c=r.curOp&&null!=r.curOp.scrollLeft?r.curOp.scrollLeft:s.scroller.scrollLeft-h,d=Gr(r)-s.gutters.offsetWidth,v=n.right-n.left>d;return v&&(n.right=n.left+d),n.left<10?i.scrollLeft=0:n.left<c?i.scrollLeft=Math.max(0,n.left+h-(v?0:10)):n.right>d+c-3&&(i.scrollLeft=n.right+(v?0:10)-d),i}function Ql(r,n){null!=n&&(bi(r),r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+n)}function xi(r){bi(r);var n=r.getCursor();r.curOp.scrollToPos={from:n,to:n,margin:r.options.cursorScrollMargin}}function ho(r,n,s){(null!=n||null!=s)&&bi(r),null!=n&&(r.curOp.scrollLeft=n),null!=s&&(r.curOp.scrollTop=s)}function bi(r){var n=r.curOp.scrollToPos;n&&(r.curOp.scrollToPos=null,Jn(r,oo(r,n.from),oo(r,n.to),n.margin))}function Jn(r,n,s,a){var e=yi(r,{left:Math.min(n.left,s.left),top:Math.min(n.top,s.top)-a,right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)+a});ho(r,e.scrollLeft,e.scrollTop)}function pn(r,n){Math.abs(r.doc.scrollTop-n)<2||(J||$l(r,{top:n}),Ja(r,n,!0),J&&$l(r),Rt(r,100))}function Ja(r,n,s){n=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,n)),(r.display.scroller.scrollTop!=n||s)&&(r.doc.scrollTop=n,r.display.scrollbars.setScrollTop(n),r.display.scroller.scrollTop!=n&&(r.display.scroller.scrollTop=n))}function Xr(r,n,s,a){n=Math.max(0,Math.min(n,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),(!(s?n==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-n)<2)||a)&&(r.doc.scrollLeft=n,ll(r),r.display.scroller.scrollLeft!=n&&(r.display.scroller.scrollLeft=n),r.display.scrollbars.setScrollLeft(n))}function wi(r){var n=r.display,s=n.gutters.offsetWidth,a=Math.round(r.doc.height+Rl(r.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:r.options.fixedGutter?s:0,docHeight:a,scrollHeight:a+zt(r)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:s}}var Or=function(r,n,s){this.cm=s;var a=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=e.tabIndex=-1,r(a),r(e),ce(a,"scroll",function(){a.clientHeight&&n(a.scrollTop,"vertical")}),ce(e,"scroll",function(){e.clientWidth&&n(e.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ne&&Y<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Or.prototype.update=function(r){var n=r.scrollWidth>r.clientWidth+1,s=r.scrollHeight>r.clientHeight+1,a=r.nativeBarWidth;return s?(this.vert.style.display="block",this.vert.style.bottom=n?a+"px":"0",this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+(r.viewHeight-(n?a:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),n?(this.horiz.style.display="block",this.horiz.style.right=s?a+"px":"0",this.horiz.style.left=r.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+(r.viewWidth-r.barLeft-(s?a:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&r.clientHeight>0&&(0==a&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:s?a:0,bottom:n?a:0}},Or.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Or.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Or.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ye&&!ke?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new U,this.disableVert=new U},Or.prototype.enableZeroWidthBar=function(r,n,s){r.style.visibility="",n.set(1e3,function a(){var e=r.getBoundingClientRect();("vert"==s?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=r?r.style.visibility="hidden":n.set(1e3,a)})},Or.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var Ci=function(){};function kr(r,n){n||(n=wi(r));var s=r.display.barWidth,a=r.display.barHeight;Si(r,n);for(var e=0;e<4&&s!=r.display.barWidth||a!=r.display.barHeight;e++)s!=r.display.barWidth&&r.options.lineWrapping&&fo(r),Si(r,wi(r)),s=r.display.barWidth,a=r.display.barHeight}function Si(r,n){var s=r.display,a=s.scrollbars.update(n);s.sizer.style.paddingRight=(s.barWidth=a.right)+"px",s.sizer.style.paddingBottom=(s.barHeight=a.bottom)+"px",s.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(s.scrollbarFiller.style.display="block",s.scrollbarFiller.style.height=a.bottom+"px",s.scrollbarFiller.style.width=a.right+"px"):s.scrollbarFiller.style.display="",a.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(s.gutterFiller.style.display="block",s.gutterFiller.style.height=a.bottom+"px",s.gutterFiller.style.width=n.gutterWidth+"px"):s.gutterFiller.style.display=""}Ci.prototype.update=function(){return{bottom:0,right:0}},Ci.prototype.setScrollLeft=function(){},Ci.prototype.setScrollTop=function(){},Ci.prototype.clear=function(){};var Wn={native:Or,null:Ci};function ki(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&kt(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new Wn[r.options.scrollbarStyle](function(n){r.display.wrapper.insertBefore(n,r.display.scrollbarFiller),ce(n,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,s){"horizontal"==s?Xr(r,n):pn(r,n)},r),r.display.scrollbars.addClass&&le(r.display.wrapper,r.display.scrollbars.addClass)}var Li=0;function Hn(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Li,markArrays:null},function Is(r){Kn?Kn.ops.push(r):r.ownsGroup=Kn={ops:[r],delayedCallbacks:[]}}(r.curOp)}function In(r){var n=r.curOp;n&&function jo(r,n){var s=r.ownsGroup;if(s)try{!function Pa(r){var n=r.delayedCallbacks,s=0;do{for(;s<n.length;s++)n[s].call(null);for(var a=0;a<r.ops.length;a++){var e=r.ops[a];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(s<n.length)}(s)}finally{Kn=null,n(s)}}(n,function(s){for(var a=0;a<s.ops.length;a++)s.ops[a].cm.curOp=null;!function Qa(r){for(var n=r.ops,s=0;s<n.length;s++)Rs(n[s]);for(var a=0;a<n.length;a++)Qn(n[a]);for(var e=0;e<n.length;e++)Vn(n[e]);for(var t=0;t<n.length;t++)_s(n[t]);for(var i=0;i<n.length;i++)Us(n[i])}(s)})}function Rs(r){var n=r.cm,s=n.display;(function Wt(r){var n=r.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=zt(r)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=zt(r)+"px",n.scrollbarsClipped=!0)})(n),r.updateMaxLine&&Rr(n),r.mustUpdate=r.viewChanged||r.forceUpdate||null!=r.scrollTop||r.scrollToPos&&(r.scrollToPos.from.line<s.viewFrom||r.scrollToPos.to.line>=s.viewTo)||s.maxLineChanged&&n.options.lineWrapping,r.update=r.mustUpdate&&new Et(n,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function Qn(r){r.updatedDisplay=r.mustUpdate&&Ti(r.cm,r.update)}function Vn(r){var n=r.cm,s=n.display;r.updatedDisplay&&fo(n),r.barMeasure=wi(n),s.maxLineChanged&&!n.options.lineWrapping&&(r.adjustWidthTo=Qo(n,s.maxLine,s.maxLine.text.length).left+3,n.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(s.scroller.clientWidth,s.sizer.offsetLeft+r.adjustWidthTo+zt(n)+n.display.barWidth),r.maxScrollLeft=Math.max(0,s.sizer.offsetLeft+r.adjustWidthTo-Gr(n))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=s.input.prepareSelection())}function _s(r){var n=r.cm;null!=r.adjustWidthTo&&(n.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<n.doc.scrollLeft&&Xr(n,Math.min(n.display.scroller.scrollLeft,r.maxScrollLeft),!0),n.display.maxLineChanged=!1);var s=r.focus&&r.focus==P(Qe(n));r.preparedSelection&&n.display.input.showSelection(r.preparedSelection,s),(r.updatedDisplay||r.startHeight!=n.doc.height)&&kr(n,r.barMeasure),r.updatedDisplay&&ol(n,r.barMeasure),r.selectionChanged&&tl(n),n.state.focused&&r.updateInput&&n.display.input.reset(r.typing),s&&rl(r.cm)}function Us(r){var n=r.cm,s=n.display,a=n.doc;r.updatedDisplay&&Va(n,r.update),null!=s.wheelStartX&&(null!=r.scrollTop||null!=r.scrollLeft||r.scrollToPos)&&(s.wheelStartX=s.wheelStartY=null),null!=r.scrollTop&&Ja(n,r.scrollTop,r.forceScroll),null!=r.scrollLeft&&Xr(n,r.scrollLeft,!0,!0),r.scrollToPos&&function mi(r,n){if(!te(r,"scrollCursorIntoView")){var s=r.display,a=s.sizer.getBoundingClientRect(),e=null,t=s.wrapper.ownerDocument;if(n.top+a.top<0?e=!0:n.bottom+a.top>(t.defaultView.innerHeight||t.documentElement.clientHeight)&&(e=!1),null!=e&&!Ze){var i=M("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-s.viewOffset-to(r.display))+"px;\n                         height: "+(n.bottom-n.top+zt(r)+s.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");r.display.lineSpace.appendChild(i),i.scrollIntoView(e),r.display.lineSpace.removeChild(i)}}}(n,function il(r,n,s,a){var e;null==a&&(a=0),!r.options.lineWrapping&&n==s&&(s="before"==n.sticky?p(n.line,n.ch+1,"before"):n,n=n.ch?p(n.line,"before"==n.sticky?n.ch-1:n.ch,"after"):n);for(var t=0;t<5;t++){var i=!1,o=gr(r,n),l=s&&s!=n?gr(r,s):o,u=yi(r,e={left:Math.min(o.left,l.left),top:Math.min(o.top,l.top)-a,right:Math.max(o.left,l.left),bottom:Math.max(o.bottom,l.bottom)+a}),f=r.doc.scrollTop,h=r.doc.scrollLeft;if(null!=u.scrollTop&&(pn(r,u.scrollTop),Math.abs(r.doc.scrollTop-f)>1&&(i=!0)),null!=u.scrollLeft&&(Xr(r,u.scrollLeft),Math.abs(r.doc.scrollLeft-h)>1&&(i=!0)),!i)break}return e}(n,ue(a,r.scrollToPos.from),ue(a,r.scrollToPos.to),r.scrollToPos.margin));var t=r.maybeHiddenMarkers,i=r.maybeUnhiddenMarkers;if(t)for(var o=0;o<t.length;++o)t[o].lines.length||mt(t[o],"hide");if(i)for(var l=0;l<i.length;++l)i[l].lines.length&&mt(i[l],"unhide");s.wrapper.offsetHeight&&(a.scrollTop=n.display.scroller.scrollTop),r.changeObjs&&mt(n,"changes",n,r.changeObjs),r.update&&r.update.finish()}function ur(r,n){if(r.curOp)return n();Hn(r);try{return n()}finally{In(r)}}function Nt(r,n){return function(){if(r.curOp)return n.apply(r,arguments);Hn(r);try{return n.apply(r,arguments)}finally{In(r)}}}function Jt(r){return function(){if(this.curOp)return r.apply(this,arguments);Hn(this);try{return r.apply(this,arguments)}finally{In(this)}}}function Ft(r){return function(){var n=this.cm;if(!n||n.curOp)return r.apply(this,arguments);Hn(n);try{return r.apply(this,arguments)}finally{In(n)}}}function Rt(r,n){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(n,m(Ot,r))}function Ot(r){var n=r.doc;if(!(n.highlightFrontier>=r.display.viewTo)){var s=+new Date+r.options.workTime,a=Dn(r,n.highlightFrontier),e=[];n.iter(a.line,Math.min(n.first+n.size,r.display.viewTo+500),function(t){if(a.line>=r.display.viewFrom){var i=t.styles,o=t.text.length>r.options.maxHighlightLength?xr(n.mode,a.state):null,l=Ta(r,t,a,!0);o&&(a.state=o),t.styles=l.styles;var u=t.styleClasses,f=l.classes;f?t.styleClasses=f:u&&(t.styleClasses=null);for(var h=!i||i.length!=t.styles.length||u!=f&&(!u||!f||u.bgClass!=f.bgClass||u.textClass!=f.textClass),c=0;!h&&c<i.length;++c)h=i[c]!=t.styles[c];h&&e.push(a.line),t.stateAfter=a.save(),a.nextLine()}else t.text.length<=r.options.maxHighlightLength&&br(r,t.text,a),t.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>s)return Rt(r,r.options.workDelay),!0}),n.highlightFrontier=a.line,n.modeFrontier=Math.max(n.modeFrontier,a.line),e.length&&ur(r,function(){for(var t=0;t<e.length;t++)Zr(r,e[t],"text")})}}var Et=function(r,n,s){var a=r.display;this.viewport=n,this.visible=gi(a,r.doc,n),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=Gr(r),this.force=s,this.dims=Xl(r),this.events=[]};function Ti(r,n){var s=r.display,a=r.doc;if(n.editorIsHidden)return sr(r),!1;if(!n.force&&n.visible.from>=s.viewFrom&&n.visible.to<=s.viewTo&&(null==s.updateLineNumbers||s.updateLineNumbers>=s.viewTo)&&s.renderedView==s.view&&0==dn(r))return!1;$a(r)&&(sr(r),n.dims=Xl(r));var e=a.first+a.size,t=Math.max(n.visible.from-r.options.viewportMargin,a.first),i=Math.min(e,n.visible.to+r.options.viewportMargin);s.viewFrom<t&&t-s.viewFrom<20&&(t=Math.max(a.first,s.viewFrom)),s.viewTo>i&&s.viewTo-i<20&&(i=Math.min(e,s.viewTo)),zr&&(t=Zo(r.doc,t),i=Ar(r.doc,i));var o=t!=s.viewFrom||i!=s.viewTo||s.lastWrapHeight!=n.wrapperHeight||s.lastWrapWidth!=n.wrapperWidth;(function lr(r,n,s){var a=r.display;0==a.view.length||n>=a.viewTo||s<=a.viewFrom?(a.view=Xo(r,n,s),a.viewFrom=n):(a.viewFrom>n?a.view=Xo(r,n,a.viewFrom).concat(a.view):a.viewFrom<n&&(a.view=a.view.slice(cn(r,n))),a.viewFrom=n,a.viewTo<s?a.view=a.view.concat(Xo(r,a.viewTo,s)):a.viewTo>s&&(a.view=a.view.slice(0,cn(r,s)))),a.viewTo=s})(r,t,i),s.viewOffset=Nr(ae(r.doc,s.viewFrom)),r.display.mover.style.top=s.viewOffset+"px";var l=dn(r);if(!o&&0==l&&!n.force&&s.renderedView==s.view&&(null==s.updateLineNumbers||s.updateLineNumbers>=s.viewTo))return!1;var u=function co(r){if(r.hasFocus())return null;var n=P(Qe(r));if(!n||!K(r.display.lineDiv,n))return null;var s={activeElt:n};if(window.getSelection){var a=S(r).getSelection();a.anchorNode&&a.extend&&K(r.display.lineDiv,a.anchorNode)&&(s.anchorNode=a.anchorNode,s.anchorOffset=a.anchorOffset,s.focusNode=a.focusNode,s.focusOffset=a.focusOffset)}return s}(r);return l>4&&(s.lineDiv.style.display="none"),function qs(r,n,s){var a=r.display,e=r.options.lineNumbers,t=a.lineDiv,i=t.firstChild;function o(v){var g=v.nextSibling;return B&&Ye&&r.display.currentWheelTarget==v?v.style.display="none":v.parentNode.removeChild(v),g}for(var l=a.view,u=a.viewFrom,f=0;f<l.length;f++){var h=l[f];if(!h.hidden)if(h.node&&h.node.parentNode==t){for(;i!=h.node;)i=o(i);var d=e&&null!=n&&n<=u&&h.lineNumber;h.changes&&(Q(h.changes,"gutter")>-1&&(d=!1),Ba(r,h,u,s)),d&&(fe(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(ir(r.options,u)))),i=h.node.nextSibling}else{var c=Bs(r,h,u,s);t.insertBefore(c,i)}u+=h.size}for(;i;)i=o(i)}(r,s.updateLineNumbers,n.dims),l>4&&(s.lineDiv.style.display=""),s.renderedView=s.view,function Gs(r){if(r&&r.activeElt&&r.activeElt!=P(r.activeElt.ownerDocument)&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&K(document.body,r.anchorNode)&&K(document.body,r.focusNode))){var n=r.activeElt.ownerDocument,s=n.defaultView.getSelection(),a=n.createRange();a.setEnd(r.anchorNode,r.anchorOffset),a.collapse(!1),s.removeAllRanges(),s.addRange(a),s.extend(r.focusNode,r.focusOffset)}}(u),fe(s.cursorDiv),fe(s.selectionDiv),s.gutters.style.height=s.sizer.style.minHeight=0,o&&(s.lastWrapHeight=n.wrapperHeight,s.lastWrapWidth=n.wrapperWidth,Rt(r,400)),s.updateLineNumbers=null,!0}function Va(r,n){for(var s=n.viewport,a=!0;;a=!1){if(a&&r.options.lineWrapping&&n.oldDisplayWidth!=Gr(r))a&&(n.visible=gi(r.display,r.doc,s));else if(s&&null!=s.top&&(s={top:Math.min(r.doc.height+Rl(r.display)-ro(r),s.top)}),n.visible=gi(r.display,r.doc,s),n.visible.from>=r.display.viewFrom&&n.visible.to<=r.display.viewTo)break;if(!Ti(r,n))break;fo(r);var e=wi(r);Sr(r),kr(r,e),ol(r,e),n.force=!1}n.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(n.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function $l(r,n){var s=new Et(r,n);if(Ti(r,s)){fo(r),Va(r,s);var a=wi(r);Sr(r),kr(r,a),ol(r,a),s.finish()}}function po(r){r.sizer.style.marginLeft=r.gutters.offsetWidth+"px",Dt(r,"gutterChanged",r)}function ol(r,n){r.display.sizer.style.minHeight=n.docHeight+"px",r.display.heightForcer.style.top=n.docHeight+"px",r.display.gutters.style.height=n.docHeight+r.display.barHeight+zt(r)+"px"}function ll(r){var n=r.display,s=n.view;if(n.alignWidgets||n.gutters.firstChild&&r.options.fixedGutter){for(var a=fn(n)-n.scroller.scrollLeft+r.doc.scrollLeft,e=n.gutters.offsetWidth,t=a+"px",i=0;i<s.length;i++)if(!s[i].hidden){r.options.fixedGutter&&(s[i].gutter&&(s[i].gutter.style.left=t),s[i].gutterBackground&&(s[i].gutterBackground.style.left=t));var o=s[i].alignable;if(o)for(var l=0;l<o.length;l++)o[l].style.left=t}r.options.fixedGutter&&(n.gutters.style.left=a+e+"px")}}function $a(r){if(!r.options.lineNumbers)return!1;var n=r.doc,s=ir(r.options,n.first+n.size-1),a=r.display;if(s.length!=a.lineNumChars){var e=a.measure.appendChild(M("div",[M("div",s)],"CodeMirror-linenumber CodeMirror-gutter-elt")),t=e.firstChild.offsetWidth,i=e.offsetWidth-t;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(t,a.lineGutter.offsetWidth-i)+1,a.lineNumWidth=a.lineNumInnerWidth+i,a.lineNumChars=a.lineNumInnerWidth?s.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",po(r.display),!0}return!1}function vo(r,n){for(var s=[],a=!1,e=0;e<r.length;e++){var t=r[e],i=null;if("string"!=typeof t&&(i=t.style,t=t.className),"CodeMirror-linenumbers"==t){if(!n)continue;a=!0}s.push({className:t,style:i})}return n&&!a&&s.push({className:"CodeMirror-linenumbers",style:null}),s}function al(r){var n=r.gutters,s=r.gutterSpecs;fe(n),r.lineGutter=null;for(var a=0;a<s.length;++a){var e=s[a],t=e.className,i=e.style,o=n.appendChild(M("div",null,"CodeMirror-gutter "+t));i&&(o.style.cssText=i),"CodeMirror-linenumbers"==t&&(r.lineGutter=o,o.style.width=(r.lineNumWidth||1)+"px")}n.style.display=s.length?"":"none",po(r)}function Mi(r){al(r.display),jt(r),ll(r)}function es(r,n,s,a){var e=this;this.input=s,e.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),e.scrollbarFiller.setAttribute("cm-not-content","true"),e.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),e.gutterFiller.setAttribute("cm-not-content","true"),e.lineDiv=oe("div",null,"CodeMirror-code"),e.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),e.cursorDiv=M("div",null,"CodeMirror-cursors"),e.measure=M("div",null,"CodeMirror-measure"),e.lineMeasure=M("div",null,"CodeMirror-measure"),e.lineSpace=oe("div",[e.measure,e.lineMeasure,e.selectionDiv,e.cursorDiv,e.lineDiv],null,"position: relative; outline: none");var t=oe("div",[e.lineSpace],"CodeMirror-lines");e.mover=M("div",[t],null,"position: relative"),e.sizer=M("div",[e.mover],"CodeMirror-sizer"),e.sizerWidth=null,e.heightForcer=M("div",null,null,"position: absolute; height: "+F+"px; width: 1px;"),e.gutters=M("div",null,"CodeMirror-gutters"),e.lineGutter=null,e.scroller=M("div",[e.sizer,e.heightForcer,e.gutters],"CodeMirror-scroll"),e.scroller.setAttribute("tabIndex","-1"),e.wrapper=M("div",[e.scrollbarFiller,e.gutterFiller,e.scroller],"CodeMirror"),de&&ze>=105&&(e.wrapper.style.clipPath="inset(0px)"),e.wrapper.setAttribute("translate","no"),ne&&Y<8&&(e.gutters.style.zIndex=-1,e.scroller.style.paddingRight=0),!B&&!(J&&pe)&&(e.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(e.wrapper):r(e.wrapper)),e.viewFrom=e.viewTo=n.first,e.reportedViewFrom=e.reportedViewTo=n.first,e.view=[],e.renderedView=null,e.externalMeasured=null,e.viewOffset=0,e.lastWrapHeight=e.lastWrapWidth=0,e.updateLineNumbers=null,e.nativeBarWidth=e.barHeight=e.barWidth=0,e.scrollbarsClipped=!1,e.lineNumWidth=e.lineNumInnerWidth=e.lineNumChars=null,e.alignWidgets=!1,e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.maxLine=null,e.maxLineLength=0,e.maxLineChanged=!1,e.wheelDX=e.wheelDY=e.wheelStartX=e.wheelStartY=null,e.shift=!1,e.selForContextMenu=null,e.activeTouch=null,e.gutterSpecs=vo(a.gutters,a.lineNumbers),al(e),s.init(e)}Et.prototype.signal=function(r,n){rt(r,n)&&this.events.push(arguments)},Et.prototype.finish=function(){for(var r=0;r<this.events.length;r++)mt.apply(null,this.events[r])};var Di=0,jr=null;function Ai(r){var n=r.wheelDeltaX,s=r.wheelDeltaY;return null==n&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(n=r.detail),null==s&&r.detail&&r.axis==r.VERTICAL_AXIS?s=r.detail:null==s&&(s=r.wheelDelta),{x:n,y:s}}function Ks(r){var n=Ai(r);return n.x*=jr,n.y*=jr,n}function go(r,n){de&&102==ze&&(null==r.display.chromeScrollHack?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var s=Ai(n),a=s.x,e=s.y,t=jr;0===n.deltaMode&&(a=n.deltaX,e=n.deltaY,t=1);var i=r.display,o=i.scroller,u=o.scrollHeight>o.clientHeight;if(a&&o.scrollWidth>o.clientWidth||e&&u){if(e&&Ye&&B)e:for(var f=n.target,h=i.view;f!=o;f=f.parentNode)for(var c=0;c<h.length;c++)if(h[c].node==f){r.display.currentWheelTarget=f;break e}if(a&&!J&&!Se&&null!=t)return e&&u&&pn(r,Math.max(0,o.scrollTop+e*t)),Xr(r,Math.max(0,o.scrollLeft+a*t)),(!e||e&&u)&&Ee(n),void(i.wheelStartX=null);if(e&&null!=t){var d=e*t,v=r.doc.scrollTop,g=v+i.wrapper.clientHeight;d<0?v=Math.max(0,v+d-50):g=Math.min(r.doc.height,g+d+50),$l(r,{top:v,bottom:g})}Di<20&&0!==n.deltaMode&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=a,i.wheelDY=e,setTimeout(function(){if(null!=i.wheelStartX){var w=o.scrollLeft-i.wheelStartX,b=o.scrollTop-i.wheelStartY,k=b&&i.wheelDY&&b/i.wheelDY||w&&i.wheelDX&&w/i.wheelDX;i.wheelStartX=i.wheelStartY=null,k&&(jr=(jr*Di+k)/(Di+1),++Di)}},200)):(i.wheelDX+=a,i.wheelDY+=e))}}ne?jr=-.53:J?jr=15:de?jr=-.7:ge&&(jr=-1/3);var St=function(r,n){this.ranges=r,this.primIndex=n};St.prototype.primary=function(){return this.ranges[this.primIndex]},St.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var s=this.ranges[n],a=r.ranges[n];if(!W(s.anchor,a.anchor)||!W(s.head,a.head))return!1}return!0},St.prototype.deepCopy=function(){for(var r=[],n=0;n<this.ranges.length;n++)r[n]=new _e(R(this.ranges[n].anchor),R(this.ranges[n].head));return new St(r,this.primIndex)},St.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},St.prototype.contains=function(r,n){n||(n=r);for(var s=0;s<this.ranges.length;s++){var a=this.ranges[s];if(x(n,a.from())>=0&&x(r,a.to())<=0)return s}return-1};var _e=function(r,n){this.anchor=r,this.head=n};function Er(r,n,s){var a=r&&r.options.selectionsMayTouch,e=n[s];n.sort(function(c,d){return x(c.from(),d.from())}),s=Q(n,e);for(var t=1;t<n.length;t++){var i=n[t],o=n[t-1],l=x(o.to(),i.from());if(a&&!i.empty()?l>0:l>=0){var u=X(o.from(),i.from()),f=N(o.to(),i.to()),h=o.empty()?i.from()==i.head:o.from()==o.head;t<=s&&--s,n.splice(--t,2,new _e(h?f:u,h?u:f))}}return new St(n,s)}function vn(r,n){return new St([new _e(r,n||r)],0)}function Tt(r){return r.text?p(r.from.line+r.text.length-1,be(r.text).length+(1==r.text.length?r.from.ch:0)):r.to}function Ue(r,n){if(x(r,n.from)<0)return r;if(x(r,n.to)<=0)return Tt(n);var s=r.line+n.text.length-(n.to.line-n.from.line)-1,a=r.ch;return r.line==n.to.line&&(a+=Tt(n).ch-n.to.ch),p(s,a)}function mr(r,n){for(var s=[],a=0;a<r.sel.ranges.length;a++){var e=r.sel.ranges[a];s.push(new _e(Ue(e.anchor,n),Ue(e.head,n)))}return Er(r.cm,s,r.sel.primIndex)}function gn(r,n,s){return r.line==n.line?p(s.line,r.ch-n.ch+s.ch):p(s.line+(r.line-n.line),r.ch)}function sl(r){r.doc.mode=pr(r.options,r.doc.modeOption),$n(r)}function $n(r){r.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Rt(r,100),r.state.modeGen++,r.curOp&&jt(r)}function ea(r,n){return 0==n.from.ch&&0==n.to.ch&&""==be(n.text)&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function ta(r,n,s,a){function e(k){return s?s[k]:null}function t(k,L,D){(function an(r,n,s,a){r.text=n,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),null!=r.order&&(r.order=null),Na(r),Uo(r,s);var e=a?a(r):1;e!=r.height&&Ge(r,e)})(k,L,D,a),Dt(k,"change",k,n)}function i(k,L){for(var D=[],O=k;O<L;++O)D.push(new Nn(u[O],e(O),a));return D}var o=n.from,l=n.to,u=n.text,f=ae(r,o.line),h=ae(r,l.line),c=be(u),d=e(u.length-1),v=l.line-o.line;if(n.full)r.insert(0,i(0,u.length)),r.remove(u.length,r.size-u.length);else if(ea(r,n)){var g=i(0,u.length-1);t(h,h.text,d),v&&r.remove(o.line,v),g.length&&r.insert(o.line,g)}else if(f==h)if(1==u.length)t(f,f.text.slice(0,o.ch)+c+f.text.slice(l.ch),d);else{var w=i(1,u.length-1);w.push(new Nn(c+f.text.slice(l.ch),d,a)),t(f,f.text.slice(0,o.ch)+u[0],e(0)),r.insert(o.line+1,w)}else if(1==u.length)t(f,f.text.slice(0,o.ch)+u[0]+h.text.slice(l.ch),e(0)),r.remove(o.line+1,v);else{t(f,f.text.slice(0,o.ch)+u[0],e(0)),t(h,c+h.text.slice(l.ch),d);var b=i(1,u.length-1);v>1&&r.remove(o.line+1,v-1),r.insert(o.line+1,b)}Dt(r,"change",r,n)}function Jr(r,n,s){!function a(e,t,i){if(e.linked)for(var o=0;o<e.linked.length;++o){var l=e.linked[o];if(l.doc!=t){var u=i&&l.sharedHist;s&&!u||(n(l.doc,u),a(l.doc,e,u))}}}(r,null,!0)}function Ni(r,n){if(n.cm)throw new Error("This document is already in use.");r.doc=n,n.cm=r,On(r),sl(r),ra(r),r.options.direction=n.direction,r.options.lineWrapping||Rr(r),r.options.mode=n.modeOption,jt(r)}function ra(r){("rtl"==r.doc.direction?le:kt)(r.display.lineDiv,"CodeMirror-rtl")}function Wr(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function ul(r,n){var s={from:R(n.from),to:Tt(n),text:Dr(r,n.from,n.to)};return la(r,s,n.from.line,n.to.line+1),Jr(r,function(a){return la(a,s,n.from.line,n.to.line+1)},!0),s}function ia(r){for(;r.length&&be(r).ranges;)r.pop()}function mo(r,n,s,a){var e=r.history;e.undone.length=0;var i,o,t=+new Date;if((e.lastOp==a||e.lastOrigin==n.origin&&n.origin&&("+"==n.origin.charAt(0)&&e.lastModTime>t-(r.cm?r.cm.options.historyEventDelay:500)||"*"==n.origin.charAt(0)))&&(i=function Zs(r,n){return n?(ia(r.done),be(r.done)):r.done.length&&!be(r.done).ranges?be(r.done):r.done.length>1&&!r.done[r.done.length-2].ranges?(r.done.pop(),be(r.done)):void 0}(e,e.lastOp==a)))o=be(i.changes),0==x(n.from,n.to)&&0==x(n.from,o.to)?o.to=Tt(n):i.changes.push(ul(r,n));else{var l=be(e.done);for((!l||!l.ranges)&&fl(r.sel,e.done),i={changes:[ul(r,n)],generation:e.generation},e.done.push(i);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(s),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=t,e.lastOp=e.lastSelOp=a,e.lastOrigin=e.lastSelOrigin=n.origin,o||mt(r,"historyAdded")}function ts(r,n,s,a){var e=r.history,t=a&&a.origin;s==e.lastSelOp||t&&e.lastSelOrigin==t&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==t||function oa(r,n,s,a){var e=n.charAt(0);return"*"==e||"+"==e&&s.ranges.length==a.ranges.length&&s.somethingSelected()==a.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}(r,t,be(e.done),n))?e.done[e.done.length-1]=n:fl(n,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=t,e.lastSelOp=s,a&&!1!==a.clearRedo&&ia(e.undone)}function fl(r,n){var s=be(n);s&&s.ranges&&s.equals(r)||n.push(r)}function la(r,n,s,a){var e=n["spans_"+r.id],t=0;r.iter(Math.max(r.first,s),Math.min(r.first+r.size,a),function(i){i.markedSpans&&((e||(e=n["spans_"+r.id]={}))[t]=i.markedSpans),++t})}function Ys(r){if(!r)return null;for(var n,s=0;s<r.length;++s)r[s].marker.explicitlyCleared?n||(n=r.slice(0,s)):n&&n.push(r[s]);return n?n.length?n:null:r}function yo(r,n){var s=function Xs(r,n){var s=n["spans_"+r.id];if(!s)return null;for(var a=[],e=0;e<n.text.length;++e)a.push(Ys(s[e]));return a}(r,n),a=El(r,n);if(!s)return a;if(!a)return s;for(var e=0;e<s.length;++e){var t=s[e],i=a[e];if(t&&i)e:for(var o=0;o<i.length;++o){for(var l=i[o],u=0;u<t.length;++u)if(t[u].marker==l.marker)continue e;t.push(l)}else i&&(s[e]=i)}return s}function ei(r,n,s){for(var a=[],e=0;e<r.length;++e){var t=r[e];if(t.ranges)a.push(s?St.prototype.deepCopy.call(t):t);else{var i=t.changes,o=[];a.push({changes:o});for(var l=0;l<i.length;++l){var u=i[l],f=void 0;if(o.push({from:u.from,to:u.to,text:u.text}),n)for(var h in u)(f=h.match(/^spans_(\d+)$/))&&Q(n,Number(f[1]))>-1&&(be(o)[h]=u[h],delete u[h])}}}return a}function aa(r,n,s,a){if(a){var e=r.anchor;if(s){var t=x(n,e)<0;t!=x(s,e)<0?(e=n,n=s):t!=x(n,s)<0&&(n=s)}return new _e(e,n)}return new _e(s||n,n)}function hl(r,n,s,a,e){null==e&&(e=r.cm&&(r.cm.display.shift||r.extend)),Ht(r,new St([aa(r.sel.primary(),n,s,e)],0),a)}function sa(r,n,s){for(var a=[],e=r.cm&&(r.cm.display.shift||r.extend),t=0;t<r.sel.ranges.length;t++)a[t]=aa(r.sel.ranges[t],n[t],null,e);Ht(r,Er(r.cm,a,r.sel.primIndex),s)}function Bn(r,n,s,a){var e=r.sel.ranges.slice(0);e[n]=s,Ht(r,Er(r.cm,e,r.sel.primIndex),a)}function cl(r,n,s,a){Ht(r,vn(n,s),a)}function ua(r,n,s){var a=r.history.done,e=be(a);e&&e.ranges?(a[a.length-1]=n,xo(r,n,s)):Ht(r,n,s)}function Ht(r,n,s){xo(r,n,s),ts(r,r.sel,r.cm?r.cm.curOp.id:NaN,s)}function xo(r,n,s){(rt(r,"beforeSelectionChange")||r.cm&&rt(r.cm,"beforeSelectionChange"))&&(n=function dl(r,n,s){var a={ranges:n.ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new _e(ue(r,e[t].anchor),ue(r,e[t].head))},origin:s&&s.origin};return mt(r,"beforeSelectionChange",r,a),r.cm&&mt(r.cm,"beforeSelectionChange",r.cm,a),a.ranges!=n.ranges?Er(r.cm,a.ranges,a.ranges.length-1):n}(r,n,s));var a=s&&s.bias||(x(n.primary().head,r.sel.primary().head)<0?-1:1);rs(r,_t(r,n,a,!0)),(!s||!1!==s.scroll)&&r.cm&&"nocursor"!=r.cm.getOption("readOnly")&&xi(r.cm)}function rs(r,n){n.equals(r.sel)||(r.sel=n,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,Hr(r.cm)),Dt(r,"cursorActivity",r))}function fa(r){rs(r,_t(r,r.sel,null,!1))}function _t(r,n,s,a){for(var e,t=0;t<n.ranges.length;t++){var i=n.ranges[t],o=n.ranges.length==r.sel.ranges.length&&r.sel.ranges[t],l=bo(r,i.anchor,o&&o.anchor,s,a),u=i.head==i.anchor?l:bo(r,i.head,o&&o.head,s,a);(e||l!=i.anchor||u!=i.head)&&(e||(e=n.ranges.slice(0,t)),e[t]=new _e(l,u))}return e?Er(r.cm,e,n.primIndex):n}function mn(r,n,s,a,e){var t=ae(r,n.line);if(t.markedSpans)for(var i=0;i<t.markedSpans.length;++i){var o=t.markedSpans[i],l=o.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,f="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==o.from||(u?o.from<=n.ch:o.from<n.ch))&&(null==o.to||(f?o.to>=n.ch:o.to>n.ch))){if(e&&(mt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(t.markedSpans){--i;continue}break}if(!l.atomic)continue;if(s){var h=l.find(a<0?1:-1),c=void 0;if((a<0?f:u)&&(h=ha(r,h,-a,h&&h.line==n.line?t:null)),h&&h.line==n.line&&(c=x(h,s))&&(a<0?c<0:c>0))return mn(r,h,n,a,e)}var d=l.find(a<0?-1:1);return(a<0?u:f)&&(d=ha(r,d,a,d.line==n.line?t:null)),d?mn(r,d,n,a,e):null}}return n}function bo(r,n,s,a,e){var t=a||1;return mn(r,n,s,t,e)||!e&&mn(r,n,s,t,!0)||mn(r,n,s,-t,e)||!e&&mn(r,n,s,-t,!0)||(r.cantEdit=!0,p(r.first,0))}function ha(r,n,s,a){return s<0&&0==n.ch?n.line>r.first?ue(r,p(n.line-1)):null:s>0&&n.ch==(a||ae(r,n.line)).text.length?n.line<r.first+r.size-1?p(n.line+1,0):null:new p(n.line,n.ch+s)}function ca(r){r.setSelection(p(r.firstLine(),0),p(r.lastLine()),ie)}function ti(r,n,s){var a={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return a.canceled=!0}};return s&&(a.update=function(e,t,i,o){e&&(a.from=ue(r,e)),t&&(a.to=ue(r,t)),i&&(a.text=i),void 0!==o&&(a.origin=o)}),mt(r,"beforeChange",r,a),r.cm&&mt(r.cm,"beforeChange",r.cm,a),a.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function yn(r,n,s){if(r.cm){if(!r.cm.curOp)return Nt(r.cm,yn)(r,n,s);if(r.cm.state.suppressEdits)return}if(!(rt(r,"beforeChange")||r.cm&&rt(r.cm,"beforeChange"))||(n=ti(r,n,!0))){var a=Ol&&!s&&function Fs(r,n,s){var a=null;if(r.iter(n.line,s.line+1,function(d){if(d.markedSpans)for(var v=0;v<d.markedSpans.length;++v){var g=d.markedSpans[v].marker;g.readOnly&&(!a||-1==Q(a,g))&&(a||(a=[])).push(g)}}),!a)return null;for(var e=[{from:n,to:s}],t=0;t<a.length;++t)for(var i=a[t],o=i.find(0),l=0;l<e.length;++l){var u=e[l];if(!(x(u.to,o.from)<0||x(u.from,o.to)>0)){var f=[l,1],h=x(u.from,o.from),c=x(u.to,o.to);(h<0||!i.inclusiveLeft&&!h)&&f.push({from:u.from,to:o.from}),(c>0||!i.inclusiveRight&&!c)&&f.push({from:o.to,to:u.to}),e.splice.apply(e,f),l+=f.length-3}}return e}(r,n.from,n.to);if(a)for(var e=a.length-1;e>=0;--e)da(r,{from:a[e].from,to:a[e].to,text:e?[""]:n.text,origin:n.origin});else da(r,n)}}function da(r,n){if(1!=n.text.length||""!=n.text[0]||0!=x(n.from,n.to)){var s=mr(r,n);mo(r,n,s,r.cm?r.cm.curOp.id:NaN),Qr(r,n,s,El(r,n));var a=[];Jr(r,function(e,t){!t&&-1==Q(a,e.history)&&(is(e.history,n),a.push(e.history)),Qr(e,n,null,El(e,n))})}}function wo(r,n,s){var a=r.cm&&r.cm.state.suppressEdits;if(!a||s){for(var t,e=r.history,i=r.sel,o="undo"==n?e.done:e.undone,l="undo"==n?e.undone:e.done,u=0;u<o.length&&(t=o[u],!(s?t.ranges&&!t.equals(r.sel):!t.ranges));u++);if(u!=o.length){for(e.lastOrigin=e.lastSelOrigin=null;;){if(!(t=o.pop()).ranges){if(a)return void o.push(t);break}if(fl(t,l),s&&!t.equals(r.sel))return void Ht(r,t,{clearRedo:!1});i=t}var f=[];fl(i,l),l.push({changes:f,generation:e.generation}),e.generation=t.generation||++e.maxGeneration;for(var h=rt(r,"beforeChange")||r.cm&&rt(r.cm,"beforeChange"),c=function(g){var w=t.changes[g];if(w.origin=n,h&&!ti(r,w,!1))return o.length=0,{};f.push(ul(r,w));var b=g?mr(r,w):be(o);Qr(r,w,b,yo(r,w)),!g&&r.cm&&r.cm.scrollIntoView({from:w.from,to:Tt(w)});var k=[];Jr(r,function(L,D){!D&&-1==Q(k,L.history)&&(is(L.history,w),k.push(L.history)),Qr(L,w,null,yo(L,w))})},d=t.changes.length-1;d>=0;--d){var v=c(d);if(v)return v.v}}}}function pa(r,n){if(0!=n&&(r.first+=n,r.sel=new St(wt(r.sel.ranges,function(e){return new _e(p(e.anchor.line+n,e.anchor.ch),p(e.head.line+n,e.head.ch))}),r.sel.primIndex),r.cm)){jt(r.cm,r.first,r.first-n,n);for(var s=r.cm.display,a=s.viewFrom;a<s.viewTo;a++)Zr(r.cm,a,"gutter")}}function Qr(r,n,s,a){if(r.cm&&!r.cm.curOp)return Nt(r.cm,Qr)(r,n,s,a);if(n.to.line<r.first)pa(r,n.text.length-1-(n.to.line-n.from.line));else if(!(n.from.line>r.lastLine())){if(n.from.line<r.first){var e=n.text.length-1-(r.first-n.from.line);pa(r,e),n={from:p(r.first,0),to:p(n.to.line+e,n.to.ch),text:[be(n.text)],origin:n.origin}}var t=r.lastLine();n.to.line>t&&(n={from:n.from,to:p(t,ae(r,t).text.length),text:[n.text[0]],origin:n.origin}),n.removed=Dr(r,n.from,n.to),s||(s=mr(r,n)),r.cm?function ns(r,n,s){var a=r.doc,e=r.display,t=n.from,i=n.to,o=!1,l=t.line;r.options.lineWrapping||(l=q(wr(ae(a,t.line))),a.iter(l,i.line+1,function(d){if(d==e.maxLine)return o=!0,!0})),a.sel.contains(n.from,n.to)>-1&&Hr(r),ta(a,n,s,jn(r)),r.options.lineWrapping||(a.iter(l,t.line+n.text.length,function(d){var v=$i(d);v>e.maxLineLength&&(e.maxLine=d,e.maxLineLength=v,e.maxLineChanged=!0,o=!1)}),o&&(r.curOp.updateMaxLine=!0)),function Da(r,n){if(r.modeFrontier=Math.min(r.modeFrontier,n),!(r.highlightFrontier<n-10)){for(var s=r.first,a=n-1;a>s;a--){var e=ae(r,a).stateAfter;if(e&&(!(e instanceof Xi)||a+e.lookAhead<n)){s=a+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,s)}}(a,t.line),Rt(r,400);var u=n.text.length-(i.line-t.line)-1;n.full?jt(r):t.line!=i.line||1!=n.text.length||ea(r.doc,n)?jt(r,t.line,i.line+1,u):Zr(r,t.line,"text");var f=rt(r,"changes"),h=rt(r,"change");if(h||f){var c={from:t,to:i,text:n.text,removed:n.removed,origin:n.origin};h&&Dt(r,"change",r,c),f&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(c)}r.display.selForContextMenu=null}(r.cm,n,a):ta(r,n,a),xo(r,s,ie),r.cantEdit&&bo(r,p(r.firstLine(),0))&&(r.cantEdit=!1)}}function xn(r,n,s,a,e){var t;a||(a=s),x(a,s)<0&&(s=(t=[a,s])[0],a=t[1]),"string"==typeof n&&(n=r.splitLines(n)),yn(r,{from:s,to:a,text:n,origin:e})}function va(r,n,s,a){s<r.line?r.line+=a:n<r.line&&(r.line=n,r.ch=0)}function Fi(r,n,s,a){for(var e=0;e<r.length;++e){var t=r[e],i=!0;if(t.ranges){t.copied||((t=r[e]=t.deepCopy()).copied=!0);for(var o=0;o<t.ranges.length;o++)va(t.ranges[o].anchor,n,s,a),va(t.ranges[o].head,n,s,a)}else{for(var l=0;l<t.changes.length;++l){var u=t.changes[l];if(s<u.from.line)u.from=p(u.from.line+a,u.from.ch),u.to=p(u.to.line+a,u.to.ch);else if(n<=u.to.line){i=!1;break}}i||(r.splice(0,e+1),e=0)}}}function is(r,n){var s=n.from.line,a=n.to.line,e=n.text.length-(a-s)-1;Fi(r.done,s,a,e),Fi(r.undone,s,a,e)}function Vr(r,n,s,a){var e=n,t=n;return"number"==typeof n?t=ae(r,Re(r,n)):e=q(n),null==e?null:(a(t,e)&&r.cm&&Zr(r.cm,e,s),t)}function Oi(r){this.lines=r,this.parent=null;for(var n=0,s=0;s<r.length;++s)r[s].parent=this,n+=r[s].height;this.height=n}function Ei(r){this.children=r;for(var n=0,s=0,a=0;a<r.length;++a){var e=r[a];n+=e.chunkSize(),s+=e.height,e.parent=this}this.size=n,this.height=s,this.parent=null}_e.prototype.from=function(){return X(this.anchor,this.head)},_e.prototype.to=function(){return N(this.anchor,this.head)},_e.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Oi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,n){for(var s=r,a=r+n;s<a;++s){var e=this.lines[s];this.height-=e.height,Yo(e),Dt(e,"delete")}this.lines.splice(r,n)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,n,s){this.height+=s,this.lines=this.lines.slice(0,r).concat(n).concat(this.lines.slice(r));for(var a=0;a<n.length;++a)n[a].parent=this},iterN:function(r,n,s){for(var a=r+n;r<a;++r)if(s(this.lines[r]))return!0}},Ei.prototype={chunkSize:function(){return this.size},removeInner:function(r,n){this.size-=n;for(var s=0;s<this.children.length;++s){var a=this.children[s],e=a.chunkSize();if(r<e){var t=Math.min(n,e-r),i=a.height;if(a.removeInner(r,t),this.height-=i-a.height,e==t&&(this.children.splice(s--,1),a.parent=null),0==(n-=t))break;r=0}else r-=e}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Oi))){var o=[];this.collapse(o),this.children=[new Oi(o)],this.children[0].parent=this}},collapse:function(r){for(var n=0;n<this.children.length;++n)this.children[n].collapse(r)},insertInner:function(r,n,s){this.size+=n.length,this.height+=s;for(var a=0;a<this.children.length;++a){var e=this.children[a],t=e.chunkSize();if(r<=t){if(e.insertInner(r,n,s),e.lines&&e.lines.length>50){for(var i=e.lines.length%25+25,o=i;o<e.lines.length;){var l=new Oi(e.lines.slice(o,o+=25));e.height-=l.height,this.children.splice(++a,0,l),l.parent=this}e.lines=e.lines.slice(0,i),this.maybeSpill()}break}r-=t}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var s=new Ei(r.children.splice(r.children.length-5,5));if(r.parent){r.size-=s.size,r.height-=s.height;var e=Q(r.parent.children,r);r.parent.children.splice(e+1,0,s)}else{var a=new Ei(r.children);a.parent=r,r.children=[a,s],r=a}s.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,n,s){for(var a=0;a<this.children.length;++a){var e=this.children[a],t=e.chunkSize();if(r<t){var i=Math.min(n,t-r);if(e.iterN(r,i,s))return!0;if(0==(n-=i))break;r=0}else r-=t}}};var Wi=function(r,n,s){if(s)for(var a in s)s.hasOwnProperty(a)&&(this[a]=s[a]);this.doc=r,this.node=n};function Hi(r,n,s){Nr(n)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&Ql(r,s)}Wi.prototype.clear=function(){var r=this.doc.cm,n=this.line.widgets,s=this.line,a=q(s);if(null!=a&&n){for(var e=0;e<n.length;++e)n[e]==this&&n.splice(e--,1);n.length||(s.widgets=null);var t=eo(this);Ge(s,Math.max(0,s.height-t)),r&&(ur(r,function(){Hi(r,s,-t),Zr(r,a,"widget")}),Dt(r,"lineWidgetCleared",r,this,a))}},Wi.prototype.changed=function(){var r=this,n=this.height,s=this.doc.cm,a=this.line;this.height=null;var e=eo(this)-n;e&&(An(this.doc,a)||Ge(a,a.height+e),s&&ur(s,function(){s.curOp.forceUpdate=!0,Hi(s,a,e),Dt(s,"lineWidgetChanged",s,r,q(a))}))},nt(Wi);var Ii=0,Lr=function(r,n){this.lines=[],this.type=n,this.doc=r,this.id=++Ii};function ri(r,n,s,a,e){if(a&&a.shared)return function os(r,n,s,a,e){(a=$(a)).shared=!1;var t=[ri(r,n,s,a,e)],i=t[0],o=a.widgetNode;return Jr(r,function(l){o&&(a.widgetNode=o.cloneNode(!0)),t.push(ri(l,ue(l,n),ue(l,s),a,e));for(var u=0;u<l.linked.length;++u)if(l.linked[u].isParent)return;i=be(t)}),new So(t,i)}(r,n,s,a,e);if(r.cm&&!r.cm.curOp)return Nt(r.cm,ri)(r,n,s,a,e);var t=new Lr(r,e),i=x(n,s);if(a&&$(a,t,!1),i>0||0==i&&!1!==t.clearWhenEmpty)return t;if(t.replacedWith&&(t.collapsed=!0,t.widgetNode=oe("span",[t.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||t.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(t.widgetNode.insertLeft=!0)),t.collapsed){if(Il(r,n.line,n,s,t)||n.line!=s.line&&Il(r,s.line,n,s,t))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ds(){zr=!0}()}t.addToHistory&&mo(r,{from:n,to:s,origin:"markText"},r.sel,NaN);var u,o=n.line,l=r.cm;if(r.iter(o,s.line+1,function(h){l&&t.collapsed&&!l.options.lineWrapping&&wr(h)==l.display.maxLine&&(u=!0),t.collapsed&&o!=n.line&&Ge(h,0),function Ns(r,n,s){var a=s&&window.WeakSet&&(s.markedSpans||(s.markedSpans=new WeakSet));a&&r.markedSpans&&a.has(r.markedSpans)?r.markedSpans.push(n):(r.markedSpans=r.markedSpans?r.markedSpans.concat([n]):[n],a&&a.add(r.markedSpans)),n.marker.attachLine(r)}(h,new ji(t,o==n.line?n.ch:null,o==s.line?s.ch:null),r.cm&&r.cm.curOp),++o}),t.collapsed&&r.iter(n.line,s.line+1,function(h){An(r,h)&&Ge(h,0)}),t.clearOnEnter&&ce(t,"beforeCursorEnter",function(){return t.clear()}),t.readOnly&&(function Ms(){Ol=!0}(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),t.collapsed&&(t.id=++Ii,t.atomic=!0),l){if(u&&(l.curOp.updateMaxLine=!0),t.collapsed)jt(l,n.line,s.line+1);else if(t.className||t.startStyle||t.endStyle||t.css||t.attributes||t.title)for(var f=n.line;f<=s.line;f++)Zr(l,f,"text");t.atomic&&fa(l.doc),Dt(l,"markerAdded",l,t)}return t}Lr.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,n=r&&!r.curOp;if(n&&Hn(r),rt(this,"clear")){var s=this.find();s&&Dt(this,"clear",s.from,s.to)}for(var a=null,e=null,t=0;t<this.lines.length;++t){var i=this.lines[t],o=vr(i.markedSpans,this);r&&!this.collapsed?Zr(r,q(i),"text"):r&&(null!=o.to&&(e=q(i)),null!=o.from&&(a=q(i))),i.markedSpans=As(i.markedSpans,o),null==o.from&&this.collapsed&&!An(this.doc,i)&&r&&Ge(i,di(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=wr(this.lines[l]),f=$i(u);f>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=f,r.display.maxLineChanged=!0)}null!=a&&r&&this.collapsed&&jt(r,a,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&fa(r.doc)),r&&Dt(r,"markerCleared",r,this,a,e),n&&In(r),this.parent&&this.parent.clear()}},Lr.prototype.find=function(r,n){null==r&&"bookmark"==this.type&&(r=1);for(var s,a,e=0;e<this.lines.length;++e){var t=this.lines[e],i=vr(t.markedSpans,this);if(null!=i.from&&(s=p(n?t:q(t),i.from),-1==r))return s;if(null!=i.to&&(a=p(n?t:q(t),i.to),1==r))return a}return s&&{from:s,to:a}},Lr.prototype.changed=function(){var r=this,n=this.find(-1,!0),s=this,a=this.doc.cm;!n||!a||ur(a,function(){var e=n.line,t=q(n.line),i=_l(a,t);if(i&&(Gl(i),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!An(s.doc,e)&&null!=s.height){var o=s.height;s.height=null;var l=eo(s)-o;l&&Ge(e,e.height+l)}Dt(a,"markerChanged",a,r)})},Lr.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||-1==Q(n.maybeHiddenMarkers,this))&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},Lr.prototype.detachLine=function(r){if(this.lines.splice(Q(this.lines,r),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},nt(Lr);var So=function(r,n){this.markers=r,this.primary=n;for(var s=0;s<r.length;++s)r[s].parent=this};function bn(r){return r.findMarks(p(r.first,0),r.clipPos(p(r.lastLine())),function(n){return n.parent})}function ko(r){for(var n=function(a){var e=r[a],t=[e.primary.doc];Jr(e.primary.doc,function(l){return t.push(l)});for(var i=0;i<e.markers.length;i++){var o=e.markers[i];-1==Q(t,o.doc)&&(o.parent=null,e.markers.splice(i--,1))}},s=0;s<r.length;s++)n(s)}So.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();Dt(this,"clear")}},So.prototype.find=function(r,n){return this.primary.find(r,n)},nt(So);var js=0,Qt=function(r,n,s,a,e){if(!(this instanceof Qt))return new Qt(r,n,s,a,e);null==s&&(s=0),Ei.call(this,[new Oi([new Nn("",null)])]),this.first=s,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=s;var t=p(s,0);this.sel=vn(t),this.history=new Wr(null),this.id=++js,this.modeOption=n,this.lineSep=a,this.direction="rtl"==e?"rtl":"ltr",this.extend=!1,"string"==typeof r&&(r=this.splitLines(r)),ta(this,{from:t,to:t,text:r}),Ht(this,vn(t),ie)};Qt.prototype=ee(Ei.prototype,{constructor:Qt,iter:function(r,n,s){s?this.iterN(r-this.first,n-r,s):this.iterN(this.first,this.first+this.size,r)},insert:function(r,n){for(var s=0,a=0;a<n.length;++a)s+=n[a].height;this.insertInner(r-this.first,n,s)},remove:function(r,n){this.removeInner(r-this.first,n)},getValue:function(r){var n=Mn(this,this.first,this.first+this.size);return!1===r?n:n.join(r||this.lineSeparator())},setValue:Ft(function(r){var n=p(this.first,0),s=this.first+this.size-1;yn(this,{from:n,to:p(s,ae(this,s).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&ho(this.cm,0,0),Ht(this,vn(n),ie)}),replaceRange:function(r,n,s,a){xn(this,r,n=ue(this,n),s=s?ue(this,s):n,a)},getRange:function(r,n,s){var a=Dr(this,ue(this,r),ue(this,n));return!1===s?a:a.join(""===s?"":s||this.lineSeparator())},getLine:function(r){var n=this.getLineHandle(r);return n&&n.text},getLineHandle:function(r){if(ln(this,r))return ae(this,r)},getLineNumber:function(r){return q(r)},getLineHandleVisualStart:function(r){return"number"==typeof r&&(r=ae(this,r)),wr(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return ue(this,r)},getCursor:function(r){var n=this.sel.primary();return null==r||"head"==r?n.head:"anchor"==r?n.anchor:"end"==r||"to"==r||!1===r?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ft(function(r,n,s){cl(this,ue(this,"number"==typeof r?p(r,n||0):r),null,s)}),setSelection:Ft(function(r,n,s){cl(this,ue(this,r),ue(this,n||r),s)}),extendSelection:Ft(function(r,n,s){hl(this,ue(this,r),n&&ue(this,n),s)}),extendSelections:Ft(function(r,n){sa(this,Gn(this,r),n)}),extendSelectionsBy:Ft(function(r,n){sa(this,Gn(this,wt(this.sel.ranges,r)),n)}),setSelections:Ft(function(r,n,s){if(r.length){for(var a=[],e=0;e<r.length;e++)a[e]=new _e(ue(this,r[e].anchor),ue(this,r[e].head||r[e].anchor));null==n&&(n=Math.min(r.length-1,this.sel.primIndex)),Ht(this,Er(this.cm,a,n),s)}}),addSelection:Ft(function(r,n,s){var a=this.sel.ranges.slice(0);a.push(new _e(ue(this,r),ue(this,n||r))),Ht(this,Er(this.cm,a,a.length-1),s)}),getSelection:function(r){for(var s,n=this.sel.ranges,a=0;a<n.length;a++){var e=Dr(this,n[a].from(),n[a].to());s=s?s.concat(e):e}return!1===r?s:s.join(r||this.lineSeparator())},getSelections:function(r){for(var n=[],s=this.sel.ranges,a=0;a<s.length;a++){var e=Dr(this,s[a].from(),s[a].to());!1!==r&&(e=e.join(r||this.lineSeparator())),n[a]=e}return n},replaceSelection:function(r,n,s){for(var a=[],e=0;e<this.sel.ranges.length;e++)a[e]=r;this.replaceSelections(a,n,s||"+input")},replaceSelections:Ft(function(r,n,s){for(var a=[],e=this.sel,t=0;t<e.ranges.length;t++){var i=e.ranges[t];a[t]={from:i.from(),to:i.to(),text:this.splitLines(r[t]),origin:s}}for(var o=n&&"end"!=n&&function Pn(r,n,s){for(var a=[],e=p(r.first,0),t=e,i=0;i<n.length;i++){var o=n[i],l=gn(o.from,e,t),u=gn(Tt(o),e,t);if(e=o.to,t=u,"around"==s){var f=r.sel.ranges[i],h=x(f.head,f.anchor)<0;a[i]=new _e(h?u:l,h?l:u)}else a[i]=new _e(l,l)}return new St(a,r.sel.primIndex)}(this,a,n),l=a.length-1;l>=0;l--)yn(this,a[l]);o?ua(this,o):this.cm&&xi(this.cm)}),undo:Ft(function(){wo(this,"undo")}),redo:Ft(function(){wo(this,"redo")}),undoSelection:Ft(function(){wo(this,"undo",!0)}),redoSelection:Ft(function(){wo(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,n=0,s=0,a=0;a<r.done.length;a++)r.done[a].ranges||++n;for(var e=0;e<r.undone.length;e++)r.undone[e].ranges||++s;return{undo:n,redo:s}},clearHistory:function(){var r=this;this.history=new Wr(this.history),Jr(this,function(n){return n.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:ei(this.history.done),undone:ei(this.history.undone)}},setHistory:function(r){var n=this.history=new Wr(this.history);n.done=ei(r.done.slice(0),null,!0),n.undone=ei(r.undone.slice(0),null,!0)},setGutterMarker:Ft(function(r,n,s){return Vr(this,r,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});return e[n]=s,!s&&Te(e)&&(a.gutterMarkers=null),!0})}),clearGutter:Ft(function(r){var n=this;this.iter(function(s){s.gutterMarkers&&s.gutterMarkers[r]&&Vr(n,s,"gutter",function(){return s.gutterMarkers[r]=null,Te(s.gutterMarkers)&&(s.gutterMarkers=null),!0})})}),lineInfo:function(r){var n;if("number"==typeof r){if(!(ln(this,r)&&(n=r,r=ae(this,r))))return null}else if(null==(n=q(r)))return null;return{line:n,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Ft(function(r,n,s){return Vr(this,r,"gutter"==n?"gutter":"class",function(a){var e="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(a[e]){if(Pe(s).test(a[e]))return!1;a[e]+=" "+s}else a[e]=s;return!0})}),removeLineClass:Ft(function(r,n,s){return Vr(this,r,"gutter"==n?"gutter":"class",function(a){var e="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",t=a[e];if(!t)return!1;if(null==s)a[e]=null;else{var i=t.match(Pe(s));if(!i)return!1;var o=i.index+i[0].length;a[e]=t.slice(0,i.index)+(i.index&&o!=t.length?" ":"")+t.slice(o)||null}return!0})}),addLineWidget:Ft(function(r,n,s){return function Co(r,n,s,a){var e=new Wi(r,s,a),t=r.cm;return t&&e.noHScroll&&(t.display.alignWidgets=!0),Vr(r,n,"widget",function(i){var o=i.widgets||(i.widgets=[]);if(null==e.insertAt?o.push(e):o.splice(Math.min(o.length,Math.max(0,e.insertAt)),0,e),e.line=i,t&&!An(r,i)){var l=Nr(i)<r.scrollTop;Ge(i,i.height+eo(e)),l&&Ql(t,e.height),t.curOp.forceUpdate=!0}return!0}),t&&Dt(t,"lineWidgetAdded",t,e,"number"==typeof n?n:q(n)),e}(this,r,n,s)}),removeLineWidget:function(r){r.clear()},markText:function(r,n,s){return ri(this,ue(this,r),ue(this,n),s,s&&s.type||"range")},setBookmark:function(r,n){var s={replacedWith:n&&(null==n.nodeType?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return ri(this,r=ue(this,r),r,s,"bookmark")},findMarksAt:function(r){var n=[],s=ae(this,(r=ue(this,r)).line).markedSpans;if(s)for(var a=0;a<s.length;++a){var e=s[a];(null==e.from||e.from<=r.ch)&&(null==e.to||e.to>=r.ch)&&n.push(e.marker.parent||e.marker)}return n},findMarks:function(r,n,s){r=ue(this,r),n=ue(this,n);var a=[],e=r.line;return this.iter(r.line,n.line+1,function(t){var i=t.markedSpans;if(i)for(var o=0;o<i.length;o++){var l=i[o];!(null!=l.to&&e==r.line&&r.ch>=l.to||null==l.from&&e!=r.line||null!=l.from&&e==n.line&&l.from>=n.ch)&&(!s||s(l.marker))&&a.push(l.marker.parent||l.marker)}++e}),a},getAllMarks:function(){var r=[];return this.iter(function(n){var s=n.markedSpans;if(s)for(var a=0;a<s.length;++a)null!=s[a].from&&r.push(s[a].marker)}),r},posFromIndex:function(r){var n,s=this.first,a=this.lineSeparator().length;return this.iter(function(e){var t=e.text.length+a;if(t>r)return n=r,!0;r-=t,++s}),ue(this,p(s,n))},indexFromPos:function(r){var n=(r=ue(this,r)).ch;if(r.line<this.first||r.ch<0)return 0;var s=this.lineSeparator().length;return this.iter(this.first,r.line,function(a){n+=a.text.length+s}),n},copy:function(r){var n=new Qt(Mn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,r&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(r){r||(r={});var n=this.first,s=this.first+this.size;null!=r.from&&r.from>n&&(n=r.from),null!=r.to&&r.to<s&&(s=r.to);var a=new Qt(Mn(this,n,s),r.mode||this.modeOption,n,this.lineSep,this.direction);return r.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:r.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],function Pi(r,n){for(var s=0;s<n.length;s++){var a=n[s],e=a.find(),t=r.clipPos(e.from),i=r.clipPos(e.to);if(x(t,i)){var o=ri(r,t,i,a.primary,a.primary.type);a.markers.push(o),o.parent=a}}}(a,bn(this)),a},unlinkDoc:function(r){if(r instanceof it&&(r=r.doc),this.linked)for(var n=0;n<this.linked.length;++n)if(this.linked[n].doc==r){this.linked.splice(n,1),r.unlinkDoc(this),ko(bn(this));break}if(r.history==this.history){var a=[r.id];Jr(r,function(e){return a.push(e.id)},!0),r.history=new Wr(null),r.history.done=ei(this.history.done,a),r.history.undone=ei(this.history.undone,a)}},iterLinkedDocs:function(r){Jr(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):Ln(r)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ft(function(r){"rtl"!=r&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(n){return n.order=null}),this.cm&&function na(r){ur(r,function(){ra(r),jt(r)})}(this.cm))})}),Qt.prototype.eachLine=Qt.prototype.iter;var ls=0;function Js(r){var n=this;if(ga(n),!te(n,r)&&!Ur(n.display,r)){Ee(r),ne&&(ls=+new Date);var s=hn(n,r,!0),a=r.dataTransfer.files;if(s&&!n.isReadOnly())if(a&&a.length&&window.FileReader&&window.File)for(var e=a.length,t=Array(e),i=0,o=function(){++i==e&&Nt(n,function(){var d={from:s=ue(n.doc,s),to:s,text:n.doc.splitLines(t.filter(function(v){return null!=v}).join(n.doc.lineSeparator())),origin:"paste"};yn(n.doc,d),ua(n.doc,vn(ue(n.doc,s),ue(n.doc,Tt(d))))})()},l=function(d,v){if(n.options.allowDropFileTypes&&-1==Q(n.options.allowDropFileTypes,d.type))o();else{var g=new FileReader;g.onerror=function(){return o()},g.onload=function(){var w=g.result;/[\x00-\x08\x0e-\x1f]{2}/.test(w)||(t[v]=w),o()},g.readAsText(d)}},u=0;u<a.length;u++)l(a[u],u);else{if(n.state.draggingText&&n.doc.sel.contains(s)>-1)return n.state.draggingText(r),void setTimeout(function(){return n.display.input.focus()},20);try{var f=r.dataTransfer.getData("Text");if(f){var h;if(n.state.draggingText&&!n.state.draggingText.copy&&(h=n.listSelections()),xo(n.doc,vn(s,s)),h)for(var c=0;c<h.length;++c)xn(n.doc,"",h[c].anchor,h[c].head,"drag");n.replaceSelection(f,"around","paste"),n.display.input.focus()}}catch{}}}}function ga(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function as(r){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),s=[],a=0;a<n.length;a++){var e=n[a].CodeMirror;e&&s.push(e)}s.length&&s[0].operation(function(){for(var t=0;t<s.length;t++)r(s[t])})}}var ss=!1;function Vs(){ss||(function us(){var r;ce(window,"resize",function(){null==r&&(r=setTimeout(function(){r=null,as(fs)},100))}),ce(window,"blur",function(){return as(En)})}(),ss=!0)}function fs(r){var n=r.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,r.setSize()}for(var wn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Lo=0;Lo<10;Lo++)wn[Lo+48]=wn[Lo+96]=String(Lo);for(var pl=65;pl<=90;pl++)wn[pl]=String.fromCharCode(pl);for(var To=1;To<=12;To++)wn[To+111]=wn[To+63235]="F"+To;var Vt={};function Mo(r){var n=r.split(/-(?!$)/);r=n[n.length-1];for(var s,a,e,t,i=0;i<n.length-1;i++){var o=n[i];if(/^(cmd|meta|m)$/i.test(o))t=!0;else if(/^a(lt)?$/i.test(o))s=!0;else if(/^(c|ctrl|control)$/i.test(o))a=!0;else{if(!/^s(hift)?$/i.test(o))throw new Error("Unrecognized modifier name: "+o);e=!0}}return s&&(r="Alt-"+r),a&&(r="Ctrl-"+r),t&&(r="Cmd-"+r),e&&(r="Shift-"+r),r}function vl(r){var n={};for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];if(/^(name|fallthrough|(de|at)tach)$/.test(s))continue;if("..."==a){delete r[s];continue}for(var e=wt(s.split(" "),Mo),t=0;t<e.length;t++){var i=void 0,o=void 0;t==e.length-1?(o=e.join(" "),i=a):(o=e.slice(0,t+1).join(" "),i="...");var l=n[o];if(l){if(l!=i)throw new Error("Inconsistent bindings for "+o)}else n[o]=i}delete r[s]}for(var u in n)r[u]=n[u];return r}function $r(r,n,s,a){var e=(n=Cn(n)).call?n.call(r,a):n[r];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&s(e))return"handled";if(n.fallthrough){if("[object Array]"!=Object.prototype.toString.call(n.fallthrough))return $r(r,n.fallthrough,s,a);for(var t=0;t<n.fallthrough.length;t++){var i=$r(r,n.fallthrough[t],s,a);if(i)return i}}}function en(r){var n="string"==typeof r?r:wn[r.keyCode];return"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function hs(r,n,s){var a=r;return n.altKey&&"Alt"!=a&&(r="Alt-"+r),(C?n.metaKey:n.ctrlKey)&&"Ctrl"!=a&&(r="Ctrl-"+r),(C?n.ctrlKey:n.metaKey)&&"Mod"!=a&&(r="Cmd-"+r),!s&&n.shiftKey&&"Shift"!=a&&(r="Shift-"+r),r}function cs(r,n){if(Se&&34==r.keyCode&&r.char)return!1;var s=wn[r.keyCode];return null!=s&&!r.altGraphKey&&(3==r.keyCode&&r.code&&(s=r.code),hs(s,r,n))}function Cn(r){return"string"==typeof r?Vt[r]:r}function ni(r,n){for(var s=r.doc.sel.ranges,a=[],e=0;e<s.length;e++){for(var t=n(s[e]);a.length&&x(t.from,be(a).to)<=0;){var i=a.pop();if(x(i.from,t.from)<0){t.from=i.from;break}}a.push(t)}ur(r,function(){for(var o=a.length-1;o>=0;o--)xn(r.doc,"",a[o].from,a[o].to,"+delete");xi(r)})}function gl(r,n,s){var a=Pt(r.text,n+s,s);return a<0||a>r.text.length?null:a}function ml(r,n,s){var a=gl(r,n.ch,s);return null==a?null:new p(n.line,a,s<0?"after":"before")}function Bi(r,n,s,a,e){if(r){"rtl"==n.doc.direction&&(e=-e);var t=Zt(s,n.doc.direction);if(t){var u,i=e<0?be(t):t[0],l=e<0==(1==i.level)?"after":"before";if(i.level>0||"rtl"==n.doc.direction){var f=Xn(n,s),h=qr(n,f,u=e<0?s.text.length-1:0).top;u=Bt(function(c){return qr(n,f,c).top==h},e<0==(1==i.level)?i.from:i.to-1,u),"before"==l&&(u=gl(s,u,1))}else u=e<0?i.to:i.from;return new p(a,u,l)}}return new p(a,e<0?s.text.length:0,e<0?"before":"after")}Vt.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Vt.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Vt.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Vt.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Vt.default=Ye?Vt.macDefault:Vt.pcDefault;var ii={selectAll:ca,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),ie)},killLine:function(r){return ni(r,function(n){if(n.empty()){var s=ae(r.doc,n.head.line).text.length;return n.head.ch==s&&n.head.line<r.lastLine()?{from:n.head,to:p(n.head.line+1,0)}:{from:n.head,to:p(n.head.line,s)}}return{from:n.from(),to:n.to()}})},deleteLine:function(r){return ni(r,function(n){return{from:p(n.from().line,0),to:ue(r.doc,p(n.to().line+1,0))}})},delLineLeft:function(r){return ni(r,function(n){return{from:p(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(r){return ni(r,function(n){var s=r.charCoords(n.head,"div").top+5;return{from:r.coordsChar({left:0,top:s},"div"),to:n.from()}})},delWrappedLineRight:function(r){return ni(r,function(n){var s=r.charCoords(n.head,"div").top+5,a=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:s},"div");return{from:n.from(),to:a}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(p(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(p(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(n){return yl(r,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(n){return ds(r,n.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(n){return function ma(r,n){var s=ae(r.doc,n),a=function Ko(r){for(var n;n=qn(r);)r=n.find(1,!0).line;return r}(s);return a!=s&&(n=q(a)),Bi(!0,r,s,n,-1)}(r,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(n){var s=r.cursorCoords(n.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:s},"div")},ve)},goLineLeft:function(r){return r.extendSelectionsBy(function(n){var s=r.cursorCoords(n.head,"div").top+5;return r.coordsChar({left:0,top:s},"div")},ve)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(n){var s=r.cursorCoords(n.head,"div").top+5,a=r.coordsChar({left:0,top:s},"div");return a.ch<r.getLine(a.line).search(/\S/)?ds(r,n.head):a},ve)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("\t")},insertSoftTab:function(r){for(var n=[],s=r.listSelections(),a=r.options.tabSize,e=0;e<s.length;e++){var t=s[e].from(),i=me(r.getLine(t.line),t.ch,a);n.push(er(a-i%a))}r.replaceSelections(n)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return ur(r,function(){for(var n=r.listSelections(),s=[],a=0;a<n.length;a++)if(n[a].empty()){var e=n[a].head,t=ae(r.doc,e.line).text;if(t)if(e.ch==t.length&&(e=new p(e.line,e.ch-1)),e.ch>0)e=new p(e.line,e.ch+1),r.replaceRange(t.charAt(e.ch-1)+t.charAt(e.ch-2),p(e.line,e.ch-2),e,"+transpose");else if(e.line>r.doc.first){var i=ae(r.doc,e.line-1).text;i&&(e=new p(e.line,1),r.replaceRange(t.charAt(0)+r.doc.lineSeparator()+i.charAt(i.length-1),p(e.line-1,i.length-1),e,"+transpose"))}s.push(new _e(e,e))}r.setSelections(s)})},newlineAndIndent:function(r){return ur(r,function(){for(var n=r.listSelections(),s=n.length-1;s>=0;s--)r.replaceRange(r.doc.lineSeparator(),n[s].anchor,n[s].head,"+input");n=r.listSelections();for(var a=0;a<n.length;a++)r.indentLine(n[a].from().line,null,!0);xi(r)})},openLine:function(r){return r.replaceSelection("\n","start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function yl(r,n){var s=ae(r.doc,n),a=wr(s);return a!=s&&(n=q(a)),Bi(!0,r,a,n,1)}function ds(r,n){var s=yl(r,n.line),a=ae(r.doc,s.line),e=Zt(a,r.doc.direction);if(!e||0==e[0].level){var t=Math.max(s.ch,a.text.search(/\S/));return p(s.line,n.line==s.line&&n.ch<=t&&n.ch?0:t,s.sticky)}return s}function zn(r,n,s){if("string"==typeof n&&!(n=ii[n]))return!1;r.display.input.ensurePolled();var a=r.display.shift,e=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),s&&(r.display.shift=!1),e=n(r)!=A}finally{r.display.shift=a,r.state.suppressEdits=!1}return e}var $s=new U;function Ri(r,n,s,a){var e=r.state.keySeq;if(e){if(en(n))return"handled";if(/\'$/.test(n)?r.state.keySeq=null:$s.set(50,function(){r.state.keySeq==e&&(r.state.keySeq=null,r.display.input.reset())}),Do(r,e+" "+n,s,a))return!0}return Do(r,n,s,a)}function Do(r,n,s,a){var e=function ps(r,n,s){for(var a=0;a<r.state.keyMaps.length;a++){var e=$r(n,r.state.keyMaps[a],s,r);if(e)return e}return r.options.extraKeys&&$r(n,r.options.extraKeys,s,r)||$r(n,r.options.keyMap,s,r)}(r,n,a);return"multi"==e&&(r.state.keySeq=n),"handled"==e&&Dt(r,"keyHandled",r,n,s),("handled"==e||"multi"==e)&&(Ee(s),tl(r)),!!e}function vs(r,n){var s=cs(n,!0);return!!s&&(n.shiftKey&&!r.state.keySeq?Ri(r,"Shift-"+s,n,function(a){return zn(r,a,!0)})||Ri(r,s,n,function(a){if("string"==typeof a?/^go[A-Z]/.test(a):a.motion)return zn(r,a)}):Ri(r,s,n,function(a){return zn(r,a)}))}var oi=null;function ya(r){var n=this;if(!(r.target&&r.target!=n.display.input.getField()||(n.curOp.focus=P(Qe(n)),te(n,r)))){ne&&Y<11&&27==r.keyCode&&(r.returnValue=!1);var s=r.keyCode;n.display.shift=16==s||r.shiftKey;var a=vs(n,r);Se&&(oi=a?s:null,!a&&88==s&&!Yi&&(Ye?r.metaKey:r.ctrlKey)&&n.replaceSelection("",null,"cut")),J&&!Ye&&!a&&46==s&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==s&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&function gs(r){var n=r.display.lineDiv;function s(a){(18==a.keyCode||!a.altKey)&&(kt(n,"CodeMirror-crosshair"),we(document,"keyup",s),we(document,"mouseover",s))}le(n,"CodeMirror-crosshair"),ce(document,"keyup",s),ce(document,"mouseover",s)}(n)}}function ms(r){16==r.keyCode&&(this.doc.sel.shift=!1),te(this,r)}function xl(r){var n=this;if(!(r.target&&r.target!=n.display.input.getField()||Ur(n.display,r)||te(n,r)||r.ctrlKey&&!r.altKey||Ye&&r.metaKey)){var s=r.keyCode,a=r.charCode;if(Se&&s==oi)return oi=null,void Ee(r);if(!Se||r.which&&!(r.which<10)||!vs(n,r)){var e=String.fromCharCode(a??s);"\b"!=e&&(function eu(r,n,s){return Ri(r,"'"+s+"'",n,function(a){return zn(r,a,!0)})}(n,r,e)||n.display.input.onKeyPress(r))}}}var _i,Ui,xa=function(r,n,s){this.time=r,this.pos=n,this.button=s};function bl(r){var n=this,s=n.display;if(!(te(n,r)||s.activeTouch&&s.input.supportsTouch())){if(s.input.ensurePolled(),s.shift=r.shiftKey,Ur(s,r))return void(B||(s.scroller.draggable=!1,setTimeout(function(){return s.scroller.draggable=!0},100)));if(!wl(n,r)){var a=hn(n,r),e=_n(r),t=a?function tu(r,n){var s=+new Date;return Ui&&Ui.compare(s,r,n)?(_i=Ui=null,"triple"):_i&&_i.compare(s,r,n)?(Ui=new xa(s,r,n),_i=null,"double"):(_i=new xa(s,r,n),Ui=null,"single")}(a,e):"single";S(n).focus(),1==e&&n.state.selectingText&&n.state.selectingText(r),(!a||!function Ao(r,n,s,a,e){var t="Click";return"double"==a?t="Double"+t:"triple"==a&&(t="Triple"+t),Ri(r,hs(t=(1==n?"Left":2==n?"Middle":"Right")+t,e),e,function(i){if("string"==typeof i&&(i=ii[i]),!i)return!1;var o=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),o=i(r,s)!=A}finally{r.state.suppressEdits=!1}return o})}(n,e,a,t,r))&&(1==e?a?function ru(r,n,s,a){ne?setTimeout(m(rl,r),0):r.curOp.focus=P(Qe(r));var i,e=function No(r,n,s){var a=r.getOption("configureMouse"),e=a?a(r,n,s):{};return null==e.unit&&(e.unit=(qt?s.shiftKey&&s.metaKey:s.altKey)?"rectangle":"single"==n?"char":"double"==n?"word":"line"),(null==e.extend||r.doc.extend)&&(e.extend=r.doc.extend||s.shiftKey),null==e.addNew&&(e.addNew=Ye?s.metaKey:s.ctrlKey),null==e.moveOnDrag&&(e.moveOnDrag=!(Ye?s.altKey:s.ctrlKey)),e}(r,s,a),t=r.doc.sel;r.options.dragDrop&&rr&&!r.isReadOnly()&&"single"==s&&(i=t.contains(n))>-1&&(x((i=t.ranges[i]).from(),n)<0||n.xRel>0)&&(x(i.to(),n)>0||n.xRel<0)?function xs(r,n,s,a){var e=r.display,t=!1,i=Nt(r,function(u){B&&(e.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:vi(r)),we(e.wrapper.ownerDocument,"mouseup",i),we(e.wrapper.ownerDocument,"mousemove",o),we(e.scroller,"dragstart",l),we(e.scroller,"drop",i),t||(Ee(u),a.addNew||hl(r.doc,s,null,null,a.extend),B&&!ge||ne&&9==Y?setTimeout(function(){e.wrapper.ownerDocument.body.focus({preventScroll:!0}),e.input.focus()},20):e.input.focus())}),o=function(u){t=t||Math.abs(n.clientX-u.clientX)+Math.abs(n.clientY-u.clientY)>=10},l=function(){return t=!0};B&&(e.scroller.draggable=!0),r.state.draggingText=i,i.copy=!a.moveOnDrag,ce(e.wrapper.ownerDocument,"mouseup",i),ce(e.wrapper.ownerDocument,"mousemove",o),ce(e.scroller,"dragstart",l),ce(e.scroller,"drop",i),r.state.delayingBlurEvent=!0,setTimeout(function(){return e.input.focus()},20),e.scroller.dragDrop&&e.scroller.dragDrop()}(r,a,n,e):function nu(r,n,s,a){ne&&vi(r);var e=r.display,t=r.doc;Ee(n);var i,o,l=t.sel,u=l.ranges;if(a.addNew&&!a.extend?(o=t.sel.contains(s),i=o>-1?u[o]:new _e(s,s)):(i=t.sel.primary(),o=t.sel.primIndex),"rectangle"==a.unit)a.addNew||(i=new _e(s,s)),s=hn(r,n,!0,!0),o=-1;else{var f=bs(r,s,a.unit);i=a.extend?aa(i,f.anchor,f.head,a.extend):f}a.addNew?-1==o?(o=u.length,Ht(t,Er(r,u.concat([i]),o),{scroll:!1,origin:"*mouse"})):u.length>1&&u[o].empty()&&"char"==a.unit&&!a.extend?(Ht(t,Er(r,u.slice(0,o).concat(u.slice(o+1)),0),{scroll:!1,origin:"*mouse"}),l=t.sel):Bn(t,o,i,z):(o=0,Ht(t,new St([i],0),z),l=t.sel);var h=s;function c(L){if(0!=x(h,L))if(h=L,"rectangle"==a.unit){for(var D=[],O=r.options.tabSize,E=me(ae(t,s.line).text,s.ch,O),H=me(ae(t,L.line).text,L.ch,O),_=Math.min(E,H),re=Math.max(E,H),j=Math.min(s.line,L.line),xe=Math.min(r.lastLine(),Math.max(s.line,L.line));j<=xe;j++){var Me=ae(t,j).text,Ne=Le(Me,_,O);_==re?D.push(new _e(p(j,Ne),p(j,Ne))):Me.length>Ne&&D.push(new _e(p(j,Ne),p(j,Le(Me,re,O))))}D.length||D.push(new _e(s,s)),Ht(t,Er(r,l.ranges.slice(0,o).concat(D),o),{origin:"*mouse",scroll:!1}),r.scrollIntoView(L)}else{var De,Oe=i,Je=bs(r,L,a.unit),Be=Oe.anchor;x(Je.anchor,Be)>0?(De=Je.head,Be=X(Oe.from(),Je.anchor)):(De=Je.anchor,Be=N(Oe.to(),Je.head));var We=l.ranges.slice(0);We[o]=function iu(r,n){var s=n.anchor,a=n.head,e=ae(r.doc,s.line);if(0==x(s,a)&&s.sticky==a.sticky)return n;var t=Zt(e);if(!t)return n;var i=st(t,s.ch,s.sticky),o=t[i];if(o.from!=s.ch&&o.to!=s.ch)return n;var u,l=i+(o.from==s.ch==(1!=o.level)?0:1);if(0==l||l==t.length)return n;if(a.line!=s.line)u=(a.line-s.line)*("ltr"==r.doc.direction?1:-1)>0;else{var f=st(t,a.ch,a.sticky),h=f-i||(a.ch-s.ch)*(1==o.level?-1:1);u=f==l-1||f==l?h<0:h>0}var c=t[l+(u?-1:0)],d=u==(1==c.level),v=d?c.from:c.to,g=d?"after":"before";return s.ch==v&&s.sticky==g?n:new _e(new p(s.line,v,g),a)}(r,new _e(ue(t,Be),De)),Ht(t,Er(r,We,o),z)}}var d=e.wrapper.getBoundingClientRect(),v=0;function g(L){var D=++v,O=hn(r,L,!0,"rectangle"==a.unit);if(O)if(0!=x(O,h)){r.curOp.focus=P(Qe(r)),c(O);var E=gi(e,t);(O.line>=E.to||O.line<E.from)&&setTimeout(Nt(r,function(){v==D&&g(L)}),150)}else{var H=L.clientY<d.top?-20:L.clientY>d.bottom?20:0;H&&setTimeout(Nt(r,function(){v==D&&(e.scroller.scrollTop+=H,g(L))}),50)}}function w(L){r.state.selectingText=!1,v=1/0,L&&(Ee(L),e.input.focus()),we(e.wrapper.ownerDocument,"mousemove",b),we(e.wrapper.ownerDocument,"mouseup",k),t.history.lastSelOrigin=null}var b=Nt(r,function(L){0!==L.buttons&&_n(L)?g(L):w(L)}),k=Nt(r,w);r.state.selectingText=k,ce(e.wrapper.ownerDocument,"mousemove",b),ce(e.wrapper.ownerDocument,"mouseup",k)}(r,a,n,e)}(n,a,t,r):Mt(r)==s.scroller&&Ee(r):2==e?(a&&hl(n.doc,a),setTimeout(function(){return s.input.focus()},20)):3==e&&(gt?n.display.input.onContextMenu(r):vi(n)))}}}function bs(r,n,s){if("char"==s)return new _e(n,n);if("word"==s)return r.findWordAt(n);if("line"==s)return new _e(p(n.line,0),ue(r.doc,p(n.line+1,0)));var a=s(r,n);return new _e(a.from,a.to)}function ws(r,n,s,a){var e,t;if(n.touches)e=n.touches[0].clientX,t=n.touches[0].clientY;else try{e=n.clientX,t=n.clientY}catch{return!1}if(e>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;a&&Ee(n);var i=r.display,o=i.lineDiv.getBoundingClientRect();if(t>o.bottom||!rt(r,s))return Yt(n);t-=o.top-i.viewOffset;for(var l=0;l<r.display.gutterSpecs.length;++l){var u=i.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=e)return mt(r,s,r,nr(r.doc,t),r.display.gutterSpecs[l].className,n),Yt(n)}}function wl(r,n){return ws(r,n,"gutterClick",!0)}function Cs(r,n){Ur(r.display,n)||function ou(r,n){return!!rt(r,"gutterContextMenu")&&ws(r,n,"gutterContextMenu",!1)}(r,n)||te(r,n,"contextmenu")||gt||r.display.input.onContextMenu(n)}function ba(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),no(r)}xa.prototype.compare=function(r,n,s){return this.time+400>r&&0==x(n,this.pos)&&s==this.button};var Rn={toString:function(){return"CodeMirror.Init"}},wa={},Cl={};function Gi(r,n,s){if(!n!=!(s&&s!=Rn)){var e=r.display.dragFunctions,t=n?ce:we;t(r.display.scroller,"dragstart",e.start),t(r.display.scroller,"dragenter",e.enter),t(r.display.scroller,"dragover",e.over),t(r.display.scroller,"dragleave",e.leave),t(r.display.scroller,"drop",e.drop)}}function ks(r){r.options.lineWrapping?(le(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(kt(r.display.wrapper,"CodeMirror-wrap"),Rr(r)),On(r),jt(r),no(r),setTimeout(function(){return kr(r)},100)}function it(r,n){var s=this;if(!(this instanceof it))return new it(r,n);this.options=n=n?$(n):{},$(wa,n,!1);var a=n.value;"string"==typeof a?a=new Qt(a,n.mode,null,n.lineSeparator,n.direction):n.mode&&(a.modeOption=n.mode),this.doc=a;var e=new it.inputStyles[n.inputStyle](this),t=this.display=new es(r,a,e,n);for(var i in t.wrapper.CodeMirror=this,ba(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ki(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},n.autofocus&&!pe&&t.input.focus(),ne&&Y<11&&setTimeout(function(){return s.display.input.reset(!0)},20),function lu(r){var n=r.display;ce(n.scroller,"mousedown",Nt(r,bl)),ce(n.scroller,"dblclick",ne&&Y<11?Nt(r,function(l){if(!te(r,l)){var u=hn(r,l);if(u&&!wl(r,l)&&!Ur(r.display,l)){Ee(l);var f=r.findWordAt(u);hl(r.doc,f.anchor,f.head)}}}):function(l){return te(r,l)||Ee(l)}),ce(n.scroller,"contextmenu",function(l){return Cs(r,l)}),ce(n.input.getField(),"contextmenu",function(l){n.scroller.contains(l.target)||Cs(r,l)});var s,a={end:0};function e(){n.activeTouch&&(s=setTimeout(function(){return n.activeTouch=null},1e3),(a=n.activeTouch).end=+new Date)}function t(l){if(1!=l.touches.length)return!1;var u=l.touches[0];return u.radiusX<=1&&u.radiusY<=1}function i(l,u){if(null==u.left)return!0;var f=u.left-l.left,h=u.top-l.top;return f*f+h*h>400}ce(n.scroller,"touchstart",function(l){if(!te(r,l)&&!t(l)&&!wl(r,l)){n.input.ensurePolled(),clearTimeout(s);var u=+new Date;n.activeTouch={start:u,moved:!1,prev:u-a.end<=300?a:null},1==l.touches.length&&(n.activeTouch.left=l.touches[0].pageX,n.activeTouch.top=l.touches[0].pageY)}}),ce(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),ce(n.scroller,"touchend",function(l){var u=n.activeTouch;if(u&&!Ur(n,l)&&null!=u.left&&!u.moved&&new Date-u.start<300){var h,f=r.coordsChar(n.activeTouch,"page");h=!u.prev||i(u,u.prev)?new _e(f,f):!u.prev.prev||i(u,u.prev.prev)?r.findWordAt(f):new _e(p(f.line,0),ue(r.doc,p(f.line+1,0))),r.setSelection(h.anchor,h.head),r.focus(),Ee(l)}e()}),ce(n.scroller,"touchcancel",e),ce(n.scroller,"scroll",function(){n.scroller.clientHeight&&(pn(r,n.scroller.scrollTop),Xr(r,n.scroller.scrollLeft,!0),mt(r,"scroll",r))}),ce(n.scroller,"mousewheel",function(l){return go(r,l)}),ce(n.scroller,"DOMMouseScroll",function(l){return go(r,l)}),ce(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(l){te(r,l)||tr(l)},over:function(l){te(r,l)||(function ar(r,n){var s=hn(r,n);if(s){var a=document.createDocumentFragment();jl(r,s,a),r.display.dragCursor||(r.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),Xe(r.display.dragCursor,a)}}(r,l),tr(l))},start:function(l){return function Qs(r,n){if(ne&&(!r.state.draggingText||+new Date-ls<100))tr(n);else if(!te(r,n)&&!Ur(r.display,n)&&(n.dataTransfer.setData("Text",r.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!ge)){var s=M("img",null,null,"position: fixed; left: 0; top: 0;");s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Se&&(s.width=s.height=1,r.display.wrapper.appendChild(s),s._top=s.offsetTop),n.dataTransfer.setDragImage(s,0,0),Se&&s.parentNode.removeChild(s)}}(r,l)},drop:Nt(r,Js),leave:function(l){te(r,l)||ga(r)}};var o=n.input.getField();ce(o,"keyup",function(l){return ms.call(r,l)}),ce(o,"keydown",Nt(r,ya)),ce(o,"keypress",Nt(r,xl)),ce(o,"focus",function(l){return Jl(r,l)}),ce(o,"blur",function(l){return En(r,l)})}(this),Vs(),Hn(this),this.curOp.forceUpdate=!0,Ni(this,a),n.autofocus&&!pe||this.hasFocus()?setTimeout(function(){s.hasFocus()&&!s.state.focused&&Jl(s)},20):En(this),Cl)Cl.hasOwnProperty(i)&&Cl[i](this,n[i],Rn);$a(this),n.finishInit&&n.finishInit(this);for(var o=0;o<Ca.length;++o)Ca[o](this);In(this),B&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(t.lineDiv).textRendering&&(t.lineDiv.style.textRendering="auto")}it.defaults=wa,it.optionHandlers=Cl;var Ca=[];function Fo(r,n,s,a){var t,e=r.doc;null==s&&(s="add"),"smart"==s&&(e.mode.indent?t=Dn(r,n).state:s="prev");var i=r.options.tabSize,o=ae(e,n),l=me(o.text,null,i);o.stateAfter&&(o.stateAfter=null);var f,u=o.text.match(/^\s*/)[0];if(a||/\S/.test(o.text)){if("smart"==s&&((f=e.mode.indent(t,o.text.slice(u.length),o.text))==A||f>150)){if(!a)return;s="prev"}}else f=0,s="not";"prev"==s?f=n>e.first?me(ae(e,n-1).text,null,i):0:"add"==s?f=l+r.options.indentUnit:"subtract"==s?f=l-r.options.indentUnit:"number"==typeof s&&(f=l+s),f=Math.max(0,f);var h="",c=0;if(r.options.indentWithTabs)for(var d=Math.floor(f/i);d;--d)c+=i,h+="\t";if(c<f&&(h+=er(f-c)),h!=u)return xn(e,h,p(n,0),p(n,u.length),"+input"),o.stateAfter=null,!0;for(var v=0;v<e.sel.ranges.length;v++){var g=e.sel.ranges[v];if(g.head.line==n&&g.head.ch<u.length){var w=p(n,u.length);Bn(e,v,new _e(w,w));break}}}it.defineInitHook=function(r){return Ca.push(r)};var Ie=null;function Sl(r){Ie=r}function Oo(r,n,s,a,e){var t=r.doc;r.display.shift=!1,a||(a=t.sel);var i=+new Date-200,o="paste"==e||r.state.pasteIncoming>i,l=Ln(n),u=null;if(o&&a.ranges.length>1)if(Ie&&Ie.text.join("\n")==n){if(a.ranges.length%Ie.text.length==0){u=[];for(var f=0;f<Ie.text.length;f++)u.push(t.splitLines(Ie.text[f]))}}else l.length==a.ranges.length&&r.options.pasteLinesPerSelection&&(u=wt(l,function(b){return[b]}));for(var h=r.curOp.updateInput,c=a.ranges.length-1;c>=0;c--){var d=a.ranges[c],v=d.from(),g=d.to();d.empty()&&(s&&s>0?v=p(v.line,v.ch-s):r.state.overwrite&&!o?g=p(g.line,Math.min(ae(t,g.line).text.length,g.ch+be(l).length)):o&&Ie&&Ie.lineWise&&Ie.text.join("\n")==l.join("\n")&&(v=g=p(v.line,0)));var w={from:v,to:g,text:u?u[c%u.length]:l,origin:e||(o?"paste":r.state.cutIncoming>i?"cut":"+input")};yn(r.doc,w),Dt(r,"inputRead",r,w)}n&&!o&&Tr(r,n),xi(r),r.curOp.updateInput<2&&(r.curOp.updateInput=h),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function qi(r,n){var s=r.clipboardData&&r.clipboardData.getData("Text");if(s)return r.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&ur(n,function(){return Oo(n,s,0,null,"paste")}),!0}function Tr(r,n){if(r.options.electricChars&&r.options.smartIndent)for(var s=r.doc.sel,a=s.ranges.length-1;a>=0;a--){var e=s.ranges[a];if(!(e.head.ch>100||a&&s.ranges[a-1].head.line==e.head.line)){var t=r.getModeAt(e.head),i=!1;if(t.electricChars){for(var o=0;o<t.electricChars.length;o++)if(n.indexOf(t.electricChars.charAt(o))>-1){i=Fo(r,e.head.line,"smart");break}}else t.electricInput&&t.electricInput.test(ae(r.doc,e.head.line).text.slice(0,e.head.ch))&&(i=Fo(r,e.head.line,"smart"));i&&Dt(r,"electricInput",r,e.head.line)}}}function Eo(r){for(var n=[],s=[],a=0;a<r.doc.sel.ranges.length;a++){var e=r.doc.sel.ranges[a].head.line,t={anchor:p(e,0),head:p(e+1,0)};s.push(t),n.push(r.getRange(t.anchor,t.head))}return{text:n,ranges:s}}function Wo(r,n,s,a){r.setAttribute("autocorrect",s?"on":"off"),r.setAttribute("autocapitalize",a?"on":"off"),r.setAttribute("spellcheck",!!n)}function Sa(){var r=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=M("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return B?r.style.width="1000px":r.setAttribute("wrap","off"),ft&&(r.style.border="1px solid black"),n}function kl(r,n,s,a,e){var t=n,i=s,o=ae(r,n.line),l=e&&"rtl"==r.direction?-s:s;function f(k){var L;if("codepoint"==a){var D=o.text.charCodeAt(n.ch+(s>0?0:-1));L=isNaN(D)?null:new p(n.line,Math.max(0,Math.min(o.text.length,n.ch+s*((s>0?D>=55296&&D<56320:D>=56320&&D<57343)?2:1))),-s)}else L=e?function zi(r,n,s,a){var e=Zt(n,r.doc.direction);if(!e)return ml(n,s,a);s.ch>=n.text.length?(s.ch=n.text.length,s.sticky="before"):s.ch<=0&&(s.ch=0,s.sticky="after");var t=st(e,s.ch,s.sticky),i=e[t];if("ltr"==r.doc.direction&&i.level%2==0&&(a>0?i.to>s.ch:i.from<s.ch))return ml(n,s,a);var l,o=function(b,k){return gl(n,b instanceof p?b.ch:b,k)},u=function(b){return r.options.lineWrapping?(l=l||Xn(r,n),Zl(r,n,l,b)):{begin:0,end:n.text.length}},f=u("before"==s.sticky?o(s,-1):s.ch);if("rtl"==r.doc.direction||1==i.level){var h=1==i.level==a<0,c=o(s,h?1:-1);if(null!=c&&(h?c<=i.to&&c<=f.end:c>=i.from&&c>=f.begin))return new p(s.line,c,h?"before":"after")}var v=function(b,k,L){for(;b>=0&&b<e.length;b+=k){var O=e[b],E=k>0==(1!=O.level),H=E?L.begin:o(L.end,-1);if(O.from<=H&&H<O.to||(H=E?O.from:o(O.to,-1),L.begin<=H&&H<L.end))return _=H,E?new p(s.line,o(_,1),"before"):new p(s.line,_,"after")}var _},g=v(t+a,a,f);if(g)return g;var w=a>0?f.end:o(f.begin,-1);return null==w||a>0&&w==n.text.length||!(g=v(a>0?0:e.length-1,a,u(w)))?null:g}(r.cm,o,n,s):ml(o,n,s);if(null==L){if(k||!function u(){var k=n.line+l;return!(k<r.first||k>=r.first+r.size)&&(n=new p(k,n.ch,n.sticky),o=ae(r,k))}())return!1;n=Bi(e,r.cm,o,n.line,l)}else n=L;return!0}if("char"==a||"codepoint"==a)f();else if("column"==a)f(!0);else if("word"==a||"group"==a)for(var h=null,c="group"==a,d=r.cm&&r.cm.getHelper(n,"wordChars"),v=!0;!(s<0)||f(!v);v=!1){var g=o.text.charAt(n.ch)||"\n",w=se(g,d)?"w":c&&"\n"==g?"n":!c||/\s/.test(g)?null:"p";if(c&&!v&&!w&&(w="s"),h&&h!=w){s<0&&(s=1,f(),n.sticky="after");break}if(w&&(h=w),s>0&&!f(!v))break}var b=bo(r,n,t,i,!0);return W(t,b)&&(b.hitSide=!0),b}function ka(r,n,s,a){var i,u,e=r.doc,t=n.left;if("page"==a){var o=Math.min(r.display.wrapper.clientHeight,S(r).innerHeight||e(r).documentElement.clientHeight),l=Math.max(o-.5*di(r.display),3);i=(s>0?n.bottom:n.top)+s*l}else"line"==a&&(i=s>0?n.bottom+3:n.top-3);for(;(u=ci(r,t,i)).outside;){if(s<0?i<=0:i>=e.height){u.hitSide=!0;break}i+=5*s}return u}var je=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ts(r,n){var s=_l(r,n.line);if(!s||s.hidden)return null;var a=ae(r.doc,n.line),e=Fr(s,a,n.line),t=Zt(a,r.doc.direction),i="left";t&&(i=st(t,n.ch)%2?"right":"left");var l=Vo(e.map,n.ch,i);return l.offset="right"==l.collapse?l.end:l.start,l}function li(r,n){return n&&(r.bad=!0),r}function Ho(r,n,s){var a;if(n==r.display.lineDiv){if(!(a=r.display.lineDiv.childNodes[s]))return li(r.clipPos(p(r.display.viewTo-1)),!0);n=null,s=0}else for(a=n;;a=a.parentNode){if(!a||a==r.display.lineDiv)return null;if(a.parentNode&&a.parentNode==r.display.lineDiv)break}for(var e=0;e<r.display.view.length;e++){var t=r.display.view[e];if(t.node==a)return au(t,n,s)}}function au(r,n,s){var a=r.text.firstChild,e=!1;if(!n||!K(a,n))return li(p(q(r.line),0),!0);if(n==a&&(e=!0,n=a.childNodes[s],s=0,!n)){var t=r.rest?be(r.rest):r.line;return li(p(q(t),t.text.length),e)}var i=3==n.nodeType?n:null,o=n;for(!i&&1==n.childNodes.length&&3==n.firstChild.nodeType&&(i=n.firstChild,s&&(s=i.nodeValue.length));o.parentNode!=a;)o=o.parentNode;var l=r.measure,u=l.maps;function f(w,b,k){for(var L=-1;L<(u?u.length:0);L++)for(var D=L<0?l.map:u[L],O=0;O<D.length;O+=3){var E=D[O+2];if(E==w||E==b){var H=q(L<0?r.line:r.rest[L]),_=D[O]+k;return(k<0||E!=w)&&(_=D[O+(k?1:0)]),p(H,_)}}}var h=f(i,o,s);if(h)return li(h,e);for(var c=o.nextSibling,d=i?i.nodeValue.length-s:0;c;c=c.nextSibling){if(h=f(c,c.firstChild,0))return li(p(h.line,h.ch-d),e);d+=c.textContent.length}for(var v=o.previousSibling,g=s;v;v=v.previousSibling){if(h=f(v,v.firstChild,-1))return li(p(h.line,h.ch+g),e);g+=v.textContent.length}}je.prototype.init=function(r){var n=this,s=this,a=s.cm,e=s.div=r.lineDiv;function t(o){for(var l=o.target;l;l=l.parentNode){if(l==e)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(l.className))break}return!1}function i(o){if(t(o)&&!te(a,o)){if(a.somethingSelected())Sl({lineWise:!1,text:a.getSelections()}),"cut"==o.type&&a.replaceSelection("",null,"cut");else{if(!a.options.lineWiseCopyCut)return;var l=Eo(a);Sl({lineWise:!0,text:l.text}),"cut"==o.type&&a.operation(function(){a.setSelections(l.ranges,0,ie),a.replaceSelection("",null,"cut")})}if(o.clipboardData){o.clipboardData.clearData();var u=Ie.text.join("\n");if(o.clipboardData.setData("Text",u),o.clipboardData.getData("Text")==u)return void o.preventDefault()}var f=Sa(),h=f.firstChild;Wo(h),a.display.lineSpace.insertBefore(f,a.display.lineSpace.firstChild),h.value=Ie.text.join("\n");var c=P(e.ownerDocument);tt(h),setTimeout(function(){a.display.lineSpace.removeChild(f),c.focus(),c==e&&s.showPrimarySelection()},50)}}e.contentEditable=!0,Wo(e,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize),ce(e,"paste",function(o){!t(o)||te(a,o)||qi(o,a)||Y<=11&&setTimeout(Nt(a,function(){return n.updateFromDOM()}),20)}),ce(e,"compositionstart",function(o){n.composing={data:o.data,done:!1}}),ce(e,"compositionupdate",function(o){n.composing||(n.composing={data:o.data,done:!1})}),ce(e,"compositionend",function(o){n.composing&&(o.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),ce(e,"touchstart",function(){return s.forceCompositionEnd()}),ce(e,"input",function(){n.composing||n.readFromDOMSoon()}),ce(e,"copy",i),ce(e,"cut",i)},je.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},je.prototype.prepareSelection=function(){var r=ao(this.cm,!1);return r.focus=P(this.div.ownerDocument)==this.div,r},je.prototype.showSelection=function(r,n){!r||!this.cm.display.view.length||((r.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(r))},je.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},je.prototype.showPrimarySelection=function(){var r=this.getSelection(),n=this.cm,s=n.doc.sel.primary(),a=s.from(),e=s.to();if(n.display.viewTo==n.display.viewFrom||a.line>=n.display.viewTo||e.line<n.display.viewFrom)r.removeAllRanges();else{var t=Ho(n,r.anchorNode,r.anchorOffset),i=Ho(n,r.focusNode,r.focusOffset);if(!t||t.bad||!i||i.bad||0!=x(X(t,i),a)||0!=x(N(t,i),e)){var o=n.display.view,l=a.line>=n.display.viewFrom&&Ts(n,a)||{node:o[0].measure.map[2],offset:0},u=e.line<n.display.viewTo&&Ts(n,e);if(!u){var f=o[o.length-1].measure,h=f.maps?f.maps[f.maps.length-1]:f.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!l||!u)return void r.removeAllRanges();var d,c=r.rangeCount&&r.getRangeAt(0);try{d=y(l.node,l.offset,u.offset,u.node)}catch{}d&&(!J&&n.state.focused?(r.collapse(l.node,l.offset),d.collapsed||(r.removeAllRanges(),r.addRange(d))):(r.removeAllRanges(),r.addRange(d)),c&&null==r.anchorNode?r.addRange(c):J&&this.startGracePeriod()),this.rememberSelection()}}},je.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},je.prototype.showMultipleSelections=function(r){Xe(this.cm.display.cursorDiv,r.cursors),Xe(this.cm.display.selectionDiv,r.selection)},je.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},je.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var n=r.getRangeAt(0).commonAncestorContainer;return K(this.div,n)},je.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||P(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},je.prototype.blur=function(){this.div.blur()},je.prototype.getField=function(){return this.div},je.prototype.supportsTouch=function(){return!0},je.prototype.receivedFocus=function(){var r=this,n=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):ur(this.cm,function(){return n.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function s(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,s))})},je.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},je.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var r=this.getSelection(),n=this.cm;if(at&&de&&this.cm.display.gutterSpecs.length&&function La(r){for(var n=r;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}(r.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var s=Ho(n,r.anchorNode,r.anchorOffset),a=Ho(n,r.focusNode,r.focusOffset);s&&a&&ur(n,function(){Ht(n.doc,vn(s,a),ie),(s.bad||a.bad)&&(n.curOp.selectionChanged=!0)})}}},je.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,i,o,r=this.cm,n=r.display,s=r.doc.sel.primary(),a=s.from(),e=s.to();if(0==a.ch&&a.line>r.firstLine()&&(a=p(a.line-1,ae(r.doc,a.line-1).length)),e.ch==ae(r.doc,e.line).text.length&&e.line<r.lastLine()&&(e=p(e.line+1,0)),a.line<n.viewFrom||e.line>n.viewTo-1)return!1;a.line==n.viewFrom||0==(t=cn(r,a.line))?(i=q(n.view[0].line),o=n.view[0].node):(i=q(n.view[t].line),o=n.view[t-1].node.nextSibling);var u,f,l=cn(r,e.line);if(l==n.view.length-1?(u=n.viewTo-1,f=n.lineDiv.lastChild):(u=q(n.view[l+1].line)-1,f=n.view[l+1].node.previousSibling),!o)return!1;for(var h=r.doc.splitLines(function $e(r,n,s,a,e){var t="",i=!1,o=r.doc.lineSeparator(),l=!1;function f(){i&&(t+=o,l&&(t+=o),i=l=!1)}function h(d){d&&(f(),t+=d)}function c(d){if(1==d.nodeType){var v=d.getAttribute("cm-text");if(v)return void h(v);var w,g=d.getAttribute("cm-marker");if(g){var b=r.findMarks(p(a,0),p(e+1,0),function u(d){return function(v){return v.id==d}}(+g));return void(b.length&&(w=b[0].find(0))&&h(Dr(r.doc,w.from,w.to).join(o)))}if("false"==d.getAttribute("contenteditable"))return;var k=/^(pre|div|p|li|table|br)$/i.test(d.nodeName);if(!/^br$/i.test(d.nodeName)&&0==d.textContent.length)return;k&&f();for(var L=0;L<d.childNodes.length;L++)c(d.childNodes[L]);/^(pre|p)$/i.test(d.nodeName)&&(l=!0),k&&(i=!0)}else 3==d.nodeType&&h(d.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;c(n),n!=s;)n=n.nextSibling,l=!1;return t}(r,o,f,i,u)),c=Dr(r.doc,p(i,0),p(u,ae(r.doc,u).text.length));h.length>1&&c.length>1;)if(be(h)==be(c))h.pop(),c.pop(),u--;else{if(h[0]!=c[0])break;h.shift(),c.shift(),i++}for(var d=0,v=0,g=h[0],w=c[0],b=Math.min(g.length,w.length);d<b&&g.charCodeAt(d)==w.charCodeAt(d);)++d;for(var k=be(h),L=be(c),D=Math.min(k.length-(1==h.length?d:0),L.length-(1==c.length?d:0));v<D&&k.charCodeAt(k.length-v-1)==L.charCodeAt(L.length-v-1);)++v;if(1==h.length&&1==c.length&&i==a.line)for(;d&&d>a.ch&&k.charCodeAt(k.length-v-1)==L.charCodeAt(L.length-v-1);)d--,v++;h[h.length-1]=k.slice(0,k.length-v).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var O=p(i,d),E=p(u,c.length?be(c).length-v:0);return h.length>1||h[0]||x(O,E)?(xn(r.doc,h,O,E,"+input"),!0):void 0},je.prototype.ensurePolled=function(){this.forceCompositionEnd()},je.prototype.reset=function(){this.forceCompositionEnd()},je.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},je.prototype.readFromDOMSoon=function(){var r=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing){if(!r.composing.done)return;r.composing=null}r.updateFromDOM()},80))},je.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&ur(this.cm,function(){return jt(r.cm)})},je.prototype.setUneditable=function(r){r.contentEditable="false"},je.prototype.onKeyPress=function(r){0==r.charCode||this.composing||(r.preventDefault(),this.cm.isReadOnly()||Nt(this.cm,Oo)(this.cm,String.fromCharCode(null==r.charCode?r.keyCode:r.charCode),0))},je.prototype.readOnlyChanged=function(r){this.div.contentEditable=String("nocursor"!=r)},je.prototype.onContextMenu=function(){},je.prototype.resetPosition=function(){},je.prototype.needsContentAttribute=!0;var lt=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null,this.resetting=!1};lt.prototype.init=function(r){var n=this,s=this,a=this.cm;this.createField(r);var e=this.textarea;function t(i){if(!te(a,i)){if(a.somethingSelected())Sl({lineWise:!1,text:a.getSelections()});else{if(!a.options.lineWiseCopyCut)return;var o=Eo(a);Sl({lineWise:!0,text:o.text}),"cut"==i.type?a.setSelections(o.ranges,null,ie):(s.prevInput="",e.value=o.text.join("\n"),tt(e))}"cut"==i.type&&(a.state.cutIncoming=+new Date)}}r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),ft&&(e.style.width="0px"),ce(e,"input",function(){ne&&Y>=9&&n.hasSelection&&(n.hasSelection=null),s.poll()}),ce(e,"paste",function(i){te(a,i)||qi(i,a)||(a.state.pasteIncoming=+new Date,s.fastPoll())}),ce(e,"cut",t),ce(e,"copy",t),ce(r.scroller,"paste",function(i){if(!Ur(r,i)&&!te(a,i)){if(!e.dispatchEvent)return a.state.pasteIncoming=+new Date,void s.focus();var o=new Event("paste");o.clipboardData=i.clipboardData,e.dispatchEvent(o)}}),ce(r.lineSpace,"selectstart",function(i){Ur(r,i)||Ee(i)}),ce(e,"compositionstart",function(){var i=a.getCursor("from");s.composing&&s.composing.range.clear(),s.composing={start:i,range:a.markText(i,a.getCursor("to"),{className:"CodeMirror-composing"})}}),ce(e,"compositionend",function(){s.composing&&(s.poll(),s.composing.range.clear(),s.composing=null)})},lt.prototype.createField=function(r){this.wrapper=Sa(),this.textarea=this.wrapper.firstChild;var n=this.cm.options;Wo(this.textarea,n.spellcheck,n.autocorrect,n.autocapitalize)},lt.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},lt.prototype.prepareSelection=function(){var r=this.cm,n=r.display,s=r.doc,a=ao(r);if(r.options.moveInputWithCursor){var e=gr(r,s.sel.primary().head,"div"),t=n.wrapper.getBoundingClientRect(),i=n.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,e.top+i.top-t.top)),a.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,e.left+i.left-t.left))}return a},lt.prototype.showSelection=function(r){var s=this.cm.display;Xe(s.cursorDiv,r.cursors),Xe(s.selectionDiv,r.selection),null!=r.teTop&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},lt.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var n=this.cm;if(this.resetting=!0,n.somethingSelected()){this.prevInput="";var s=n.getSelection();this.textarea.value=s,n.state.focused&&tt(this.textarea),ne&&Y>=9&&(this.hasSelection=s)}else r||(this.prevInput=this.textarea.value="",ne&&Y>=9&&(this.hasSelection=null));this.resetting=!1}},lt.prototype.getField=function(){return this.textarea},lt.prototype.supportsTouch=function(){return!1},lt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!pe||P(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},lt.prototype.blur=function(){this.textarea.blur()},lt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},lt.prototype.receivedFocus=function(){this.slowPoll()},lt.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},lt.prototype.fastPoll=function(){var r=!1,n=this;n.pollingFast=!0,n.polling.set(20,function s(){n.poll()||r?(n.pollingFast=!1,n.slowPoll()):(r=!0,n.polling.set(60,s))})},lt.prototype.poll=function(){var r=this,n=this.cm,s=this.textarea,a=this.prevInput;if(this.contextMenuPending||this.resetting||!n.state.focused||Po(s)&&!a&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var e=s.value;if(e==a&&!n.somethingSelected())return!1;if(ne&&Y>=9&&this.hasSelection===e||Ye&&/[\uf700-\uf7ff]/.test(e))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var t=e.charCodeAt(0);if(8203==t&&!a&&(a="\u200b"),8666==t)return this.reset(),this.cm.execCommand("undo")}for(var i=0,o=Math.min(a.length,e.length);i<o&&a.charCodeAt(i)==e.charCodeAt(i);)++i;return ur(n,function(){Oo(n,e.slice(i),a.length-i,null,r.composing?"*compose":null),e.length>1e3||e.indexOf("\n")>-1?s.value=r.prevInput="":r.prevInput=e,r.composing&&(r.composing.range.clear(),r.composing.range=n.markText(r.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},lt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},lt.prototype.onKeyPress=function(){ne&&Y>=9&&(this.hasSelection=null),this.fastPoll()},lt.prototype.onContextMenu=function(r){var n=this,s=n.cm,a=s.display,e=n.textarea;n.contextMenuPending&&n.contextMenuPending();var t=hn(s,r),i=a.scroller.scrollTop;if(t&&!Se){s.options.resetSelectionOnContextMenu&&-1==s.doc.sel.contains(t)&&Nt(s,Ht)(s.doc,vn(t),ie);var h,l=e.style.cssText,u=n.wrapper.style.cssText,f=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",e.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(r.clientY-f.top-5)+"px; left: "+(r.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(ne?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",B&&(h=e.ownerDocument.defaultView.scrollY),a.input.focus(),B&&e.ownerDocument.defaultView.scrollTo(null,h),a.input.reset(),s.somethingSelected()||(e.value=n.prevInput=" "),n.contextMenuPending=d,a.selForContextMenu=s.doc.sel,clearTimeout(a.detectingSelectAll),ne&&Y>=9&&c(),gt){tr(r);var v=function(){we(window,"mouseup",v),setTimeout(d,20)};ce(window,"mouseup",v)}else setTimeout(d,50)}function c(){if(null!=e.selectionStart){var g=s.somethingSelected(),w="\u200b"+(g?e.value:"");e.value="\u21da",e.value=w,n.prevInput=g?"":"\u200b",e.selectionStart=1,e.selectionEnd=w.length,a.selForContextMenu=s.doc.sel}}function d(){if(n.contextMenuPending==d&&(n.contextMenuPending=!1,n.wrapper.style.cssText=u,e.style.cssText=l,ne&&Y<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=i),null!=e.selectionStart)){(!ne||ne&&Y<9)&&c();var g=0,w=function(){a.selForContextMenu==s.doc.sel&&0==e.selectionStart&&e.selectionEnd>0&&"\u200b"==n.prevInput?Nt(s,ca)(s):g++<10?a.detectingSelectAll=setTimeout(w,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(w,200)}}},lt.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled="nocursor"==r,this.textarea.readOnly=!!r},lt.prototype.setUneditable=function(){},lt.prototype.needsContentAttribute=!1,function Ss(r){var n=r.optionHandlers;function s(a,e,t,i){r.defaults[a]=e,t&&(n[a]=i?function(o,l,u){u!=Rn&&t(o,l,u)}:t)}r.defineOption=s,r.Init=Rn,s("value","",function(a,e){return a.setValue(e)},!0),s("mode",null,function(a,e){a.doc.modeOption=e,sl(a)},!0),s("indentUnit",2,sl,!0),s("indentWithTabs",!1),s("smartIndent",!0),s("tabSize",4,function(a){$n(a),no(a),jt(a)},!0),s("lineSeparator",null,function(a,e){if(a.doc.lineSep=e,e){var t=[],i=a.doc.first;a.doc.iter(function(l){for(var u=0;;){var f=l.text.indexOf(e,u);if(-1==f)break;u=f+e.length,t.push(p(i,f))}i++});for(var o=t.length-1;o>=0;o--)xn(a.doc,e,t[o],p(t[o].line,t[o].ch+e.length))}}),s("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(a,e,t){a.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t!=Rn&&a.refresh()}),s("specialCharPlaceholder",Es,function(a){return a.refresh()},!0),s("electricChars",!0),s("inputStyle",pe?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),s("spellcheck",!1,function(a,e){return a.getInputField().spellcheck=e},!0),s("autocorrect",!1,function(a,e){return a.getInputField().autocorrect=e},!0),s("autocapitalize",!1,function(a,e){return a.getInputField().autocapitalize=e},!0),s("rtlMoveVisually",!Kt),s("wholeLineUpdateBefore",!0),s("theme","default",function(a){ba(a),Mi(a)},!0),s("keyMap","default",function(a,e,t){var i=Cn(e),o=t!=Rn&&Cn(t);o&&o.detach&&o.detach(a,i),i.attach&&i.attach(a,o||null)}),s("extraKeys",null),s("configureMouse",null),s("lineWrapping",!1,ks,!0),s("gutters",[],function(a,e){a.display.gutterSpecs=vo(e,a.options.lineNumbers),Mi(a)},!0),s("fixedGutter",!0,function(a,e){a.display.gutters.style.left=e?fn(a.display)+"px":"0",a.refresh()},!0),s("coverGutterNextToScrollbar",!1,function(a){return kr(a)},!0),s("scrollbarStyle","native",function(a){ki(a),kr(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),s("lineNumbers",!1,function(a,e){a.display.gutterSpecs=vo(a.options.gutters,e),Mi(a)},!0),s("firstLineNumber",1,Mi,!0),s("lineNumberFormatter",function(a){return a},Mi,!0),s("showCursorWhenSelecting",!1,Sr,!0),s("resetSelectionOnContextMenu",!0),s("lineWiseCopyCut",!0),s("pasteLinesPerSelection",!0),s("selectionsMayTouch",!1),s("readOnly",!1,function(a,e){"nocursor"==e&&(En(a),a.display.input.blur()),a.display.input.readOnlyChanged(e)}),s("screenReaderLabel",null,function(a,e){a.display.input.screenReaderLabelChanged(e=""===e?null:e)}),s("disableInput",!1,function(a,e){e||a.display.input.reset()},!0),s("dragDrop",!0,Gi),s("allowDropFileTypes",null),s("cursorBlinkRate",530),s("cursorScrollMargin",0),s("cursorHeight",1,Sr,!0),s("singleCursorHeightPerLine",!0,Sr,!0),s("workTime",100),s("workDelay",100),s("flattenSpans",!0,$n,!0),s("addModeClass",!1,$n,!0),s("pollInterval",100),s("undoDepth",200,function(a,e){return a.doc.history.undoDepth=e}),s("historyEventDelay",1250),s("viewportMargin",10,function(a){return a.refresh()},!0),s("maxHighlightLength",1e4,$n,!0),s("moveInputWithCursor",!0,function(a,e){e||a.display.input.resetPosition()}),s("tabindex",null,function(a,e){return a.display.input.getField().tabIndex=e||""}),s("autofocus",null),s("direction","ltr",function(a,e){return a.doc.setDirection(e)},!0),s("phrases",null)}(it),function Ls(r){var n=r.optionHandlers,s=r.helpers={};r.prototype={constructor:r,focus:function(){S(this).focus(),this.display.input.focus()},setOption:function(a,e){var t=this.options,i=t[a];t[a]==e&&"mode"!=a||(t[a]=e,n.hasOwnProperty(a)&&Nt(this,n[a])(this,e,i),mt(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,e){this.state.keyMaps[e?"push":"unshift"](Cn(a))},removeKeyMap:function(a){for(var e=this.state.keyMaps,t=0;t<e.length;++t)if(e[t]==a||e[t].name==a)return e.splice(t,1),!0},addOverlay:Jt(function(a,e){var t=a.token?a:r.getMode(this.options,a);if(t.startState)throw new Error("Overlays may not be stateful.");(function It(r,n,s){for(var a=0,e=s(n);a<r.length&&s(r[a])<=e;)a++;r.splice(a,0,n)})(this.state.overlays,{mode:t,modeSpec:a,opaque:e&&e.opaque,priority:e&&e.priority||0},function(i){return i.priority}),this.state.modeGen++,jt(this)}),removeOverlay:Jt(function(a){for(var e=this.state.overlays,t=0;t<e.length;++t){var i=e[t].modeSpec;if(i==a||"string"==typeof a&&i.name==a)return e.splice(t,1),this.state.modeGen++,void jt(this)}}),indentLine:Jt(function(a,e,t){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),ln(this.doc,a)&&Fo(this,a,e,t)}),indentSelection:Jt(function(a){for(var e=this.doc.sel.ranges,t=-1,i=0;i<e.length;i++){var o=e[i];if(o.empty())o.head.line>t&&(Fo(this,o.head.line,a,!0),t=o.head.line,i==this.doc.sel.primIndex&&xi(this));else{var l=o.from(),u=o.to(),f=Math.max(t,l.line);t=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var h=f;h<t;++h)Fo(this,h,a);var c=this.doc.sel.ranges;0==l.ch&&e.length==c.length&&c[i].from().ch>0&&Bn(this.doc,i,new _e(l,c[i].to()),ie)}}}),getTokenAt:function(a,e){return zo(this,a,e)},getLineTokens:function(a,e){return zo(this,p(a),e,!0)},getTokenTypeAt:function(a){a=ue(this.doc,a);var l,e=Al(this,ae(this.doc,a.line)),t=0,i=(e.length-1)/2,o=a.ch;if(0==o)l=e[2];else for(;;){var u=t+i>>1;if((u?e[2*u-1]:0)>=o)i=u;else{if(!(e[2*u+1]<o)){l=e[2*u+2];break}t=u+1}}var f=l?l.indexOf("overlay "):-1;return f<0?l:0==f?null:l.slice(0,f-1)},getModeAt:function(a){var e=this.doc.mode;return e.innerMode?r.innerMode(e,this.getTokenAt(a).state).mode:e},getHelper:function(a,e){return this.getHelpers(a,e)[0]},getHelpers:function(a,e){var t=[];if(!s.hasOwnProperty(e))return t;var i=s[e],o=this.getModeAt(a);if("string"==typeof o[e])i[o[e]]&&t.push(i[o[e]]);else if(o[e])for(var l=0;l<o[e].length;l++){var u=i[o[e][l]];u&&t.push(u)}else o.helperType&&i[o.helperType]?t.push(i[o.helperType]):i[o.name]&&t.push(i[o.name]);for(var f=0;f<i._global.length;f++){var h=i._global[f];h.pred(o,this)&&-1==Q(t,h.val)&&t.push(h.val)}return t},getStateAfter:function(a,e){var t=this.doc;return Dn(this,(a=Re(t,a??t.first+t.size-1))+1,e).state},cursorCoords:function(a,e){var i=this.doc.sel.primary();return gr(this,null==a?i.head:"object"==typeof a?ue(this.doc,a):a?i.from():i.to(),e||"page")},charCoords:function(a,e){return io(this,ue(this.doc,a),e||"page")},coordsChar:function(a,e){return ci(this,(a=Kl(this,a,e||"page")).left,a.top)},lineAtHeight:function(a,e){return a=Kl(this,{top:a,left:0},e||"page").top,nr(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,e,t){var o,i=!1;if("number"==typeof a){var l=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>l&&(a=l,i=!0),o=ae(this.doc,a)}else o=a;return Fn(this,o,{top:0,left:0},e||"page",t||i).top+(i?this.doc.height-Nr(o):0)},defaultTextHeight:function(){return di(this.display)},defaultCharWidth:function(){return pi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,e,t,i,o){var l=this.display,u=(a=gr(this,ue(this.doc,a))).bottom,f=a.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==i)u=a.top;else if("above"==i||"near"==i){var h=Math.max(l.wrapper.clientHeight,this.doc.height),c=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==i||a.bottom+e.offsetHeight>h)&&a.top>e.offsetHeight?u=a.top-e.offsetHeight:a.bottom+e.offsetHeight<=h&&(u=a.bottom),f+e.offsetWidth>c&&(f=c-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==o?(f=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?f=0:"middle"==o&&(f=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=f+"px"),t&&function ja(r,n){var s=yi(r,n);null!=s.scrollTop&&pn(r,s.scrollTop),null!=s.scrollLeft&&Xr(r,s.scrollLeft)}(this,{left:f,top:u,right:f+e.offsetWidth,bottom:u+e.offsetHeight})},triggerOnKeyDown:Jt(ya),triggerOnKeyPress:Jt(xl),triggerOnKeyUp:ms,triggerOnMouseDown:Jt(bl),execCommand:function(a){if(ii.hasOwnProperty(a))return ii[a].call(null,this)},triggerElectric:Jt(function(a){Tr(this,a)}),findPosH:function(a,e,t,i){var o=1;e<0&&(o=-1,e=-e);for(var l=ue(this.doc,a),u=0;u<e&&!(l=kl(this.doc,l,o,t,i)).hitSide;++u);return l},moveH:Jt(function(a,e){var t=this;this.extendSelectionsBy(function(i){return t.display.shift||t.doc.extend||i.empty()?kl(t.doc,i.head,a,e,t.options.rtlMoveVisually):a<0?i.from():i.to()},ve)}),deleteH:Jt(function(a,e){var i=this.doc;this.doc.sel.somethingSelected()?i.replaceSelection("",null,"+delete"):ni(this,function(o){var l=kl(i,o.head,a,e,!1);return a<0?{from:l,to:o.head}:{from:o.head,to:l}})}),findPosV:function(a,e,t,i){var o=1,l=i;e<0&&(o=-1,e=-e);for(var u=ue(this.doc,a),f=0;f<e;++f){var h=gr(this,u,"div");if(null==l?l=h.left:h.left=l,(u=ka(this,h,o,t)).hitSide)break}return u},moveV:Jt(function(a,e){var t=this,i=this.doc,o=[],l=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(f){if(l)return a<0?f.from():f.to();var h=gr(t,f.head,"div");null!=f.goalColumn&&(h.left=f.goalColumn),o.push(h.left);var c=ka(t,h,a,e);return"page"==e&&f==i.sel.primary()&&Ql(t,io(t,c,"div").top-h.top),c},ve),o.length)for(var u=0;u<i.sel.ranges.length;u++)i.sel.ranges[u].goalColumn=o[u]}),findWordAt:function(a){var t=ae(this.doc,a.line).text,i=a.ch,o=a.ch;if(t){var l=this.getHelper(a,"wordChars");"before"!=a.sticky&&o!=t.length||!i?++o:--i;for(var u=t.charAt(i),f=se(u,l)?function(h){return se(h,l)}:/\s/.test(u)?function(h){return/\s/.test(h)}:function(h){return!/\s/.test(h)&&!se(h)};i>0&&f(t.charAt(i-1));)--i;for(;o<t.length&&f(t.charAt(o));)++o}return new _e(p(a.line,i),p(a.line,o))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?le(this.display.cursorDiv,"CodeMirror-overwrite"):kt(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P(Qe(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Jt(function(a,e){ho(this,a,e)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-zt(this)-this.display.barHeight,width:a.scrollWidth-zt(this)-this.display.barWidth,clientHeight:ro(this),clientWidth:Gr(this)}},scrollIntoView:Jt(function(a,e){null==a?(a={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof a?a={from:p(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=e||0,null!=a.from.line?function Vl(r,n){bi(r),r.curOp.scrollToPos=n}(this,a):Jn(this,a.from,a.to,a.margin)}),setSize:Jt(function(a,e){var t=this,i=function(l){return"number"==typeof l||/^\d+$/.test(String(l))?l+"px":l};null!=a&&(this.display.wrapper.style.width=i(a)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&Ka(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(l){if(l.widgets)for(var u=0;u<l.widgets.length;u++)if(l.widgets[u].noHScroll){Zr(t,o,"widget");break}++o}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(a){return ur(this,a)},startOperation:function(){return Hn(this)},endOperation:function(){return In(this)},refresh:Jt(function(){var a=this.display.cachedTextHeight;jt(this),this.curOp.forceUpdate=!0,no(this),ho(this,this.doc.scrollLeft,this.doc.scrollTop),po(this.display),(null==a||Math.abs(a-di(this.display))>.5||this.options.lineWrapping)&&On(this),mt(this,"refresh",this)}),swapDoc:Jt(function(a){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Ni(this,a),no(this),this.display.input.reset(),ho(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,Dt(this,"swapDoc",this,e),e}),phrase:function(a){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,a)?e[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},nt(r),r.registerHelper=function(a,e,t){s.hasOwnProperty(a)||(s[a]=r[a]={_global:[]}),s[a][e]=t},r.registerGlobalHelper=function(a,e,t,i){r.registerHelper(a,e,i),s[a]._global.push({pred:t,val:i})}}(it);var uu="iter insert remove copy getEditor constructor".split(" ");for(var ht in Qt.prototype)Qt.prototype.hasOwnProperty(ht)&&Q(uu,ht)<0&&(it.prototype[ht]=function(r){return function(){return r.apply(this.doc,arguments)}}(Qt.prototype[ht]));return nt(Qt),it.inputStyles={textarea:lt,contenteditable:je},it.defineMode=function(r){!it.defaults.mode&&"null"!=r&&(it.defaults.mode=r),Mr.apply(this,arguments)},it.defineMIME=function Dl(r,n){rn[r]=n},it.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),it.defineMIME("text/plain","null"),it.defineExtension=function(r,n){it.prototype[r]=n},it.defineDocExtension=function(r,n){Qt.prototype[r]=n},it.fromTextArea=function su(r,n){if((n=n?$(n):{}).value=r.value,!n.tabindex&&r.tabIndex&&(n.tabindex=r.tabIndex),!n.placeholder&&r.placeholder&&(n.placeholder=r.placeholder),null==n.autofocus){var s=P(r.ownerDocument);n.autofocus=s==r||null!=r.getAttribute("autofocus")&&s==document.body}function a(){r.value=o.getValue()}var e;if(r.form&&(ce(r.form,"submit",a),!n.leaveSubmitMethodAlone)){var t=r.form;e=t.submit;try{var i=t.submit=function(){a(),t.submit=e,t.submit(),t.submit=i}}catch{}}n.finishInit=function(l){l.save=a,l.getTextArea=function(){return r},l.toTextArea=function(){l.toTextArea=isNaN,a(),r.parentNode.removeChild(l.getWrapperElement()),r.style.display="",r.form&&(we(r.form,"submit",a),!n.leaveSubmitMethodAlone&&"function"==typeof r.form.submit&&(r.form.submit=e))}},r.style.display="none";var o=it(function(l){return r.parentNode.insertBefore(l,r.nextSibling)},n);return o},function Ll(r){r.off=we,r.on=ce,r.wheelEventPixels=Ks,r.Doc=Qt,r.splitLines=Ln,r.countColumn=me,r.findColumn=Le,r.isWordChar=I,r.Pass=A,r.signal=mt,r.Line=Nn,r.changeEnd=Tt,r.scrollbarModel=Wn,r.Pos=p,r.cmpPos=x,r.modes=Br,r.mimeModes=rn,r.resolveMode=nn,r.getMode=pr,r.modeExtensions=Xt,r.extendMode=Un,r.copyState=xr,r.startState=on,r.innerMode=Tn,r.commands=ii,r.keyMap=Vt,r.keyName=cs,r.isModifierKey=en,r.lookupKey=$r,r.normalizeKeyMap=vl,r.StringStream=ut,r.SharedTextMarker=So,r.TextMarker=Lr,r.LineWidget=Wi,r.e_preventDefault=Ee,r.e_stopPropagation=cr,r.e_stop=tr,r.addClass=le,r.contains=K,r.rmClass=kt,r.keyNames=wn}(it),it.version="5.65.15",it}()},4166:(ai,vt,Ce)=>{!function(J){"use strict";J.defineMode("javascript",function(Ke,G){var ft,at,he=Ke.indentUnit,ne=G.statementIndent,Y=G.jsonld,B=G.json||Y,Ae=!1!==G.trackScope,de=G.typescript,ze=G.wordCharacters||/[\w$\xa1-\uffff]/,Se=function(){function p(ue){return{type:ue,style:"keyword"}}var x=p("keyword a"),W=p("keyword b"),R=p("keyword c"),N=p("keyword d"),X=p("operator"),Re={type:"atom",style:"atom"};return{if:p("if"),while:x,with:x,else:W,do:W,try:W,finally:W,return:N,break:N,continue:N,new:p("new"),delete:R,void:R,throw:R,debugger:p("debugger"),var:p("var"),const:p("var"),let:p("var"),function:p("function"),catch:p("catch"),for:p("for"),switch:p("switch"),case:p("case"),default:p("default"),in:X,typeof:X,instanceof:X,true:Re,false:Re,null:Re,undefined:Re,NaN:Re,Infinity:Re,this:p("this"),class:p("class"),super:p("atom"),yield:R,export:p("export"),import:p("import"),extends:R,await:R}}(),ge=/[+\-*&%=<>!?|~^@]/,ke=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function pe(p,x,W){return ft=p,at=W,x}function Ye(p,x){var W=p.next();if('"'==W||"'"==W)return x.tokenize=function qt(p){return function(x,W){var N,R=!1;if(Y&&"@"==x.peek()&&x.match(ke))return W.tokenize=Ye,pe("jsonld-keyword","meta");for(;null!=(N=x.next())&&(N!=p||R);)R=!R&&"\\"==N;return R||(W.tokenize=Ye),pe("string","string")}}(W),x.tokenize(p,x);if("."==W&&p.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return pe("number","number");if("."==W&&p.match(".."))return pe("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(W))return pe(W);if("="==W&&p.eat(">"))return pe("=>","operator");if("0"==W&&p.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return pe("number","number");if(/\d/.test(W))return p.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),pe("number","number");if("/"==W)return p.eat("*")?(x.tokenize=Kt,Kt(p,x)):p.eat("/")?(p.skipToEnd(),pe("comment","comment")):ir(p,x,1)?(function Ze(p){for(var W,x=!1,R=!1;null!=(W=p.next());){if(!x){if("/"==W&&!R)return;"["==W?R=!0:R&&"]"==W&&(R=!1)}x=!x&&"\\"==W}}(p),p.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),pe("regexp","string-2")):(p.eat("="),pe("operator","operator",p.current()));if("`"==W)return x.tokenize=et,et(p,x);if("#"==W&&"!"==p.peek())return p.skipToEnd(),pe("meta","meta");if("#"==W&&p.eatWhile(ze))return pe("variable","property");if("<"==W&&p.match("!--")||"-"==W&&p.match("->")&&!/\S/.test(p.string.slice(0,p.start)))return p.skipToEnd(),pe("comment","comment");if(ge.test(W))return(">"!=W||!x.lexical||">"!=x.lexical.type)&&(p.eat("=")?("!"==W||"="==W)&&p.eat("="):/[<>*+\-|&?]/.test(W)&&(p.eat(W),">"==W&&p.eat(W))),"?"==W&&p.eat(".")?pe("."):pe("operator","operator",p.current());if(ze.test(W)){p.eatWhile(ze);var R=p.current();if("."!=x.lastType){if(Se.propertyIsEnumerable(R)){var N=Se[R];return pe(N.type,N.style,R)}if("async"==R&&p.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return pe("async","keyword",R)}return pe("variable","variable",R)}}function Kt(p,x){for(var R,W=!1;R=p.next();){if("/"==R&&W){x.tokenize=Ye;break}W="*"==R}return pe("comment","comment")}function et(p,x){for(var R,W=!1;null!=(R=p.next());){if(!W&&("`"==R||"$"==R&&p.eat("{"))){x.tokenize=Ye;break}W=!W&&"\\"==R}return pe("quasi","string-2",p.current())}var C="([{}])";function gt(p,x){x.fatArrowAt&&(x.fatArrowAt=null);var W=p.string.indexOf("=>",p.start);if(!(W<0)){if(de){var R=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(p.string.slice(p.start,W));R&&(W=R.index)}for(var N=0,X=!1,Re=W-1;Re>=0;--Re){var ue=p.string.charAt(Re),or=C.indexOf(ue);if(or>=0&&or<3){if(!N){++Re;break}if(0==--N){"("==ue&&(X=!0);break}}else if(or>=3&&or<6)++N;else if(ze.test(ue))X=!0;else if(/["'\/`]/.test(ue))for(;;--Re){if(0==Re)return;if(p.string.charAt(Re-1)==ue&&"\\"!=p.string.charAt(Re-2)){Re--;break}}else if(X&&!N){++Re;break}}X&&!N&&(x.fatArrowAt=Re)}}var Pe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function kt(p,x,W,R,N,X){this.indented=p,this.column=x,this.type=W,this.prev=N,this.info=X,null!=R&&(this.align=R)}function fe(p,x){if(!Ae)return!1;for(var W=p.localVars;W;W=W.next)if(W.name==x)return!0;for(var R=p.context;R;R=R.prev)for(W=R.vars;W;W=W.next)if(W.name==x)return!0}function Xe(p,x,W,R,N){var X=p.cc;for(M.state=p,M.stream=N,M.marked=null,M.cc=X,M.style=x,p.lexical.hasOwnProperty("align")||(p.lexical.align=!0);;)if((X.length?X.pop():B?z:A)(W,R)){for(;X.length&&X[X.length-1].lex;)X.pop()();return M.marked?M.marked:"variable"==W&&fe(p,R)?"variable-2":x}}var M={state:null,column:null,marked:null,cc:null};function oe(){for(var p=arguments.length-1;p>=0;p--)M.cc.push(arguments[p])}function y(){return oe.apply(null,arguments),!0}function K(p,x){for(var W=x;W;W=W.next)if(W.name==p)return!0;return!1}function P(p){var x=M.state;if(M.marked="def",Ae){if(x.context)if("var"==x.lexical.info&&x.context&&x.context.block){var W=le(p,x.context);if(null!=W)return void(x.context=W)}else if(!K(p,x.localVars))return void(x.localVars=new Qe(p,x.localVars));G.globalVars&&!K(p,x.globalVars)&&(x.globalVars=new Qe(p,x.globalVars))}}function le(p,x){if(x){if(x.block){var W=le(p,x.prev);return W?W==x.prev?x:new tt(W,x.vars,!0):null}return K(p,x.vars)?x:new tt(x.prev,new Qe(p,x.vars),!1)}return null}function V(p){return"public"==p||"private"==p||"protected"==p||"abstract"==p||"readonly"==p}function tt(p,x,W){this.prev=p,this.vars=x,this.block=W}function Qe(p,x){this.name=p,this.next=x}var S=new Qe("this",new Qe("arguments",null));function m(){M.state.context=new tt(M.state.context,M.state.localVars,!1),M.state.localVars=S}function $(){M.state.context=new tt(M.state.context,M.state.localVars,!0),M.state.localVars=null}function me(){M.state.localVars=M.state.context.vars,M.state.context=M.state.context.prev}function U(p,x){var W=function(){var R=M.state,N=R.indented;if("stat"==R.lexical.type)N=R.lexical.indented;else for(var X=R.lexical;X&&")"==X.type&&X.align;X=X.prev)N=X.indented;R.lexical=new kt(N,M.stream.column(),p,null,R.lexical,x)};return W.lex=!0,W}function Q(){var p=M.state;p.lexical.prev&&(")"==p.lexical.type&&(p.indented=p.lexical.indented),p.lexical=p.lexical.prev)}function F(p){return function x(W){return W==p?y():";"==p||"}"==W||")"==W||"]"==W?oe():y(x)}}function A(p,x){return"var"==p?y(U("vardef",x),_n,F(";"),Q):"keyword a"==p?y(U("form"),Le,A,Q):"keyword b"==p?y(U("form"),A,Q):"keyword d"==p?M.stream.match(/^\s*$/,!1)?y():y(U("stat"),er,F(";"),Q):"debugger"==p?y(F(";")):"{"==p?y(U("}"),$,Ct,Q,me):";"==p?y():"if"==p?("else"==M.state.lexical.info&&M.state.cc[M.state.cc.length-1]==Q&&M.state.cc.pop()(),y(U("form"),Le,A,Q,Ln)):"function"==p?y(yr):"for"==p?y(U("form"),$,Po,A,me,Q):"class"==p||de&&"interface"==x?(M.marked="keyword",y(U("form","class"==p?p:x),nn,Q)):"variable"==p?de&&"declare"==x?(M.marked="keyword",y(A)):de&&("module"==x||"enum"==x||"type"==x)&&M.stream.match(/^\s*\w/,!1)?(M.marked="keyword","enum"==x?y(q):"type"==x?y(rn,F("operator"),we,F(";")):y(U("form"),rr,F("{"),U("}"),Ct,Q,Q)):de&&"namespace"==x?(M.marked="keyword",y(U("form"),z,A,Q)):de&&"abstract"==x?(M.marked="keyword",y(A)):y(U("stat"),Ve):"switch"==p?y(U("form"),Le,F("{"),U("}","switch"),$,Ct,Q,Q,me):"case"==p?y(z,F(":")):"default"==p?y(F(":")):"catch"==p?y(U("form"),m,ie,A,Q,me):"export"==p?y(U("stat"),xr,Q):"import"==p?y(U("stat"),on,Q):"async"==p?y(A):"@"==x?y(z,A):oe(U("stat"),z,F(";"),Q)}function ie(p){if("("==p)return y(Mr,F(")"))}function z(p,x){return bt(p,x,!1)}function ve(p,x){return bt(p,x,!0)}function Le(p){return"("!=p?oe():y(U(")"),er,F(")"),Q)}function bt(p,x,W){if(M.state.fatArrowAt==M.stream.start){var R=W?T:ee;if("("==p)return y(m,U(")"),He(Mr,")"),Q,F("=>"),R,me);if("variable"==p)return oe(m,rr,F("=>"),R,me)}var N=W?wt:be;return Pe.hasOwnProperty(p)?y(N):"function"==p?y(yr,N):"class"==p||de&&"interface"==x?(M.marked="keyword",y(U("form"),Dl,Q)):"keyword c"==p||"async"==p?y(W?ve:z):"("==p?y(U(")"),er,F(")"),Q,N):"operator"==p||"spread"==p?y(W?ve:z):"["==p?y(U("]"),Ge,Q,N):"{"==p?st(Pt,"}",null,N):"quasi"==p?oe(It,N):"new"==p?y(function I(p){return function(x){return"."==x?y(p?Te:se):"variable"==x&&de?y(Yt,p?wt:be):oe(p?ve:z)}}(W)):y()}function er(p){return p.match(/[;\}\)\],]/)?oe():oe(z)}function be(p,x){return","==p?y(er):wt(p,x,!1)}function wt(p,x,W){var R=0==W?be:wt,N=0==W?z:ve;if("=>"==p)return y(m,W?T:ee,me);if("operator"==p)return/\+\+|--/.test(x)||de&&"!"==x?y(R):de&&"<"==x&&M.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?y(U(">"),He(we,">"),Q,R):"?"==x?y(z,F(":"),N):y(N);if("quasi"==p)return oe(It,R);if(";"!=p){if("("==p)return st(ve,")","call",R);if("."==p)return y(Gt,R);if("["==p)return y(U("]"),er,F("]"),Q,R);if(de&&"as"==x)return M.marked="keyword",y(we,R);if("regexp"==p)return M.state.lastType=M.marked="operator",M.stream.backUp(M.stream.pos-M.stream.start-1),y(N)}}function It(p,x){return"quasi"!=p?oe():"${"!=x.slice(x.length-2)?y(It):y(er,Z)}function Z(p){if("}"==p)return M.marked="string-2",M.state.tokenize=et,y(It)}function ee(p){return gt(M.stream,M.state),oe("{"==p?A:z)}function T(p){return gt(M.stream,M.state),oe("{"==p?A:ve)}function se(p,x){if("target"==x)return M.marked="keyword",y(be)}function Te(p,x){if("target"==x)return M.marked="keyword",y(wt)}function Ve(p){return":"==p?y(Q,A):oe(be,F(";"),Q)}function Gt(p){if("variable"==p)return M.marked="property",y()}function Pt(p,x){return"async"==p?(M.marked="property",y(Pt)):"variable"==p||"keyword"==M.style?(M.marked="property","get"==x||"set"==x?y(Bt):(de&&M.state.fatArrowAt==M.stream.start&&(W=M.stream.match(/^\s*:\s*/,!1))&&(M.state.fatArrowAt=M.stream.pos+W[0].length),y(Lt))):"number"==p||"string"==p?(M.marked=Y?"property":M.style+" property",y(Lt)):"jsonld-keyword"==p?y(Lt):de&&V(x)?(M.marked="keyword",y(Pt)):"["==p?y(z,Zt,F("]"),Lt):"spread"==p?y(ve,Lt):"*"==x?(M.marked="keyword",y(Pt)):":"==p?oe(Lt):void 0;var W}function Bt(p){return"variable"!=p?oe(Lt):(M.marked="property",y(yr))}function Lt(p){return":"==p?y(ve):"("==p?oe(yr):void 0}function He(p,x,W){function R(N,X){if(W?W.indexOf(N)>-1:","==N){var Re=M.state.lexical;return"call"==Re.info&&(Re.pos=(Re.pos||0)+1),y(function(ue,or){return ue==x||or==x?oe():oe(p)},R)}return N==x||X==x?y():W&&W.indexOf(";")>-1?oe(p):y(F(x))}return function(N,X){return N==x||X==x?y():oe(p,R)}}function st(p,x,W){for(var R=3;R<arguments.length;R++)M.cc.push(arguments[R]);return y(U(x,W),He(p,x),Q)}function Ct(p){return"}"==p?y():oe(A,Ct)}function Zt(p,x){if(de){if(":"==p)return y(we);if("?"==x)return y(Zt)}}function kn(p,x){if(de&&(":"==p||"in"==x))return y(we)}function ce(p){if(de&&":"==p)return M.stream.match(/^\s*\w+\s+is\b/,!1)?y(z,Ki,we):y(we)}function Ki(p,x){if("is"==x)return M.marked="keyword",y()}function we(p,x){return"keyof"==x||"typeof"==x||"infer"==x||"readonly"==x?(M.marked="keyword",y("typeof"==x?ve:we)):"variable"==p||"void"==x?(M.marked="type",y(cr)):"|"==x||"&"==x?y(we):"string"==p||"number"==p||"atom"==p?y(cr):"["==p?y(U("]"),He(we,"]",","),Q,cr):"{"==p?y(U("}"),te,Q,cr):"("==p?y(He(Ee,")"),mt,cr):"<"==p?y(He(we,">"),we):"quasi"==p?oe(rt,cr):void 0}function mt(p){if("=>"==p)return y(we)}function te(p){return p.match(/[\}\)\]]/)?y():","==p||";"==p?y(te):oe(Hr,te)}function Hr(p,x){return"variable"==p||"keyword"==M.style?(M.marked="property",y(Hr)):"?"==x||"number"==p||"string"==p?y(Hr):":"==p?y(we):"["==p?y(F("variable"),kn,F("]"),Hr):"("==p?oe(Br,Hr):p.match(/[;\}\)\],]/)?void 0:y()}function rt(p,x){return"quasi"!=p?oe():"${"!=x.slice(x.length-2)?y(rt):y(we,nt)}function nt(p){if("}"==p)return M.marked="string-2",M.state.tokenize=et,y(rt)}function Ee(p,x){return"variable"==p&&M.stream.match(/^\s*[?:]/,!1)||"?"==x?y(Ee):":"==p?y(we):"spread"==p?y(Ee):oe(we)}function cr(p,x){return"<"==x?y(U(">"),He(we,">"),Q,cr):"|"==x||"."==p||"&"==x?y(we):"["==p?y(we,F("]"),cr):"extends"==x||"implements"==x?(M.marked="keyword",y(we)):"?"==x?y(we,F(":"),we):void 0}function Yt(p,x){if("<"==x)return y(U(">"),He(we,">"),Q,cr)}function tr(){return oe(we,Mt)}function Mt(p,x){if("="==x)return y(we)}function _n(p,x){return"enum"==x?(M.marked="keyword",y(q)):oe(rr,Zt,dr,Ml)}function rr(p,x){return de&&V(x)?(M.marked="keyword",y(rr)):"variable"==p?(P(x),y()):"spread"==p?y(rr):"["==p?st(Zi,"]"):"{"==p?st(Ir,"}"):void 0}function Ir(p,x){return"variable"!=p||M.stream.match(/^\s*:/,!1)?("variable"==p&&(M.marked="property"),"spread"==p?y(rr):"}"==p?oe():"["==p?y(z,F("]"),F(":"),Ir):y(F(":"),rr,dr)):(P(x),y(dr))}function Zi(){return oe(rr,dr)}function dr(p,x){if("="==x)return y(ve)}function Ml(p){if(","==p)return y(_n)}function Ln(p,x){if("keyword b"==p&&"else"==x)return y(U("form","else"),A,Q)}function Po(p,x){return"await"==x?y(Po):"("==p?y(U(")"),Yi,Q):void 0}function Yi(p){return"var"==p?y(_n,Pr):"variable"==p?y(Pr):oe(Pr)}function Pr(p,x){return")"==p?y():";"==p?y(Pr):"in"==x||"of"==x?(M.marked="keyword",y(z,Pr)):oe(z,Pr)}function yr(p,x){return"*"==x?(M.marked="keyword",y(yr)):"variable"==p?(P(x),y(yr)):"("==p?y(m,U(")"),He(Mr,")"),Q,ce,A,me):de&&"<"==x?y(U(">"),He(tr,">"),Q,yr):void 0}function Br(p,x){return"*"==x?(M.marked="keyword",y(Br)):"variable"==p?(P(x),y(Br)):"("==p?y(m,U(")"),He(Mr,")"),Q,ce,me):de&&"<"==x?y(U(">"),He(tr,">"),Q,Br):void 0}function rn(p,x){return"keyword"==p||"variable"==p?(M.marked="type",y(rn)):"<"==x?y(U(">"),He(tr,">"),Q):void 0}function Mr(p,x){return"@"==x&&y(z,Mr),"spread"==p?y(Mr):de&&V(x)?(M.marked="keyword",y(Mr)):de&&"this"==p?y(Zt,dr):oe(rr,Zt,dr)}function Dl(p,x){return"variable"==p?nn(p,x):pr(p,x)}function nn(p,x){if("variable"==p)return P(x),y(pr)}function pr(p,x){return"<"==x?y(U(">"),He(tr,">"),Q,pr):"extends"==x||"implements"==x||de&&","==p?("implements"==x&&(M.marked="keyword"),y(de?we:z,pr)):"{"==p?y(U("}"),Xt,Q):void 0}function Xt(p,x){return"async"==p||"variable"==p&&("static"==x||"get"==x||"set"==x||de&&V(x))&&M.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(M.marked="keyword",y(Xt)):"variable"==p||"keyword"==M.style?(M.marked="property",y(Un,Xt)):"number"==p||"string"==p?y(Un,Xt):"["==p?y(z,Zt,F("]"),Un,Xt):"*"==x?(M.marked="keyword",y(Xt)):de&&"("==p?oe(Br,Xt):";"==p||","==p?y(Xt):"}"==p?y():"@"==x?y(z,Xt):void 0}function Un(p,x){if("!"==x||"?"==x)return y(Un);if(":"==p)return y(we,dr);if("="==x)return y(ve);var W=M.state.lexical.prev;return oe(W&&"interface"==W.info?Br:yr)}function xr(p,x){return"*"==x?(M.marked="keyword",y(Mn,F(";"))):"default"==x?(M.marked="keyword",y(z,F(";"))):"{"==p?y(He(Tn,"}"),Mn,F(";")):oe(A)}function Tn(p,x){return"as"==x?(M.marked="keyword",y(F("variable"))):"variable"==p?oe(ve,Tn):void 0}function on(p){return"string"==p?y():"("==p?oe(z):"."==p?oe(be):oe(ut,ae,Mn)}function ut(p,x){return"{"==p?st(ut,"}"):("variable"==p&&P(x),"*"==x&&(M.marked="keyword"),y(Dr))}function ae(p){if(","==p)return y(ut,ae)}function Dr(p,x){if("as"==x)return M.marked="keyword",y(ut)}function Mn(p,x){if("from"==x)return M.marked="keyword",y(z)}function Ge(p){return"]"==p?y():oe(He(ve,"]"))}function q(){return oe(U("form"),rr,F("{"),U("}"),He(nr,"}"),Q,Q)}function nr(){return oe(rr,dr)}function ir(p,x,W){return x.tokenize==Ye&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(x.lastType)||"quasi"==x.lastType&&/\{\s*$/.test(p.string.slice(0,p.pos-(W||0)))}return m.lex=$.lex=!0,me.lex=!0,Q.lex=!0,{startState:function(p){var x={tokenize:Ye,lastType:"sof",cc:[],lexical:new kt((p||0)-he,0,"block",!1),localVars:G.localVars,context:G.localVars&&new tt(null,null,!1),indented:p||0};return G.globalVars&&"object"==typeof G.globalVars&&(x.globalVars=G.globalVars),x},token:function(p,x){if(p.sol()&&(x.lexical.hasOwnProperty("align")||(x.lexical.align=!1),x.indented=p.indentation(),gt(p,x)),x.tokenize!=Kt&&p.eatSpace())return null;var W=x.tokenize(p,x);return"comment"==ft?W:(x.lastType="operator"!=ft||"++"!=at&&"--"!=at?ft:"incdec",Xe(x,W,ft,at,p))},indent:function(p,x){if(p.tokenize==Kt||p.tokenize==et)return J.Pass;if(p.tokenize!=Ye)return 0;var N,W=x&&x.charAt(0),R=p.lexical;if(!/^\s*else\b/.test(x))for(var X=p.cc.length-1;X>=0;--X){var Re=p.cc[X];if(Re==Q)R=R.prev;else if(Re!=Ln&&Re!=me)break}for(;("stat"==R.type||"form"==R.type)&&("}"==W||(N=p.cc[p.cc.length-1])&&(N==be||N==wt)&&!/^[,\.=+\-*:?[\(]/.test(x));)R=R.prev;ne&&")"==R.type&&"stat"==R.prev.type&&(R=R.prev);var ue=R.type,or=W==ue;return"vardef"==ue?R.indented+("operator"==p.lastType||","==p.lastType?R.info.length+1:0):"form"==ue&&"{"==W?R.indented:"form"==ue?R.indented+he:"stat"==ue?R.indented+(function ln(p,x){return"operator"==p.lastType||","==p.lastType||ge.test(x.charAt(0))||/[,.]/.test(x.charAt(0))}(p,x)?ne||he:0):"switch"!=R.info||or||0==G.doubleIndentSwitch?R.align?R.column+(or?0:1):R.indented+(or?0:he):R.indented+(/^(?:case|default)\b/.test(x)?he:2*he)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:B?null:"/*",blockCommentEnd:B?null:"*/",blockCommentContinue:B?null:" * ",lineComment:B?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:B?"json":"javascript",jsonldMode:Y,jsonMode:B,expressionAllowed:ir,skipExpression:function(p){Xe(p,"atom","atom","true",new J.StringStream("",2,null))}}}),J.registerHelper("wordChars","javascript",/[\w$]/),J.defineMIME("text/javascript","javascript"),J.defineMIME("text/ecmascript","javascript"),J.defineMIME("application/javascript","javascript"),J.defineMIME("application/x-javascript","javascript"),J.defineMIME("application/ecmascript","javascript"),J.defineMIME("application/json",{name:"javascript",json:!0}),J.defineMIME("application/x-json",{name:"javascript",json:!0}),J.defineMIME("application/manifest+json",{name:"javascript",json:!0}),J.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),J.defineMIME("text/typescript",{name:"javascript",typescript:!0}),J.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(Ce(8266))},521:(ai,vt,Ce)=>{!function(J){"use strict";J.defineMode("markdown",function(Ke,G){var he=J.getMode(Ke,"text/html"),ne="null"==he.name;void 0===G.highlightFormatting&&(G.highlightFormatting=!1),void 0===G.maxBlockquoteDepth&&(G.maxBlockquoteDepth=0),void 0===G.taskLists&&(G.taskLists=!1),void 0===G.strikethrough&&(G.strikethrough=!1),void 0===G.emoji&&(G.emoji=!1),void 0===G.fencedCodeBlockHighlighting&&(G.fencedCodeBlockHighlighting=!0),void 0===G.fencedCodeBlockDefaultMode&&(G.fencedCodeBlockDefaultMode="text/plain"),void 0===G.xml&&(G.xml=!0),void 0===G.tokenTypeOverrides&&(G.tokenTypeOverrides={});var B={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var Ae in B)B.hasOwnProperty(Ae)&&G.tokenTypeOverrides[Ae]&&(B[Ae]=G.tokenTypeOverrides[Ae]);var de=/^([*\-_])(?:\s*\1){2,}\s*$/,ze=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,Se=/^\[(x| )\](?=\s)/i,ge=G.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ke=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Ze=/^[^#!\[\]*_\\<>` "'(~:]+/,ft=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,at=/^\s*\[[^\]]+?\]:.*$/,pe=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function qt(S,m,$){return m.f=m.inline=$,$(S,m)}function Kt(S,m,$){return m.f=m.block=$,$(S,m)}function C(S){if(S.linkTitle=!1,S.linkHref=!1,S.linkText=!1,S.em=!1,S.strong=!1,S.strikethrough=!1,S.quote=0,S.indentedCode=!1,S.f==Pe){var m=ne;if(!m){var $=J.innerMode(he,S.htmlState);m="xml"==$.mode.name&&null===$.state.tagStart&&!$.state.context&&$.state.tokenize.isInText}m&&(S.f=M,S.block=gt,S.htmlState=null)}return S.trailingSpace=0,S.trailingSpaceNewLine=!1,S.prevLine=S.thisLine,S.thisLine={stream:null},null}function gt(S,m){var $=S.column()===m.indentation,me=function et(S){return!S||!/\S/.test(S.string)}(m.prevLine.stream),U=m.indentedCode,Q=m.prevLine.hr,F=!1!==m.list,A=(m.listStack[m.listStack.length-1]||0)+3;m.indentedCode=!1;var ie=m.indentation;if(null===m.indentationDiff&&(m.indentationDiff=m.indentation,F)){for(m.list=null;ie<m.listStack[m.listStack.length-1];)m.listStack.pop(),m.listStack.length?m.indentation=m.listStack[m.listStack.length-1]:m.list=!1;!1!==m.list&&(m.indentationDiff=ie-m.listStack[m.listStack.length-1])}var z=!(me||Q||m.prevLine.header||F&&U||m.prevLine.fencedCodeEnd),ve=(!1===m.list||Q||me)&&m.indentation<=A&&S.match(de),Le=null;if(m.indentationDiff>=4&&(U||m.prevLine.fencedCodeEnd||m.prevLine.header||me))return S.skipToEnd(),m.indentedCode=!0,B.code;if(S.eatSpace())return null;if($&&m.indentation<=A&&(Le=S.match(ge))&&Le[1].length<=6)return m.quote=0,m.header=Le[1].length,m.thisLine.header=!0,G.highlightFormatting&&(m.formatting="header"),m.f=m.inline,fe(m);if(m.indentation<=A&&S.eat(">"))return m.quote=$?1:m.quote+1,G.highlightFormatting&&(m.formatting="quote"),S.eatSpace(),fe(m);if(!ve&&!m.setext&&$&&m.indentation<=A&&(Le=S.match(ze))){var bt=Le[1]?"ol":"ul";return m.indentation=ie+S.current().length,m.list=!0,m.quote=0,m.listStack.push(m.indentation),m.em=!1,m.strong=!1,m.code=!1,m.strikethrough=!1,G.taskLists&&S.match(Se,!1)&&(m.taskList=!0),m.f=m.inline,G.highlightFormatting&&(m.formatting=["list","list-"+bt]),fe(m)}return $&&m.indentation<=A&&(Le=S.match(ft,!0))?(m.quote=0,m.fencedEndRE=new RegExp(Le[1]+"+ *$"),m.localMode=G.fencedCodeBlockHighlighting&&function Y(S){if(J.findModeByName){var m=J.findModeByName(S);m&&(S=m.mime||m.mimes[0])}var $=J.getMode(Ke,S);return"null"==$.name?null:$}(Le[2]||G.fencedCodeBlockDefaultMode),m.localMode&&(m.localState=J.startState(m.localMode)),m.f=m.block=kt,G.highlightFormatting&&(m.formatting="code-block"),m.code=-1,fe(m)):m.setext||!(z&&F||m.quote||!1!==m.list||m.code||ve||at.test(S.string))&&(Le=S.lookAhead(1))&&(Le=Le.match(ke))?(m.setext?(m.header=m.setext,m.setext=0,S.skipToEnd(),G.highlightFormatting&&(m.formatting="header")):(m.header="="==Le[0].charAt(0)?1:2,m.setext=m.header),m.thisLine.header=!0,m.f=m.inline,fe(m)):ve?(S.skipToEnd(),m.hr=!0,m.thisLine.hr=!0,B.hr):"["===S.peek()?qt(S,m,le):qt(S,m,m.inline)}function Pe(S,m){var $=he.token(S,m.htmlState);if(!ne){var me=J.innerMode(he,m.htmlState);("xml"==me.mode.name&&null===me.state.tagStart&&!me.state.context&&me.state.tokenize.isInText||m.md_inside&&S.current().indexOf(">")>-1)&&(m.f=M,m.block=gt,m.htmlState=null)}return $}function kt(S,m){var Q,$=m.listStack[m.listStack.length-1]||0,me=m.indentation<$;return m.fencedEndRE&&m.indentation<=$+3&&(me||S.match(m.fencedEndRE))?(G.highlightFormatting&&(m.formatting="code-block"),me||(Q=fe(m)),m.localMode=m.localState=null,m.block=gt,m.f=M,m.fencedEndRE=null,m.code=0,m.thisLine.fencedCodeEnd=!0,me?Kt(S,m,m.block):Q):m.localMode?m.localMode.token(S,m.localState):(S.skipToEnd(),B.code)}function fe(S){var m=[];if(S.formatting){m.push(B.formatting),"string"==typeof S.formatting&&(S.formatting=[S.formatting]);for(var $=0;$<S.formatting.length;$++)m.push(B.formatting+"-"+S.formatting[$]),"header"===S.formatting[$]&&m.push(B.formatting+"-"+S.formatting[$]+"-"+S.header),"quote"===S.formatting[$]&&m.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?B.formatting+"-"+S.formatting[$]+"-"+S.quote:"error")}if(S.taskOpen)return m.push("meta"),m.length?m.join(" "):null;if(S.taskClosed)return m.push("property"),m.length?m.join(" "):null;if(S.linkHref?m.push(B.linkHref,"url"):(S.strong&&m.push(B.strong),S.em&&m.push(B.em),S.strikethrough&&m.push(B.strikethrough),S.emoji&&m.push(B.emoji),S.linkText&&m.push(B.linkText),S.code&&m.push(B.code),S.image&&m.push(B.image),S.imageAltText&&m.push(B.imageAltText,"link"),S.imageMarker&&m.push(B.imageMarker)),S.header&&m.push(B.header,B.header+"-"+S.header),S.quote&&(m.push(B.quote),m.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?B.quote+"-"+S.quote:B.quote+"-"+G.maxBlockquoteDepth)),!1!==S.list){var me=(S.listStack.length-1)%3;m.push(me?1===me?B.list2:B.list3:B.list1)}return S.trailingSpaceNewLine?m.push("trailing-space-new-line"):S.trailingSpace&&m.push("trailing-space-"+(S.trailingSpace%2?"a":"b")),m.length?m.join(" "):null}function Xe(S,m){if(S.match(Ze,!0))return fe(m)}function M(S,m){var $=m.text(S,m);if(typeof $<"u")return $;if(m.list)return m.list=null,fe(m);if(m.taskList)return" "===S.match(Se,!0)[1]?m.taskOpen=!0:m.taskClosed=!0,G.highlightFormatting&&(m.formatting="task"),m.taskList=!1,fe(m);if(m.taskOpen=!1,m.taskClosed=!1,m.header&&S.match(/^#+$/,!0))return G.highlightFormatting&&(m.formatting="header"),fe(m);var U=S.next();if(m.linkTitle){m.linkTitle=!1;var Q=U;if("("===U&&(Q=")"),Q=(Q+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),S.match(new RegExp("^\\s*(?:[^"+Q+"\\\\]+|\\\\\\\\|\\\\.)"+Q),!0))return B.linkHref}if("`"===U){var A=m.formatting;G.highlightFormatting&&(m.formatting="code"),S.eatWhile("`");var ie=S.current().length;if(0==m.code&&(!m.quote||1==ie))return m.code=ie,fe(m);if(ie==m.code){var z=fe(m);return m.code=0,z}return m.formatting=A,fe(m)}if(m.code)return fe(m);if("\\"===U&&(S.next(),G.highlightFormatting)){var ve=fe(m),Le=B.formatting+"-escape";return ve?ve+" "+Le:Le}if("!"===U&&S.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return m.imageMarker=!0,m.image=!0,G.highlightFormatting&&(m.formatting="image"),fe(m);if("["===U&&m.imageMarker&&S.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return m.imageMarker=!1,m.imageAltText=!0,G.highlightFormatting&&(m.formatting="image"),fe(m);if("]"===U&&m.imageAltText){G.highlightFormatting&&(m.formatting="image");ve=fe(m);return m.imageAltText=!1,m.image=!1,m.inline=m.f=y,ve}if("["===U&&!m.image)return m.linkText&&S.match(/^.*?\]/)||(m.linkText=!0,G.highlightFormatting&&(m.formatting="link")),fe(m);if("]"===U&&m.linkText){G.highlightFormatting&&(m.formatting="link");ve=fe(m);return m.linkText=!1,m.inline=m.f=S.match(/\(.*?\)| ?\[.*?\]/,!1)?y:M,ve}if("<"===U&&S.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return m.f=m.inline=oe,G.highlightFormatting&&(m.formatting="link"),(ve=fe(m))?ve+=" ":ve="",ve+B.linkInline;if("<"===U&&S.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return m.f=m.inline=oe,G.highlightFormatting&&(m.formatting="link"),(ve=fe(m))?ve+=" ":ve="",ve+B.linkEmail;if(G.xml&&"<"===U&&S.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var bt=S.string.indexOf(">",S.pos);if(-1!=bt){var er=S.string.substring(S.start,bt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(er)&&(m.md_inside=!0)}return S.backUp(1),m.htmlState=J.startState(he),Kt(S,m,Pe)}if(G.xml&&"<"===U&&S.match(/^\/\w*?>/))return m.md_inside=!1,"tag";if("*"===U||"_"===U){for(var be=1,wt=1==S.pos?" ":S.string.charAt(S.pos-2);be<3&&S.eat(U);)be++;var It=S.peek()||" ",Z=!/\s/.test(It)&&(!pe.test(It)||/\s/.test(wt)||pe.test(wt)),ee=!/\s/.test(wt)&&(!pe.test(wt)||/\s/.test(It)||pe.test(It)),T=null,I=null;if(be%2&&(m.em||!Z||"*"!==U&&ee&&!pe.test(wt)?m.em==U&&ee&&("*"===U||!Z||pe.test(It))&&(T=!1):T=!0),be>1&&(m.strong||!Z||"*"!==U&&ee&&!pe.test(wt)?m.strong==U&&ee&&("*"===U||!Z||pe.test(It))&&(I=!1):I=!0),null!=I||null!=T)return G.highlightFormatting&&(m.formatting=null==T?"strong":null==I?"em":"strong em"),!0===T&&(m.em=U),!0===I&&(m.strong=U),z=fe(m),!1===T&&(m.em=!1),!1===I&&(m.strong=!1),z}else if(" "===U&&(S.eat("*")||S.eat("_"))){if(" "===S.peek())return fe(m);S.backUp(1)}if(G.strikethrough)if("~"===U&&S.eatWhile(U)){if(m.strikethrough)return G.highlightFormatting&&(m.formatting="strikethrough"),z=fe(m),m.strikethrough=!1,z;if(S.match(/^[^\s]/,!1))return m.strikethrough=!0,G.highlightFormatting&&(m.formatting="strikethrough"),fe(m)}else if(" "===U&&S.match("~~",!0)){if(" "===S.peek())return fe(m);S.backUp(2)}if(G.emoji&&":"===U&&S.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){m.emoji=!0,G.highlightFormatting&&(m.formatting="emoji");var se=fe(m);return m.emoji=!1,se}return" "===U&&(S.match(/^ +$/,!1)?m.trailingSpace++:m.trailingSpace&&(m.trailingSpaceNewLine=!0)),fe(m)}function oe(S,m){if(">"===S.next()){m.f=m.inline=M,G.highlightFormatting&&(m.formatting="link");var me=fe(m);return me?me+=" ":me="",me+B.linkInline}return S.match(/^[^>]+/,!0),B.linkInline}function y(S,m){if(S.eatSpace())return null;var $=S.next();return"("===$||"["===$?(m.f=m.inline=function P(S){return function(m,$){if(m.next()===S){$.f=$.inline=M,G.highlightFormatting&&($.formatting="link-string");var U=fe($);return $.linkHref=!1,U}return m.match(K[S]),$.linkHref=!0,fe($)}}("("===$?")":"]"),G.highlightFormatting&&(m.formatting="link-string"),m.linkHref=!0,fe(m)):"error"}var K={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function le(S,m){return S.match(/^([^\]\\]|\\.)*\]:/,!1)?(m.f=V,S.next(),G.highlightFormatting&&(m.formatting="link"),m.linkText=!0,fe(m)):qt(S,m,M)}function V(S,m){if(S.match("]:",!0)){m.f=m.inline=tt,G.highlightFormatting&&(m.formatting="link");var $=fe(m);return m.linkText=!1,$}return S.match(/^([^\]\\]|\\.)+/,!0),B.linkText}function tt(S,m){return S.eatSpace()?null:(S.match(/^[^\s]+/,!0),void 0===S.peek()?m.linkTitle=!0:S.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),m.f=m.inline=M,B.linkHref+" url")}var Qe={startState:function(){return{f:gt,prevLine:{stream:null},thisLine:{stream:null},block:gt,htmlState:null,indentation:0,inline:M,text:Xe,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(S){return{f:S.f,prevLine:S.prevLine,thisLine:S.thisLine,block:S.block,htmlState:S.htmlState&&J.copyState(he,S.htmlState),indentation:S.indentation,localMode:S.localMode,localState:S.localMode?J.copyState(S.localMode,S.localState):null,inline:S.inline,text:S.text,formatting:!1,linkText:S.linkText,linkTitle:S.linkTitle,linkHref:S.linkHref,code:S.code,em:S.em,strong:S.strong,strikethrough:S.strikethrough,emoji:S.emoji,header:S.header,setext:S.setext,hr:S.hr,taskList:S.taskList,list:S.list,listStack:S.listStack.slice(0),quote:S.quote,indentedCode:S.indentedCode,trailingSpace:S.trailingSpace,trailingSpaceNewLine:S.trailingSpaceNewLine,md_inside:S.md_inside,fencedEndRE:S.fencedEndRE}},token:function(S,m){if(m.formatting=!1,S!=m.thisLine.stream){if(m.header=0,m.hr=!1,S.match(/^\s*$/,!0))return C(m),null;if(m.prevLine=m.thisLine,m.thisLine={stream:S},m.taskList=!1,m.trailingSpace=0,m.trailingSpaceNewLine=!1,!m.localState&&(m.f=m.block,m.f!=Pe)){var $=S.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(m.indentation=$,m.indentationDiff=null,$>0)return null}}return m.f(S,m)},innerMode:function(S){return S.block==Pe?{state:S.htmlState,mode:he}:S.localState?{state:S.localState,mode:S.localMode}:{state:S,mode:Qe}},indent:function(S,m,$){return S.block==Pe&&he.indent?he.indent(S.htmlState,m,$):S.localState&&S.localMode.indent?S.localMode.indent(S.localState,m,$):J.Pass},blankLine:C,getType:fe,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Qe},"xml"),J.defineMIME("text/markdown","markdown"),J.defineMIME("text/x-markdown","markdown")}(Ce(8266),Ce(7684),Ce(8834))},8834:(ai,vt,Ce)=>{!function(J){"use strict";J.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var Ke=0;Ke<J.modeInfo.length;Ke++){var G=J.modeInfo[Ke];G.mimes&&(G.mime=G.mimes[0])}J.findModeByMIME=function(he){he=he.toLowerCase();for(var ne=0;ne<J.modeInfo.length;ne++){var Y=J.modeInfo[ne];if(Y.mime==he)return Y;if(Y.mimes)for(var B=0;B<Y.mimes.length;B++)if(Y.mimes[B]==he)return Y}return/\+xml$/.test(he)?J.findModeByMIME("application/xml"):/\+json$/.test(he)?J.findModeByMIME("application/json"):void 0},J.findModeByExtension=function(he){he=he.toLowerCase();for(var ne=0;ne<J.modeInfo.length;ne++){var Y=J.modeInfo[ne];if(Y.ext)for(var B=0;B<Y.ext.length;B++)if(Y.ext[B]==he)return Y}},J.findModeByFileName=function(he){for(var ne=0;ne<J.modeInfo.length;ne++){var Y=J.modeInfo[ne];if(Y.file&&Y.file.test(he))return Y}var B=he.lastIndexOf("."),Ae=B>-1&&he.substring(B+1,he.length);if(Ae)return J.findModeByExtension(Ae)},J.findModeByName=function(he){he=he.toLowerCase();for(var ne=0;ne<J.modeInfo.length;ne++){var Y=J.modeInfo[ne];if(Y.name.toLowerCase()==he)return Y;if(Y.alias)for(var B=0;B<Y.alias.length;B++)if(Y.alias[B].toLowerCase()==he)return Y}}}(Ce(8266))},7684:(ai,vt,Ce)=>{!function(J){"use strict";var Ke={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},G={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};J.defineMode("xml",function(he,ne){var ze,Se,Y=he.indentUnit,B={},Ae=ne.htmlMode?Ke:G;for(var de in Ae)B[de]=Ae[de];for(var de in ne)B[de]=ne[de];function ge(y,K){function P(tt){return K.tokenize=tt,tt(y,K)}var le=y.next();return"<"==le?y.eat("!")?y.eat("[")?y.match("CDATA[")?P(ft("atom","]]>")):null:y.match("--")?P(ft("comment","--\x3e")):y.match("DOCTYPE",!0,!0)?(y.eatWhile(/[\w\._\-]/),P(at(1))):null:y.eat("?")?(y.eatWhile(/[\w\._\-]/),K.tokenize=ft("meta","?>"),"meta"):(ze=y.eat("/")?"closeTag":"openTag",K.tokenize=ke,"tag bracket"):"&"==le?(y.eat("#")?y.eat("x")?y.eatWhile(/[a-fA-F\d]/)&&y.eat(";"):y.eatWhile(/[\d]/)&&y.eat(";"):y.eatWhile(/[\w\.\-:]/)&&y.eat(";"))?"atom":"error":(y.eatWhile(/[^&<]/),null)}function ke(y,K){var P=y.next();if(">"==P||"/"==P&&y.eat(">"))return K.tokenize=ge,ze=">"==P?"endTag":"selfcloseTag","tag bracket";if("="==P)return ze="equals",null;if("<"==P){K.tokenize=ge,K.state=et,K.tagName=K.tagStart=null;var le=K.tokenize(y,K);return le?le+" tag error":"tag error"}return/[\'\"]/.test(P)?(K.tokenize=function Ze(y){var K=function(P,le){for(;!P.eol();)if(P.next()==y){le.tokenize=ke;break}return"string"};return K.isInAttribute=!0,K}(P),K.stringStartCol=y.column(),K.tokenize(y,K)):(y.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ft(y,K){return function(P,le){for(;!P.eol();){if(P.match(K)){le.tokenize=ge;break}P.next()}return y}}function at(y){return function(K,P){for(var le;null!=(le=K.next());){if("<"==le)return P.tokenize=at(y+1),P.tokenize(K,P);if(">"==le){if(1==y){P.tokenize=ge;break}return P.tokenize=at(y-1),P.tokenize(K,P)}}return"meta"}}function pe(y){return y&&y.toLowerCase()}function Ye(y,K,P){this.prev=y.context,this.tagName=K||"",this.indent=y.indented,this.startOfLine=P,(B.doNotIndent.hasOwnProperty(K)||y.context&&y.context.noIndent)&&(this.noIndent=!0)}function qt(y){y.context&&(y.context=y.context.prev)}function Kt(y,K){for(var P;;){if(!y.context||!B.contextGrabbers.hasOwnProperty(pe(P=y.context.tagName))||!B.contextGrabbers[pe(P)].hasOwnProperty(pe(K)))return;qt(y)}}function et(y,K,P){return"openTag"==y?(P.tagStart=K.column(),C):"closeTag"==y?gt:et}function C(y,K,P){return"word"==y?(P.tagName=K.current(),Se="tag",fe):B.allowMissingTagName&&"endTag"==y?(Se="tag bracket",fe(y,0,P)):(Se="error",C)}function gt(y,K,P){if("word"==y){var le=K.current();return P.context&&P.context.tagName!=le&&B.implicitlyClosed.hasOwnProperty(pe(P.context.tagName))&&qt(P),P.context&&P.context.tagName==le||!1===B.matchClosing?(Se="tag",Pe):(Se="tag error",kt)}return B.allowMissingTagName&&"endTag"==y?(Se="tag bracket",Pe(y,0,P)):(Se="error",kt)}function Pe(y,K,P){return"endTag"!=y?(Se="error",Pe):(qt(P),et)}function kt(y,K,P){return Se="error",Pe(y,0,P)}function fe(y,K,P){if("word"==y)return Se="attribute",Xe;if("endTag"==y||"selfcloseTag"==y){var le=P.tagName,V=P.tagStart;return P.tagName=P.tagStart=null,"selfcloseTag"==y||B.autoSelfClosers.hasOwnProperty(pe(le))?Kt(P,le):(Kt(P,le),P.context=new Ye(P,le,V==P.indented)),et}return Se="error",fe}function Xe(y,K,P){return"equals"==y?M:(B.allowMissing||(Se="error"),fe(y,0,P))}function M(y,K,P){return"string"==y?oe:"word"==y&&B.allowUnquoted?(Se="string",fe):(Se="error",fe(y,0,P))}function oe(y,K,P){return"string"==y?oe:fe(y,0,P)}return ge.isInText=!0,{startState:function(y){var K={tokenize:ge,state:et,indented:y||0,tagName:null,tagStart:null,context:null};return null!=y&&(K.baseIndent=y),K},token:function(y,K){if(!K.tagName&&y.sol()&&(K.indented=y.indentation()),y.eatSpace())return null;ze=null;var P=K.tokenize(y,K);return(P||ze)&&"comment"!=P&&(Se=null,K.state=K.state(ze||P,y,K),Se&&(P="error"==Se?P+" error":Se)),P},indent:function(y,K,P){var le=y.context;if(y.tokenize.isInAttribute)return y.tagStart==y.indented?y.stringStartCol+1:y.indented+Y;if(le&&le.noIndent)return J.Pass;if(y.tokenize!=ke&&y.tokenize!=ge)return P?P.match(/^(\s*)/)[0].length:0;if(y.tagName)return!1!==B.multilineTagIndentPastTag?y.tagStart+y.tagName.length+2:y.tagStart+Y*(B.multilineTagIndentFactor||1);if(B.alignCDATA&&/<!\[CDATA\[/.test(K))return 0;var V=K&&/^<(\/)?([\w_:\.-]*)/.exec(K);if(V&&V[1])for(;le;){if(le.tagName==V[2]){le=le.prev;break}if(!B.implicitlyClosed.hasOwnProperty(pe(le.tagName)))break;le=le.prev}else if(V)for(;le;){var tt=B.contextGrabbers[pe(le.tagName)];if(!tt||!tt.hasOwnProperty(pe(V[2])))break;le=le.prev}for(;le&&le.prev&&!le.startOfLine;)le=le.prev;return le?le.indent+Y:y.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:B.htmlMode?"html":"xml",helperType:B.htmlMode?"html":"xml",skipAttribute:function(y){y.state==M&&(y.state=fe)},xmlCurrentTag:function(y){return y.tagName?{name:y.tagName,close:"closeTag"==y.type}:null},xmlCurrentContext:function(y){for(var K=[],P=y.context;P;P=P.prev)K.push(P.tagName);return K.reverse()}}}),J.defineMIME("text/xml","xml"),J.defineMIME("application/xml","xml"),J.mimeModes.hasOwnProperty("text/html")||J.defineMIME("text/html",{name:"xml",htmlMode:!0})}(Ce(8266))},6233:(ai,vt)=>{!function(){function Ce(){var Ke=self;Ke.addEventListener("message",({data:G})=>{const{id:he,input:ne,version:Y,command:B}=G;if("fetch-compiler-versions"===B)fetch("https://binaries.soliditylang.org/bin/list.json").then(Ae=>Ae.json()).then(Ae=>{postMessage({id:he,result:Ae})}).catch(Ae=>{postMessage({id:he,error:Ae.message})});else{Ke.importScripts(Y);const Ae=Ke.Module;if("_solidity_compile"in Ae){const de=Ae.cwrap("solidity_compile","string",["string","number"]),ze=JSON.parse(de(ne));postMessage({id:he,result:ze})}}})}"object"==typeof global&&(global.Worker||(global.Worker={}),global.Worker.Module=void 0),window!==self&&Ce(),vt.q=Ce}()}}]);