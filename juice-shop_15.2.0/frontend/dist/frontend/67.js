"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[67],{9067:(W,B,o)=>{o.r(B),o.d(B,{FaucetModule:()=>R});var b=o(6895),d=o(4006),k=o(6630),F=o(4550),E=o(3546),w=o(4144),x=o(4859),S=o(7009),c=o(5861),H=o(5376),h=o(328),N=o(6003),m=o(4323),g=o(5159),D=o(3037),M=o(2064),T=o(4304),p=o(9978),e=o(4650),U=o(5004),A=o(9549);function z(s,u){1&s&&(e.TgZ(0,"span"),e._uU(1,"Connect your MetaMask"),e.qZA())}function I(s,u){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.AsE("",t.userData.address.substring(0,6),"...",t.userData.address.slice(-6),"")}}(0,T.j)({autoConnect:!0,provider:(0,N.yl)()});const{ethereum:j}=window,Z="0x41427790c94E7a592B17ad694eD9c06A02bb9C39",P="0x36435796Ca9be2bf150CE0dECc2D8Fab5C4d6E13",O="0x860e3616aD0E0dEDc23352891f3E10C4131EA5BC";let J=(()=>{class s{constructor(t,n,a){this.keysService=t,this.snackBarHelperService=n,this.changeDetectorRef=a,this.session=!1,this.deployedContractAddress="",this.BEEBalance=0,this.myBEEBalance=0,this.withdrawAmount=null,this.successResponse=!1,this.mintButtonDisabled=!0,this.challengeSolved=!1,this.nftMintText="Mint the Pot - 1000 BEE",this.errorMessage="",this.metamaskAddress=""}ngOnInit(){this.handleAuth(),this.checkNftMinted(),this.nftMintListener(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}nftMintListener(){this.keysService.nftMintListen().subscribe(t=>{console.log(t)},t=>{console.error(t)})}checkNftMinted(){this.keysService.checkNftMinted().subscribe(t=>{const n=t.data[0].solved;this.mintButtonDisabled=n,this.challengeSolved=n,n&&(this.nftMintText="Minted Successfully")},t=>{console.error(t),this.successResponse=!1})}fetchMyBeeBalance(){var t=this;return(0,c.Z)(function*(){try{const a=new m.Q(window.ethereum).getSigner(),i=new g.CH(P,h.T_,a),r=yield a.getAddress(),l=yield i.balanceOf(r);console.log(l),t.myBEEBalance=l.div(D.Ce).toNumber(),t.myBEEBalance>=1e3&&!t.challengeSolved&&(t.mintButtonDisabled=!1),t.myBEEBalance<=1e3&&!t.challengeSolved&&(t.mintButtonDisabled=!0)}catch(n){console.error("Error fetching BEE balance:",n)}})()}fetchBeeBalance(){var t=this;return(0,c.Z)(function*(){try{const a=new m.Q(window.ethereum).getSigner(),r=yield new g.CH(O,h.dj,a).balance();console.log(r),t.BEEBalance=r}catch(n){console.error("Error fetching BEE balance:",n)}})()}handleChainChanged(t){var n=this;return(0,c.Z)(function*(){yield n.handleAuth()})()}handleAuth(){var t=this;return(0,c.Z)(function*(){var n;try{const{isConnected:a}=(0,p.D0)();if(a&&(yield(0,p.zP)()),!window.ethereum)return void t.snackBarHelperService.open("Please install a Web3 Wallet like Metamask to proceed.","errorBar");const i=yield(0,p.$j)({connector:new T.I});t.metamaskAddress=i.account,t.userData={address:i.account,chain:i.chain.id,network:"evm"},yield j.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const r="11155111",l=String(null===(n=i.chain)||void 0===n?void 0:n.id);i&&l!==r?(t.session=!1,t.snackBarHelperService.open("Please connect to the Sepolia Network","errorBar")):(console.log("Should show ethereum chain now"),t.session=!0,yield t.fetchBeeBalance(),yield t.fetchMyBeeBalance()),console.log("session",t.session),t.changeDetectorRef.detectChanges()}catch{console.log("An error occured")}})()}extractBEETokens(t=this.withdrawAmount){var n=this;return(0,c.Z)(function*(){if(n.session)try{const a=new m.Q(window.ethereum),i=a.getSigner(),r=yield i.getAddress(),l=yield a.getBalance(r),f=M.formatEther(l);if(console.log("ETH balance:",f,typeof f),f<"0.001")return void(n.errorMessage="Deposit some test ETH from sepoliafaucet.com or any other ETH faucet to initiate transaction.");yield(yield new g.CH(O,h.dj,i).withdraw(t)).wait(),console.log("BEE tokens extracted successfully"),n.fetchBeeBalance(),n.fetchMyBeeBalance()}catch(a){console.error("Error extracting BEEs:",a.message),n.errorMessage=a.message}else n.snackBarHelperService.open("Please connect your web3 wallet first.","errorBar")})()}mintNFT(){var t=this;return(0,c.Z)(function*(){if(t.session){t.nftMintText="Awaiting Approval";try{const a=new m.Q(window.ethereum).getSigner(),i=M.parseUnits("1000","18");yield(yield new g.CH(P,h.T_,a).approve(Z,i)).wait(),t.nftMintText="Confirm Mint...";const y=yield new g.CH(Z,h.vn,a).mintNFT();console.log(y),t.nftMintText="Mint in Process...";const C=yield y.wait();console.log(C),C&&(t.nftMintText="Successfully Minted",setTimeout(()=>{t.keysService.verifyNFTWallet(t.metamaskAddress).subscribe(v=>{v.success&&(t.successResponse=v.status,t.mintButtonDisabled=!0)},v=>{console.error(v),t.successResponse=!1})},3500)),console.log("NFT minted successfully!")}catch(n){console.error("Error minting NFT:",n)}}else t.snackBarHelperService.open("Please connect your web3 wallet first.","errorBar")})()}signOut(){var t=this;return(0,c.Z)(function*(){yield(0,p.zP)(),t.session=!1})()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(H.t),e.Y36(U.H),e.Y36(e.sBO))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-faucet"]],decls:34,vars:8,consts:[[1,"container"],[1,"mat-elevation-z6","faucet-container"],[1,"faucet-image"],["src","assets/public/images/BeeOwner.png"],[1,"faucet-balance"],["color","accent"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],[1,"withdraw-container"],["color","accent","appearance","outline",2,"width","100%"],["matInput","","placeholder","Enter number of BEE","type","number","id","withdrawAmount","aria-label","Text field for the withdrawal amount",3,"ngModel","ngModelChange"],[1,"error"],["mat-raised-button","","type","button","color","primary",3,"click"],[1,"mat-elevation-z6","honeypot-container"],[1,"honeypot-image","mat-elevation-z6"],["src","assets/public/images/HoneyPot.png"],["mat-raised-button","","color","warn","fxFlexAlign","center",1,"mint_button",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"h1"),e._uU(3,"BEE Haven"),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"img",3),e.qZA(),e.TgZ(6,"p"),e._uU(7," Welcome to Bee Haven, the hive of BEE tokens! Immerse yourself in the buzz as our generous Bee Owner shares the joy of bees with you. Embrace their bountiful generosity, but remember, taking too many bees at once may disrupt their harmonious abode. "),e.qZA(),e.TgZ(8,"div",4)(9,"span",5),e._uU(10),e.qZA(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return n.handleAuth()}),e.YNc(13,z,2,0,"span",8),e.YNc(14,I,2,2,"span",8),e.qZA()()(),e.TgZ(15,"div",9)(16,"div")(17,"mat-form-field",10)(18,"mat-label"),e._uU(19,"Enter no. of BEEs:"),e.qZA(),e.TgZ(20,"input",11),e.NdJ("ngModelChange",function(i){return n.withdrawAmount=i}),e.qZA()(),e.TgZ(21,"h5",12),e._uU(22),e.qZA()(),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.extractBEETokens()}),e._uU(24," Claim BEEs "),e.qZA()()(),e.TgZ(25,"mat-card",14)(26,"div",15),e._UZ(27,"img",16),e.qZA(),e.TgZ(28,"h2"),e._uU(29,"The Enchanted Honey Pot"),e.qZA(),e.TgZ(30,"p"),e._uU(31," Deep within the magical realm, the Enchanted Honey Pot awaits its rightful owner. To unlock its wonders, you must trade the essence of the buzzing kingdom - BEE tokens. Gather these mystical tokens from the generous Bee Haven. "),e.qZA(),e.TgZ(32,"button",17),e.NdJ("click",function(){return n.mintNFT()}),e._uU(33),e.qZA()()()),2&t&&(e.xp6(10),e.AsE(" Faucet Balance: ",n.BEEBalance," | Your BEE Balance: ",n.myBEEBalance,""),e.xp6(3),e.Q6J("ngIf",!n.session),e.xp6(1),e.Q6J("ngIf",n.session),e.xp6(6),e.Q6J("ngModel",n.withdrawAmount),e.xp6(2),e.Oqu(n.errorMessage),e.xp6(10),e.Q6J("disabled",n.mintButtonDisabled),e.xp6(1),e.hij(" ",n.nftMintText," "))},dependencies:[b.O5,d.Fj,d.wV,d.JJ,d.On,x.lW,E.a8,A.KE,A.hX,w.Nt],styles:[".container[_ngcontent-%COMP%]{display:flex;grid-gap:40px;margin:0 40px}.faucet-container[_ngcontent-%COMP%]{padding:40px 80px}.faucet-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.faucet-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;margin:0;text-align:center}.faucet-balance[_ngcontent-%COMP%]{align-items:center;border:1px solid #7b7b7b;border-radius:10px;display:flex;font-size:18px;margin:20px 0;padding:8px;text-align:center;width:100%}.faucet-balance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:70%}.faucet-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px}.faucet-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.metamask-button[_ngcontent-%COMP%]{float:right;margin:16px;width:30%}.metamask-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 6px;width:250px}.withdraw-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:20px;width:100%}.withdraw-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:column;width:100%}.withdraw-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;justify-self:end;margin-top:-20px;padding:16px 24px;width:300px}.honeypot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px 80px;text-align:center;width:35%}.honeypot-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.honeypot-image[_ngcontent-%COMP%]{height:320px;margin:0 auto 16px;width:320px}.honeypot-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;margin:10px}.mint_button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;margin-top:32px;padding:16px 48px}"]}),s})();var Q=o(8184);const L=[{path:"",component:J}];let R=(()=>{class s{constructor(t,n){this.configurationService=t,this.overlayContainer=n,t.getApplicationConfiguration().subscribe(a=>{n.getContainerElement().classList.add(a.application.theme+"-theme")})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(F.e),e.LFG(Q.Xj))},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[b.ez,k.Bz.forChild(L),d.u5,d.UX,x.ot,E.QW,w.c,S.ZX]}),s})()}}]);